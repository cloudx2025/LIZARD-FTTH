(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();var n_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Zf={exports:{}},ea={},Hf={exports:{}},ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ms=Symbol.for("react.element"),r_=Symbol.for("react.portal"),i_=Symbol.for("react.fragment"),s_=Symbol.for("react.strict_mode"),o_=Symbol.for("react.profiler"),a_=Symbol.for("react.provider"),l_=Symbol.for("react.context"),u_=Symbol.for("react.forward_ref"),c_=Symbol.for("react.suspense"),h_=Symbol.for("react.memo"),d_=Symbol.for("react.lazy"),ud=Symbol.iterator;function f_(e){return e===null||typeof e!="object"?null:(e=ud&&e[ud]||e["@@iterator"],typeof e=="function"?e:null)}var Vf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},qf=Object.assign,Kf={};function ri(e,t,n){this.props=e,this.context=t,this.refs=Kf,this.updater=n||Vf}ri.prototype.isReactComponent={};ri.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ri.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Gf(){}Gf.prototype=ri.prototype;function Qu(e,t,n){this.props=e,this.context=t,this.refs=Kf,this.updater=n||Vf}var Yu=Qu.prototype=new Gf;Yu.constructor=Qu;qf(Yu,ri.prototype);Yu.isPureReactComponent=!0;var cd=Array.isArray,Jf=Object.prototype.hasOwnProperty,Xu={current:null},Qf={key:!0,ref:!0,__self:!0,__source:!0};function Yf(e,t,n){var i,o={},a=null,u=null;if(t!=null)for(i in t.ref!==void 0&&(u=t.ref),t.key!==void 0&&(a=""+t.key),t)Jf.call(t,i)&&!Qf.hasOwnProperty(i)&&(o[i]=t[i]);var d=arguments.length-2;if(d===1)o.children=n;else if(1<d){for(var h=Array(d),m=0;m<d;m++)h[m]=arguments[m+2];o.children=h}if(e&&e.defaultProps)for(i in d=e.defaultProps,d)o[i]===void 0&&(o[i]=d[i]);return{$$typeof:ms,type:e,key:a,ref:u,props:o,_owner:Xu.current}}function p_(e,t){return{$$typeof:ms,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ec(e){return typeof e=="object"&&e!==null&&e.$$typeof===ms}function m_(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var hd=/\/+/g;function ll(e,t){return typeof e=="object"&&e!==null&&e.key!=null?m_(""+e.key):t.toString(36)}function ho(e,t,n,i,o){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var u=!1;if(e===null)u=!0;else switch(a){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case ms:case r_:u=!0}}if(u)return u=e,o=o(u),e=i===""?"."+ll(u,0):i,cd(o)?(n="",e!=null&&(n=e.replace(hd,"$&/")+"/"),ho(o,t,n,"",function(m){return m})):o!=null&&(ec(o)&&(o=p_(o,n+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(hd,"$&/")+"/")+e)),t.push(o)),1;if(u=0,i=i===""?".":i+":",cd(e))for(var d=0;d<e.length;d++){a=e[d];var h=i+ll(a,d);u+=ho(a,t,n,h,o)}else if(h=f_(e),typeof h=="function")for(e=h.call(e),d=0;!(a=e.next()).done;)a=a.value,h=i+ll(a,d++),u+=ho(a,t,n,h,o);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function Ws(e,t,n){if(e==null)return e;var i=[],o=0;return ho(e,i,"","",function(a){return t.call(n,a,o++)}),i}function g_(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var et={current:null},fo={transition:null},v_={ReactCurrentDispatcher:et,ReactCurrentBatchConfig:fo,ReactCurrentOwner:Xu};function Xf(){throw Error("act(...) is not supported in production builds of React.")}ne.Children={map:Ws,forEach:function(e,t,n){Ws(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ws(e,function(){t++}),t},toArray:function(e){return Ws(e,function(t){return t})||[]},only:function(e){if(!ec(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ne.Component=ri;ne.Fragment=i_;ne.Profiler=o_;ne.PureComponent=Qu;ne.StrictMode=s_;ne.Suspense=c_;ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=v_;ne.act=Xf;ne.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=qf({},e.props),o=e.key,a=e.ref,u=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,u=Xu.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var d=e.type.defaultProps;for(h in t)Jf.call(t,h)&&!Qf.hasOwnProperty(h)&&(i[h]=t[h]===void 0&&d!==void 0?d[h]:t[h])}var h=arguments.length-2;if(h===1)i.children=n;else if(1<h){d=Array(h);for(var m=0;m<h;m++)d[m]=arguments[m+2];i.children=d}return{$$typeof:ms,type:e.type,key:o,ref:a,props:i,_owner:u}};ne.createContext=function(e){return e={$$typeof:l_,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:a_,_context:e},e.Consumer=e};ne.createElement=Yf;ne.createFactory=function(e){var t=Yf.bind(null,e);return t.type=e,t};ne.createRef=function(){return{current:null}};ne.forwardRef=function(e){return{$$typeof:u_,render:e}};ne.isValidElement=ec;ne.lazy=function(e){return{$$typeof:d_,_payload:{_status:-1,_result:e},_init:g_}};ne.memo=function(e,t){return{$$typeof:h_,type:e,compare:t===void 0?null:t}};ne.startTransition=function(e){var t=fo.transition;fo.transition={};try{e()}finally{fo.transition=t}};ne.unstable_act=Xf;ne.useCallback=function(e,t){return et.current.useCallback(e,t)};ne.useContext=function(e){return et.current.useContext(e)};ne.useDebugValue=function(){};ne.useDeferredValue=function(e){return et.current.useDeferredValue(e)};ne.useEffect=function(e,t){return et.current.useEffect(e,t)};ne.useId=function(){return et.current.useId()};ne.useImperativeHandle=function(e,t,n){return et.current.useImperativeHandle(e,t,n)};ne.useInsertionEffect=function(e,t){return et.current.useInsertionEffect(e,t)};ne.useLayoutEffect=function(e,t){return et.current.useLayoutEffect(e,t)};ne.useMemo=function(e,t){return et.current.useMemo(e,t)};ne.useReducer=function(e,t,n){return et.current.useReducer(e,t,n)};ne.useRef=function(e){return et.current.useRef(e)};ne.useState=function(e){return et.current.useState(e)};ne.useSyncExternalStore=function(e,t,n){return et.current.useSyncExternalStore(e,t,n)};ne.useTransition=function(){return et.current.useTransition()};ne.version="18.3.1";Hf.exports=ne;var R=Hf.exports;const ko=Wf(R);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var __=R,y_=Symbol.for("react.element"),w_=Symbol.for("react.fragment"),x_=Object.prototype.hasOwnProperty,b_=__.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,S_={key:!0,ref:!0,__self:!0,__source:!0};function ep(e,t,n){var i,o={},a=null,u=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(u=t.ref);for(i in t)x_.call(t,i)&&!S_.hasOwnProperty(i)&&(o[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)o[i]===void 0&&(o[i]=t[i]);return{$$typeof:y_,type:e,key:a,ref:u,props:o,_owner:b_.current}}ea.Fragment=w_;ea.jsx=ep;ea.jsxs=ep;Zf.exports=ea;var f=Zf.exports,Wl={},tp={exports:{}},gt={},np={exports:{}},rp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(I,J){var B=I.length;I.push(J);e:for(;0<B;){var G=B-1>>>1,se=I[G];if(0<o(se,J))I[G]=J,I[B]=se,B=G;else break e}}function n(I){return I.length===0?null:I[0]}function i(I){if(I.length===0)return null;var J=I[0],B=I.pop();if(B!==J){I[0]=B;e:for(var G=0,se=I.length,Le=se>>>1;G<Le;){var ce=2*(G+1)-1,ae=I[ce],Q=ce+1,nt=I[Q];if(0>o(ae,B))Q<se&&0>o(nt,ae)?(I[G]=nt,I[Q]=B,G=Q):(I[G]=ae,I[ce]=B,G=ce);else if(Q<se&&0>o(nt,B))I[G]=nt,I[Q]=B,G=Q;else break e}}return J}function o(I,J){var B=I.sortIndex-J.sortIndex;return B!==0?B:I.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();e.unstable_now=function(){return u.now()-d}}var h=[],m=[],_=1,y=null,w=3,P=!1,b=!1,k=!1,N=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(I){for(var J=n(m);J!==null;){if(J.callback===null)i(m);else if(J.startTime<=I)i(m),J.sortIndex=J.expirationTime,t(h,J);else break;J=n(m)}}function E(I){if(k=!1,S(I),!b)if(n(h)!==null)b=!0,Ue(A);else{var J=n(m);J!==null&&Gt(E,J.startTime-I)}}function A(I,J){b=!1,k&&(k=!1,g($),$=-1),P=!0;var B=w;try{for(S(J),y=n(h);y!==null&&(!(y.expirationTime>J)||I&&!he());){var G=y.callback;if(typeof G=="function"){y.callback=null,w=y.priorityLevel;var se=G(y.expirationTime<=J);J=e.unstable_now(),typeof se=="function"?y.callback=se:y===n(h)&&i(h),S(J)}else i(h);y=n(h)}if(y!==null)var Le=!0;else{var ce=n(m);ce!==null&&Gt(E,ce.startTime-J),Le=!1}return Le}finally{y=null,w=B,P=!1}}var O=!1,D=null,$=-1,re=5,ee=-1;function he(){return!(e.unstable_now()-ee<re)}function Me(){if(D!==null){var I=e.unstable_now();ee=I;var J=!0;try{J=D(!0,I)}finally{J?Bn():(O=!1,D=null)}}else O=!1}var Bn;if(typeof x=="function")Bn=function(){x(Me)};else if(typeof MessageChannel<"u"){var _t=new MessageChannel,Ta=_t.port2;_t.port1.onmessage=Me,Bn=function(){Ta.postMessage(null)}}else Bn=function(){N(Me,0)};function Ue(I){D=I,O||(O=!0,Bn())}function Gt(I,J){$=N(function(){I(e.unstable_now())},J)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(I){I.callback=null},e.unstable_continueExecution=function(){b||P||(b=!0,Ue(A))},e.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):re=0<I?Math.floor(1e3/I):5},e.unstable_getCurrentPriorityLevel=function(){return w},e.unstable_getFirstCallbackNode=function(){return n(h)},e.unstable_next=function(I){switch(w){case 1:case 2:case 3:var J=3;break;default:J=w}var B=w;w=J;try{return I()}finally{w=B}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(I,J){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var B=w;w=I;try{return J()}finally{w=B}},e.unstable_scheduleCallback=function(I,J,B){var G=e.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?G+B:G):B=G,I){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=B+se,I={id:_++,callback:J,priorityLevel:I,startTime:B,expirationTime:se,sortIndex:-1},B>G?(I.sortIndex=B,t(m,I),n(h)===null&&I===n(m)&&(k?(g($),$=-1):k=!0,Gt(E,B-G))):(I.sortIndex=se,t(h,I),b||P||(b=!0,Ue(A))),I},e.unstable_shouldYield=he,e.unstable_wrapCallback=function(I){var J=w;return function(){var B=w;w=J;try{return I.apply(this,arguments)}finally{w=B}}}})(rp);np.exports=rp;var k_=np.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E_=R,mt=k_;function z(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ip=new Set,Vi={};function ur(e,t){Jr(e,t),Jr(e+"Capture",t)}function Jr(e,t){for(Vi[e]=t,e=0;e<t.length;e++)ip.add(t[e])}var an=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zl=Object.prototype.hasOwnProperty,P_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,dd={},fd={};function T_(e){return Zl.call(fd,e)?!0:Zl.call(dd,e)?!1:P_.test(e)?fd[e]=!0:(dd[e]=!0,!1)}function C_(e,t,n,i){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function j_(e,t,n,i){if(t===null||typeof t>"u"||C_(e,t,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function tt(e,t,n,i,o,a,u){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=u}var Ve={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ve[e]=new tt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ve[t]=new tt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ve[e]=new tt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ve[e]=new tt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ve[e]=new tt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ve[e]=new tt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ve[e]=new tt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ve[e]=new tt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ve[e]=new tt(e,5,!1,e.toLowerCase(),null,!1,!1)});var tc=/[\-:]([a-z])/g;function nc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(tc,nc);Ve[t]=new tt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(tc,nc);Ve[t]=new tt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(tc,nc);Ve[t]=new tt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ve[e]=new tt(e,1,!1,e.toLowerCase(),null,!1,!1)});Ve.xlinkHref=new tt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ve[e]=new tt(e,1,!1,e.toLowerCase(),null,!0,!0)});function rc(e,t,n,i){var o=Ve.hasOwnProperty(t)?Ve[t]:null;(o!==null?o.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(j_(t,n,o,i)&&(n=null),i||o===null?T_(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,i=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}var hn=E_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zs=Symbol.for("react.element"),Nr=Symbol.for("react.portal"),Or=Symbol.for("react.fragment"),ic=Symbol.for("react.strict_mode"),Hl=Symbol.for("react.profiler"),sp=Symbol.for("react.provider"),op=Symbol.for("react.context"),sc=Symbol.for("react.forward_ref"),Vl=Symbol.for("react.suspense"),ql=Symbol.for("react.suspense_list"),oc=Symbol.for("react.memo"),_n=Symbol.for("react.lazy"),ap=Symbol.for("react.offscreen"),pd=Symbol.iterator;function xi(e){return e===null||typeof e!="object"?null:(e=pd&&e[pd]||e["@@iterator"],typeof e=="function"?e:null)}var Se=Object.assign,ul;function Ni(e){if(ul===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ul=t&&t[1]||""}return`
`+ul+e}var cl=!1;function hl(e,t){if(!e||cl)return"";cl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(m){var i=m}Reflect.construct(e,[],t)}else{try{t.call()}catch(m){i=m}e.call(t.prototype)}else{try{throw Error()}catch(m){i=m}e()}}catch(m){if(m&&i&&typeof m.stack=="string"){for(var o=m.stack.split(`
`),a=i.stack.split(`
`),u=o.length-1,d=a.length-1;1<=u&&0<=d&&o[u]!==a[d];)d--;for(;1<=u&&0<=d;u--,d--)if(o[u]!==a[d]){if(u!==1||d!==1)do if(u--,d--,0>d||o[u]!==a[d]){var h=`
`+o[u].replace(" at new "," at ");return e.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",e.displayName)),h}while(1<=u&&0<=d);break}}}finally{cl=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Ni(e):""}function N_(e){switch(e.tag){case 5:return Ni(e.type);case 16:return Ni("Lazy");case 13:return Ni("Suspense");case 19:return Ni("SuspenseList");case 0:case 2:case 15:return e=hl(e.type,!1),e;case 11:return e=hl(e.type.render,!1),e;case 1:return e=hl(e.type,!0),e;default:return""}}function Kl(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Or:return"Fragment";case Nr:return"Portal";case Hl:return"Profiler";case ic:return"StrictMode";case Vl:return"Suspense";case ql:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case op:return(e.displayName||"Context")+".Consumer";case sp:return(e._context.displayName||"Context")+".Provider";case sc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case oc:return t=e.displayName||null,t!==null?t:Kl(e.type)||"Memo";case _n:t=e._payload,e=e._init;try{return Kl(e(t))}catch{}}return null}function O_(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Kl(t);case 8:return t===ic?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Rn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function lp(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function L_(e){var t=lp(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(u){i=""+u,a.call(this,u)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(u){i=""+u},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Hs(e){e._valueTracker||(e._valueTracker=L_(e))}function up(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=lp(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function Eo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Gl(e,t){var n=t.checked;return Se({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function md(e,t){var n=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;n=Rn(t.value!=null?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function cp(e,t){t=t.checked,t!=null&&rc(e,"checked",t,!1)}function Jl(e,t){cp(e,t);var n=Rn(t.value),i=t.type;if(n!=null)i==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ql(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ql(e,t.type,Rn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function gd(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ql(e,t,n){(t!=="number"||Eo(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Oi=Array.isArray;function Wr(e,t,n,i){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&i&&(e[n].defaultSelected=!0)}else{for(n=""+Rn(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,i&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Yl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(z(91));return Se({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function vd(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(z(92));if(Oi(n)){if(1<n.length)throw Error(z(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Rn(n)}}function hp(e,t){var n=Rn(t.value),i=Rn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),i!=null&&(e.defaultValue=""+i)}function _d(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function dp(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xl(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?dp(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Vs,fp=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,i,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,i,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Vs=Vs||document.createElement("div"),Vs.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Vs.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function qi(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ii={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},A_=["Webkit","ms","Moz","O"];Object.keys(Ii).forEach(function(e){A_.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ii[t]=Ii[e]})});function pp(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ii.hasOwnProperty(e)&&Ii[e]?(""+t).trim():t+"px"}function mp(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var i=n.indexOf("--")===0,o=pp(n,t[n],i);n==="float"&&(n="cssFloat"),i?e.setProperty(n,o):e[n]=o}}var R_=Se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function eu(e,t){if(t){if(R_[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(z(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(z(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(z(61))}if(t.style!=null&&typeof t.style!="object")throw Error(z(62))}}function tu(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nu=null;function ac(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ru=null,Zr=null,Hr=null;function yd(e){if(e=_s(e)){if(typeof ru!="function")throw Error(z(280));var t=e.stateNode;t&&(t=sa(t),ru(e.stateNode,e.type,t))}}function gp(e){Zr?Hr?Hr.push(e):Hr=[e]:Zr=e}function vp(){if(Zr){var e=Zr,t=Hr;if(Hr=Zr=null,yd(e),t)for(e=0;e<t.length;e++)yd(t[e])}}function _p(e,t){return e(t)}function yp(){}var dl=!1;function wp(e,t,n){if(dl)return e(t,n);dl=!0;try{return _p(e,t,n)}finally{dl=!1,(Zr!==null||Hr!==null)&&(yp(),vp())}}function Ki(e,t){var n=e.stateNode;if(n===null)return null;var i=sa(n);if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(z(231,t,typeof n));return n}var iu=!1;if(an)try{var bi={};Object.defineProperty(bi,"passive",{get:function(){iu=!0}}),window.addEventListener("test",bi,bi),window.removeEventListener("test",bi,bi)}catch{iu=!1}function I_(e,t,n,i,o,a,u,d,h){var m=Array.prototype.slice.call(arguments,3);try{t.apply(n,m)}catch(_){this.onError(_)}}var Mi=!1,Po=null,To=!1,su=null,M_={onError:function(e){Mi=!0,Po=e}};function z_(e,t,n,i,o,a,u,d,h){Mi=!1,Po=null,I_.apply(M_,arguments)}function D_(e,t,n,i,o,a,u,d,h){if(z_.apply(this,arguments),Mi){if(Mi){var m=Po;Mi=!1,Po=null}else throw Error(z(198));To||(To=!0,su=m)}}function cr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function xp(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function wd(e){if(cr(e)!==e)throw Error(z(188))}function B_(e){var t=e.alternate;if(!t){if(t=cr(e),t===null)throw Error(z(188));return t!==e?null:e}for(var n=e,i=t;;){var o=n.return;if(o===null)break;var a=o.alternate;if(a===null){if(i=o.return,i!==null){n=i;continue}break}if(o.child===a.child){for(a=o.child;a;){if(a===n)return wd(o),e;if(a===i)return wd(o),t;a=a.sibling}throw Error(z(188))}if(n.return!==i.return)n=o,i=a;else{for(var u=!1,d=o.child;d;){if(d===n){u=!0,n=o,i=a;break}if(d===i){u=!0,i=o,n=a;break}d=d.sibling}if(!u){for(d=a.child;d;){if(d===n){u=!0,n=a,i=o;break}if(d===i){u=!0,i=a,n=o;break}d=d.sibling}if(!u)throw Error(z(189))}}if(n.alternate!==i)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?e:t}function bp(e){return e=B_(e),e!==null?Sp(e):null}function Sp(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Sp(e);if(t!==null)return t;e=e.sibling}return null}var kp=mt.unstable_scheduleCallback,xd=mt.unstable_cancelCallback,U_=mt.unstable_shouldYield,$_=mt.unstable_requestPaint,Te=mt.unstable_now,F_=mt.unstable_getCurrentPriorityLevel,lc=mt.unstable_ImmediatePriority,Ep=mt.unstable_UserBlockingPriority,Co=mt.unstable_NormalPriority,W_=mt.unstable_LowPriority,Pp=mt.unstable_IdlePriority,ta=null,qt=null;function Z_(e){if(qt&&typeof qt.onCommitFiberRoot=="function")try{qt.onCommitFiberRoot(ta,e,void 0,(e.current.flags&128)===128)}catch{}}var zt=Math.clz32?Math.clz32:q_,H_=Math.log,V_=Math.LN2;function q_(e){return e>>>=0,e===0?32:31-(H_(e)/V_|0)|0}var qs=64,Ks=4194304;function Li(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function jo(e,t){var n=e.pendingLanes;if(n===0)return 0;var i=0,o=e.suspendedLanes,a=e.pingedLanes,u=n&268435455;if(u!==0){var d=u&~o;d!==0?i=Li(d):(a&=u,a!==0&&(i=Li(a)))}else u=n&~o,u!==0?i=Li(u):a!==0&&(i=Li(a));if(i===0)return 0;if(t!==0&&t!==i&&!(t&o)&&(o=i&-i,a=t&-t,o>=a||o===16&&(a&4194240)!==0))return t;if(i&4&&(i|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)n=31-zt(t),o=1<<n,i|=e[n],t&=~o;return i}function K_(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function G_(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,a=e.pendingLanes;0<a;){var u=31-zt(a),d=1<<u,h=o[u];h===-1?(!(d&n)||d&i)&&(o[u]=K_(d,t)):h<=t&&(e.expiredLanes|=d),a&=~d}}function ou(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Tp(){var e=qs;return qs<<=1,!(qs&4194240)&&(qs=64),e}function fl(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gs(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-zt(t),e[t]=n}function J_(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-zt(n),a=1<<o;t[o]=0,i[o]=-1,e[o]=-1,n&=~a}}function uc(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-zt(n),o=1<<i;o&t|e[i]&t&&(e[i]|=t),n&=~o}}var ue=0;function Cp(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var jp,cc,Np,Op,Lp,au=!1,Gs=[],Pn=null,Tn=null,Cn=null,Gi=new Map,Ji=new Map,xn=[],Q_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bd(e,t){switch(e){case"focusin":case"focusout":Pn=null;break;case"dragenter":case"dragleave":Tn=null;break;case"mouseover":case"mouseout":Cn=null;break;case"pointerover":case"pointerout":Gi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ji.delete(t.pointerId)}}function Si(e,t,n,i,o,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:a,targetContainers:[o]},t!==null&&(t=_s(t),t!==null&&cc(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function Y_(e,t,n,i,o){switch(t){case"focusin":return Pn=Si(Pn,e,t,n,i,o),!0;case"dragenter":return Tn=Si(Tn,e,t,n,i,o),!0;case"mouseover":return Cn=Si(Cn,e,t,n,i,o),!0;case"pointerover":var a=o.pointerId;return Gi.set(a,Si(Gi.get(a)||null,e,t,n,i,o)),!0;case"gotpointercapture":return a=o.pointerId,Ji.set(a,Si(Ji.get(a)||null,e,t,n,i,o)),!0}return!1}function Ap(e){var t=Yn(e.target);if(t!==null){var n=cr(t);if(n!==null){if(t=n.tag,t===13){if(t=xp(n),t!==null){e.blockedOn=t,Lp(e.priority,function(){Np(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function po(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=lu(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);nu=i,n.target.dispatchEvent(i),nu=null}else return t=_s(n),t!==null&&cc(t),e.blockedOn=n,!1;t.shift()}return!0}function Sd(e,t,n){po(e)&&n.delete(t)}function X_(){au=!1,Pn!==null&&po(Pn)&&(Pn=null),Tn!==null&&po(Tn)&&(Tn=null),Cn!==null&&po(Cn)&&(Cn=null),Gi.forEach(Sd),Ji.forEach(Sd)}function ki(e,t){e.blockedOn===t&&(e.blockedOn=null,au||(au=!0,mt.unstable_scheduleCallback(mt.unstable_NormalPriority,X_)))}function Qi(e){function t(o){return ki(o,e)}if(0<Gs.length){ki(Gs[0],e);for(var n=1;n<Gs.length;n++){var i=Gs[n];i.blockedOn===e&&(i.blockedOn=null)}}for(Pn!==null&&ki(Pn,e),Tn!==null&&ki(Tn,e),Cn!==null&&ki(Cn,e),Gi.forEach(t),Ji.forEach(t),n=0;n<xn.length;n++)i=xn[n],i.blockedOn===e&&(i.blockedOn=null);for(;0<xn.length&&(n=xn[0],n.blockedOn===null);)Ap(n),n.blockedOn===null&&xn.shift()}var Vr=hn.ReactCurrentBatchConfig,No=!0;function ey(e,t,n,i){var o=ue,a=Vr.transition;Vr.transition=null;try{ue=1,hc(e,t,n,i)}finally{ue=o,Vr.transition=a}}function ty(e,t,n,i){var o=ue,a=Vr.transition;Vr.transition=null;try{ue=4,hc(e,t,n,i)}finally{ue=o,Vr.transition=a}}function hc(e,t,n,i){if(No){var o=lu(e,t,n,i);if(o===null)Sl(e,t,i,Oo,n),bd(e,i);else if(Y_(o,e,t,n,i))i.stopPropagation();else if(bd(e,i),t&4&&-1<Q_.indexOf(e)){for(;o!==null;){var a=_s(o);if(a!==null&&jp(a),a=lu(e,t,n,i),a===null&&Sl(e,t,i,Oo,n),a===o)break;o=a}o!==null&&i.stopPropagation()}else Sl(e,t,i,null,n)}}var Oo=null;function lu(e,t,n,i){if(Oo=null,e=ac(i),e=Yn(e),e!==null)if(t=cr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=xp(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Oo=e,null}function Rp(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(F_()){case lc:return 1;case Ep:return 4;case Co:case W_:return 16;case Pp:return 536870912;default:return 16}default:return 16}}var kn=null,dc=null,mo=null;function Ip(){if(mo)return mo;var e,t=dc,n=t.length,i,o="value"in kn?kn.value:kn.textContent,a=o.length;for(e=0;e<n&&t[e]===o[e];e++);var u=n-e;for(i=1;i<=u&&t[n-i]===o[a-i];i++);return mo=o.slice(e,1<i?1-i:void 0)}function go(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Js(){return!0}function kd(){return!1}function vt(e){function t(n,i,o,a,u){this._reactName=n,this._targetInst=o,this.type=i,this.nativeEvent=a,this.target=u,this.currentTarget=null;for(var d in e)e.hasOwnProperty(d)&&(n=e[d],this[d]=n?n(a):a[d]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Js:kd,this.isPropagationStopped=kd,this}return Se(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Js)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Js)},persist:function(){},isPersistent:Js}),t}var ii={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fc=vt(ii),vs=Se({},ii,{view:0,detail:0}),ny=vt(vs),pl,ml,Ei,na=Se({},vs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ei&&(Ei&&e.type==="mousemove"?(pl=e.screenX-Ei.screenX,ml=e.screenY-Ei.screenY):ml=pl=0,Ei=e),pl)},movementY:function(e){return"movementY"in e?e.movementY:ml}}),Ed=vt(na),ry=Se({},na,{dataTransfer:0}),iy=vt(ry),sy=Se({},vs,{relatedTarget:0}),gl=vt(sy),oy=Se({},ii,{animationName:0,elapsedTime:0,pseudoElement:0}),ay=vt(oy),ly=Se({},ii,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),uy=vt(ly),cy=Se({},ii,{data:0}),Pd=vt(cy),hy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function py(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=fy[e])?!!t[e]:!1}function pc(){return py}var my=Se({},vs,{key:function(e){if(e.key){var t=hy[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=go(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?dy[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pc,charCode:function(e){return e.type==="keypress"?go(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?go(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),gy=vt(my),vy=Se({},na,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=vt(vy),_y=Se({},vs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pc}),yy=vt(_y),wy=Se({},ii,{propertyName:0,elapsedTime:0,pseudoElement:0}),xy=vt(wy),by=Se({},na,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Sy=vt(by),ky=[9,13,27,32],mc=an&&"CompositionEvent"in window,zi=null;an&&"documentMode"in document&&(zi=document.documentMode);var Ey=an&&"TextEvent"in window&&!zi,Mp=an&&(!mc||zi&&8<zi&&11>=zi),Cd=" ",jd=!1;function zp(e,t){switch(e){case"keyup":return ky.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Lr=!1;function Py(e,t){switch(e){case"compositionend":return Dp(t);case"keypress":return t.which!==32?null:(jd=!0,Cd);case"textInput":return e=t.data,e===Cd&&jd?null:e;default:return null}}function Ty(e,t){if(Lr)return e==="compositionend"||!mc&&zp(e,t)?(e=Ip(),mo=dc=kn=null,Lr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mp&&t.locale!=="ko"?null:t.data;default:return null}}var Cy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Cy[e.type]:t==="textarea"}function Bp(e,t,n,i){gp(i),t=Lo(t,"onChange"),0<t.length&&(n=new fc("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Di=null,Yi=null;function jy(e){Jp(e,0)}function ra(e){var t=Ir(e);if(up(t))return e}function Ny(e,t){if(e==="change")return t}var Up=!1;if(an){var vl;if(an){var _l="oninput"in document;if(!_l){var Od=document.createElement("div");Od.setAttribute("oninput","return;"),_l=typeof Od.oninput=="function"}vl=_l}else vl=!1;Up=vl&&(!document.documentMode||9<document.documentMode)}function Ld(){Di&&(Di.detachEvent("onpropertychange",$p),Yi=Di=null)}function $p(e){if(e.propertyName==="value"&&ra(Yi)){var t=[];Bp(t,Yi,e,ac(e)),wp(jy,t)}}function Oy(e,t,n){e==="focusin"?(Ld(),Di=t,Yi=n,Di.attachEvent("onpropertychange",$p)):e==="focusout"&&Ld()}function Ly(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ra(Yi)}function Ay(e,t){if(e==="click")return ra(t)}function Ry(e,t){if(e==="input"||e==="change")return ra(t)}function Iy(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Bt=typeof Object.is=="function"?Object.is:Iy;function Xi(e,t){if(Bt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var o=n[i];if(!Zl.call(t,o)||!Bt(e[o],t[o]))return!1}return!0}function Ad(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Rd(e,t){var n=Ad(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ad(n)}}function Fp(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Fp(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Wp(){for(var e=window,t=Eo();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Eo(e.document)}return t}function gc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function My(e){var t=Wp(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Fp(n.ownerDocument.documentElement,n)){if(i!==null&&gc(n)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,a=Math.min(i.start,o);i=i.end===void 0?a:Math.min(i.end,o),!e.extend&&a>i&&(o=i,i=a,a=o),o=Rd(n,a);var u=Rd(n,i);o&&u&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==u.node||e.focusOffset!==u.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),a>i?(e.addRange(t),e.extend(u.node,u.offset)):(t.setEnd(u.node,u.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var zy=an&&"documentMode"in document&&11>=document.documentMode,Ar=null,uu=null,Bi=null,cu=!1;function Id(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;cu||Ar==null||Ar!==Eo(i)||(i=Ar,"selectionStart"in i&&gc(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Bi&&Xi(Bi,i)||(Bi=i,i=Lo(uu,"onSelect"),0<i.length&&(t=new fc("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=Ar)))}function Qs(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Rr={animationend:Qs("Animation","AnimationEnd"),animationiteration:Qs("Animation","AnimationIteration"),animationstart:Qs("Animation","AnimationStart"),transitionend:Qs("Transition","TransitionEnd")},yl={},Zp={};an&&(Zp=document.createElement("div").style,"AnimationEvent"in window||(delete Rr.animationend.animation,delete Rr.animationiteration.animation,delete Rr.animationstart.animation),"TransitionEvent"in window||delete Rr.transitionend.transition);function ia(e){if(yl[e])return yl[e];if(!Rr[e])return e;var t=Rr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Zp)return yl[e]=t[n];return e}var Hp=ia("animationend"),Vp=ia("animationiteration"),qp=ia("animationstart"),Kp=ia("transitionend"),Gp=new Map,Md="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mn(e,t){Gp.set(e,t),ur(t,[e])}for(var wl=0;wl<Md.length;wl++){var xl=Md[wl],Dy=xl.toLowerCase(),By=xl[0].toUpperCase()+xl.slice(1);Mn(Dy,"on"+By)}Mn(Hp,"onAnimationEnd");Mn(Vp,"onAnimationIteration");Mn(qp,"onAnimationStart");Mn("dblclick","onDoubleClick");Mn("focusin","onFocus");Mn("focusout","onBlur");Mn(Kp,"onTransitionEnd");Jr("onMouseEnter",["mouseout","mouseover"]);Jr("onMouseLeave",["mouseout","mouseover"]);Jr("onPointerEnter",["pointerout","pointerover"]);Jr("onPointerLeave",["pointerout","pointerover"]);ur("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ur("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ur("onBeforeInput",["compositionend","keypress","textInput","paste"]);ur("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ur("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ur("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ai="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Uy=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ai));function zd(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,D_(i,t,void 0,e),e.currentTarget=null}function Jp(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],o=i.event;i=i.listeners;e:{var a=void 0;if(t)for(var u=i.length-1;0<=u;u--){var d=i[u],h=d.instance,m=d.currentTarget;if(d=d.listener,h!==a&&o.isPropagationStopped())break e;zd(o,d,m),a=h}else for(u=0;u<i.length;u++){if(d=i[u],h=d.instance,m=d.currentTarget,d=d.listener,h!==a&&o.isPropagationStopped())break e;zd(o,d,m),a=h}}}if(To)throw e=su,To=!1,su=null,e}function me(e,t){var n=t[mu];n===void 0&&(n=t[mu]=new Set);var i=e+"__bubble";n.has(i)||(Qp(t,e,2,!1),n.add(i))}function bl(e,t,n){var i=0;t&&(i|=4),Qp(n,e,i,t)}var Ys="_reactListening"+Math.random().toString(36).slice(2);function es(e){if(!e[Ys]){e[Ys]=!0,ip.forEach(function(n){n!=="selectionchange"&&(Uy.has(n)||bl(n,!1,e),bl(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ys]||(t[Ys]=!0,bl("selectionchange",!1,t))}}function Qp(e,t,n,i){switch(Rp(t)){case 1:var o=ey;break;case 4:o=ty;break;default:o=hc}n=o.bind(null,t,n,e),o=void 0,!iu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),i?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Sl(e,t,n,i,o){var a=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var u=i.tag;if(u===3||u===4){var d=i.stateNode.containerInfo;if(d===o||d.nodeType===8&&d.parentNode===o)break;if(u===4)for(u=i.return;u!==null;){var h=u.tag;if((h===3||h===4)&&(h=u.stateNode.containerInfo,h===o||h.nodeType===8&&h.parentNode===o))return;u=u.return}for(;d!==null;){if(u=Yn(d),u===null)return;if(h=u.tag,h===5||h===6){i=a=u;continue e}d=d.parentNode}}i=i.return}wp(function(){var m=a,_=ac(n),y=[];e:{var w=Gp.get(e);if(w!==void 0){var P=fc,b=e;switch(e){case"keypress":if(go(n)===0)break e;case"keydown":case"keyup":P=gy;break;case"focusin":b="focus",P=gl;break;case"focusout":b="blur",P=gl;break;case"beforeblur":case"afterblur":P=gl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":P=Ed;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":P=iy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":P=yy;break;case Hp:case Vp:case qp:P=ay;break;case Kp:P=xy;break;case"scroll":P=ny;break;case"wheel":P=Sy;break;case"copy":case"cut":case"paste":P=uy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":P=Td}var k=(t&4)!==0,N=!k&&e==="scroll",g=k?w!==null?w+"Capture":null:w;k=[];for(var x=m,S;x!==null;){S=x;var E=S.stateNode;if(S.tag===5&&E!==null&&(S=E,g!==null&&(E=Ki(x,g),E!=null&&k.push(ts(x,E,S)))),N)break;x=x.return}0<k.length&&(w=new P(w,b,null,n,_),y.push({event:w,listeners:k}))}}if(!(t&7)){e:{if(w=e==="mouseover"||e==="pointerover",P=e==="mouseout"||e==="pointerout",w&&n!==nu&&(b=n.relatedTarget||n.fromElement)&&(Yn(b)||b[ln]))break e;if((P||w)&&(w=_.window===_?_:(w=_.ownerDocument)?w.defaultView||w.parentWindow:window,P?(b=n.relatedTarget||n.toElement,P=m,b=b?Yn(b):null,b!==null&&(N=cr(b),b!==N||b.tag!==5&&b.tag!==6)&&(b=null)):(P=null,b=m),P!==b)){if(k=Ed,E="onMouseLeave",g="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(k=Td,E="onPointerLeave",g="onPointerEnter",x="pointer"),N=P==null?w:Ir(P),S=b==null?w:Ir(b),w=new k(E,x+"leave",P,n,_),w.target=N,w.relatedTarget=S,E=null,Yn(_)===m&&(k=new k(g,x+"enter",b,n,_),k.target=S,k.relatedTarget=N,E=k),N=E,P&&b)t:{for(k=P,g=b,x=0,S=k;S;S=wr(S))x++;for(S=0,E=g;E;E=wr(E))S++;for(;0<x-S;)k=wr(k),x--;for(;0<S-x;)g=wr(g),S--;for(;x--;){if(k===g||g!==null&&k===g.alternate)break t;k=wr(k),g=wr(g)}k=null}else k=null;P!==null&&Dd(y,w,P,k,!1),b!==null&&N!==null&&Dd(y,N,b,k,!0)}}e:{if(w=m?Ir(m):window,P=w.nodeName&&w.nodeName.toLowerCase(),P==="select"||P==="input"&&w.type==="file")var A=Ny;else if(Nd(w))if(Up)A=Ry;else{A=Ly;var O=Oy}else(P=w.nodeName)&&P.toLowerCase()==="input"&&(w.type==="checkbox"||w.type==="radio")&&(A=Ay);if(A&&(A=A(e,m))){Bp(y,A,n,_);break e}O&&O(e,w,m),e==="focusout"&&(O=w._wrapperState)&&O.controlled&&w.type==="number"&&Ql(w,"number",w.value)}switch(O=m?Ir(m):window,e){case"focusin":(Nd(O)||O.contentEditable==="true")&&(Ar=O,uu=m,Bi=null);break;case"focusout":Bi=uu=Ar=null;break;case"mousedown":cu=!0;break;case"contextmenu":case"mouseup":case"dragend":cu=!1,Id(y,n,_);break;case"selectionchange":if(zy)break;case"keydown":case"keyup":Id(y,n,_)}var D;if(mc)e:{switch(e){case"compositionstart":var $="onCompositionStart";break e;case"compositionend":$="onCompositionEnd";break e;case"compositionupdate":$="onCompositionUpdate";break e}$=void 0}else Lr?zp(e,n)&&($="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&($="onCompositionStart");$&&(Mp&&n.locale!=="ko"&&(Lr||$!=="onCompositionStart"?$==="onCompositionEnd"&&Lr&&(D=Ip()):(kn=_,dc="value"in kn?kn.value:kn.textContent,Lr=!0)),O=Lo(m,$),0<O.length&&($=new Pd($,e,null,n,_),y.push({event:$,listeners:O}),D?$.data=D:(D=Dp(n),D!==null&&($.data=D)))),(D=Ey?Py(e,n):Ty(e,n))&&(m=Lo(m,"onBeforeInput"),0<m.length&&(_=new Pd("onBeforeInput","beforeinput",null,n,_),y.push({event:_,listeners:m}),_.data=D))}Jp(y,t)})}function ts(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Lo(e,t){for(var n=t+"Capture",i=[];e!==null;){var o=e,a=o.stateNode;o.tag===5&&a!==null&&(o=a,a=Ki(e,n),a!=null&&i.unshift(ts(e,a,o)),a=Ki(e,t),a!=null&&i.push(ts(e,a,o))),e=e.return}return i}function wr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Dd(e,t,n,i,o){for(var a=t._reactName,u=[];n!==null&&n!==i;){var d=n,h=d.alternate,m=d.stateNode;if(h!==null&&h===i)break;d.tag===5&&m!==null&&(d=m,o?(h=Ki(n,a),h!=null&&u.unshift(ts(n,h,d))):o||(h=Ki(n,a),h!=null&&u.push(ts(n,h,d)))),n=n.return}u.length!==0&&e.push({event:t,listeners:u})}var $y=/\r\n?/g,Fy=/\u0000|\uFFFD/g;function Bd(e){return(typeof e=="string"?e:""+e).replace($y,`
`).replace(Fy,"")}function Xs(e,t,n){if(t=Bd(t),Bd(e)!==t&&n)throw Error(z(425))}function Ao(){}var hu=null,du=null;function fu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var pu=typeof setTimeout=="function"?setTimeout:void 0,Wy=typeof clearTimeout=="function"?clearTimeout:void 0,Ud=typeof Promise=="function"?Promise:void 0,Zy=typeof queueMicrotask=="function"?queueMicrotask:typeof Ud<"u"?function(e){return Ud.resolve(null).then(e).catch(Hy)}:pu;function Hy(e){setTimeout(function(){throw e})}function kl(e,t){var n=t,i=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(i===0){e.removeChild(o),Qi(t);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=o}while(n);Qi(t)}function jn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function $d(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var si=Math.random().toString(36).slice(2),Vt="__reactFiber$"+si,ns="__reactProps$"+si,ln="__reactContainer$"+si,mu="__reactEvents$"+si,Vy="__reactListeners$"+si,qy="__reactHandles$"+si;function Yn(e){var t=e[Vt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ln]||n[Vt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=$d(e);e!==null;){if(n=e[Vt])return n;e=$d(e)}return t}e=n,n=e.parentNode}return null}function _s(e){return e=e[Vt]||e[ln],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ir(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(z(33))}function sa(e){return e[ns]||null}var gu=[],Mr=-1;function zn(e){return{current:e}}function ge(e){0>Mr||(e.current=gu[Mr],gu[Mr]=null,Mr--)}function pe(e,t){Mr++,gu[Mr]=e.current,e.current=t}var In={},Je=zn(In),ot=zn(!1),ir=In;function Qr(e,t){var n=e.type.contextTypes;if(!n)return In;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var o={},a;for(a in n)o[a]=t[a];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function at(e){return e=e.childContextTypes,e!=null}function Ro(){ge(ot),ge(Je)}function Fd(e,t,n){if(Je.current!==In)throw Error(z(168));pe(Je,t),pe(ot,n)}function Yp(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var o in i)if(!(o in t))throw Error(z(108,O_(e)||"Unknown",o));return Se({},n,i)}function Io(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||In,ir=Je.current,pe(Je,e),pe(ot,ot.current),!0}function Wd(e,t,n){var i=e.stateNode;if(!i)throw Error(z(169));n?(e=Yp(e,t,ir),i.__reactInternalMemoizedMergedChildContext=e,ge(ot),ge(Je),pe(Je,e)):ge(ot),pe(ot,n)}var nn=null,oa=!1,El=!1;function Xp(e){nn===null?nn=[e]:nn.push(e)}function Ky(e){oa=!0,Xp(e)}function Dn(){if(!El&&nn!==null){El=!0;var e=0,t=ue;try{var n=nn;for(ue=1;e<n.length;e++){var i=n[e];do i=i(!0);while(i!==null)}nn=null,oa=!1}catch(o){throw nn!==null&&(nn=nn.slice(e+1)),kp(lc,Dn),o}finally{ue=t,El=!1}}return null}var zr=[],Dr=0,Mo=null,zo=0,bt=[],St=0,sr=null,rn=1,sn="";function qn(e,t){zr[Dr++]=zo,zr[Dr++]=Mo,Mo=e,zo=t}function em(e,t,n){bt[St++]=rn,bt[St++]=sn,bt[St++]=sr,sr=e;var i=rn;e=sn;var o=32-zt(i)-1;i&=~(1<<o),n+=1;var a=32-zt(t)+o;if(30<a){var u=o-o%5;a=(i&(1<<u)-1).toString(32),i>>=u,o-=u,rn=1<<32-zt(t)+o|n<<o|i,sn=a+e}else rn=1<<a|n<<o|i,sn=e}function vc(e){e.return!==null&&(qn(e,1),em(e,1,0))}function _c(e){for(;e===Mo;)Mo=zr[--Dr],zr[Dr]=null,zo=zr[--Dr],zr[Dr]=null;for(;e===sr;)sr=bt[--St],bt[St]=null,sn=bt[--St],bt[St]=null,rn=bt[--St],bt[St]=null}var pt=null,ft=null,ve=!1,Mt=null;function tm(e,t){var n=kt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Zd(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,pt=e,ft=jn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,pt=e,ft=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=sr!==null?{id:rn,overflow:sn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=kt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,pt=e,ft=null,!0):!1;default:return!1}}function vu(e){return(e.mode&1)!==0&&(e.flags&128)===0}function _u(e){if(ve){var t=ft;if(t){var n=t;if(!Zd(e,t)){if(vu(e))throw Error(z(418));t=jn(n.nextSibling);var i=pt;t&&Zd(e,t)?tm(i,n):(e.flags=e.flags&-4097|2,ve=!1,pt=e)}}else{if(vu(e))throw Error(z(418));e.flags=e.flags&-4097|2,ve=!1,pt=e}}}function Hd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;pt=e}function eo(e){if(e!==pt)return!1;if(!ve)return Hd(e),ve=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!fu(e.type,e.memoizedProps)),t&&(t=ft)){if(vu(e))throw nm(),Error(z(418));for(;t;)tm(e,t),t=jn(t.nextSibling)}if(Hd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(z(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){ft=jn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}ft=null}}else ft=pt?jn(e.stateNode.nextSibling):null;return!0}function nm(){for(var e=ft;e;)e=jn(e.nextSibling)}function Yr(){ft=pt=null,ve=!1}function yc(e){Mt===null?Mt=[e]:Mt.push(e)}var Gy=hn.ReactCurrentBatchConfig;function Pi(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var i=n.stateNode}if(!i)throw Error(z(147,e));var o=i,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(u){var d=o.refs;u===null?delete d[a]:d[a]=u},t._stringRef=a,t)}if(typeof e!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,e))}return e}function to(e,t){throw e=Object.prototype.toString.call(t),Error(z(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Vd(e){var t=e._init;return t(e._payload)}function rm(e){function t(g,x){if(e){var S=g.deletions;S===null?(g.deletions=[x],g.flags|=16):S.push(x)}}function n(g,x){if(!e)return null;for(;x!==null;)t(g,x),x=x.sibling;return null}function i(g,x){for(g=new Map;x!==null;)x.key!==null?g.set(x.key,x):g.set(x.index,x),x=x.sibling;return g}function o(g,x){return g=An(g,x),g.index=0,g.sibling=null,g}function a(g,x,S){return g.index=S,e?(S=g.alternate,S!==null?(S=S.index,S<x?(g.flags|=2,x):S):(g.flags|=2,x)):(g.flags|=1048576,x)}function u(g){return e&&g.alternate===null&&(g.flags|=2),g}function d(g,x,S,E){return x===null||x.tag!==6?(x=Ll(S,g.mode,E),x.return=g,x):(x=o(x,S),x.return=g,x)}function h(g,x,S,E){var A=S.type;return A===Or?_(g,x,S.props.children,E,S.key):x!==null&&(x.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===_n&&Vd(A)===x.type)?(E=o(x,S.props),E.ref=Pi(g,x,S),E.return=g,E):(E=So(S.type,S.key,S.props,null,g.mode,E),E.ref=Pi(g,x,S),E.return=g,E)}function m(g,x,S,E){return x===null||x.tag!==4||x.stateNode.containerInfo!==S.containerInfo||x.stateNode.implementation!==S.implementation?(x=Al(S,g.mode,E),x.return=g,x):(x=o(x,S.children||[]),x.return=g,x)}function _(g,x,S,E,A){return x===null||x.tag!==7?(x=rr(S,g.mode,E,A),x.return=g,x):(x=o(x,S),x.return=g,x)}function y(g,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Ll(""+x,g.mode,S),x.return=g,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Zs:return S=So(x.type,x.key,x.props,null,g.mode,S),S.ref=Pi(g,null,x),S.return=g,S;case Nr:return x=Al(x,g.mode,S),x.return=g,x;case _n:var E=x._init;return y(g,E(x._payload),S)}if(Oi(x)||xi(x))return x=rr(x,g.mode,S,null),x.return=g,x;to(g,x)}return null}function w(g,x,S,E){var A=x!==null?x.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return A!==null?null:d(g,x,""+S,E);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Zs:return S.key===A?h(g,x,S,E):null;case Nr:return S.key===A?m(g,x,S,E):null;case _n:return A=S._init,w(g,x,A(S._payload),E)}if(Oi(S)||xi(S))return A!==null?null:_(g,x,S,E,null);to(g,S)}return null}function P(g,x,S,E,A){if(typeof E=="string"&&E!==""||typeof E=="number")return g=g.get(S)||null,d(x,g,""+E,A);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Zs:return g=g.get(E.key===null?S:E.key)||null,h(x,g,E,A);case Nr:return g=g.get(E.key===null?S:E.key)||null,m(x,g,E,A);case _n:var O=E._init;return P(g,x,S,O(E._payload),A)}if(Oi(E)||xi(E))return g=g.get(S)||null,_(x,g,E,A,null);to(x,E)}return null}function b(g,x,S,E){for(var A=null,O=null,D=x,$=x=0,re=null;D!==null&&$<S.length;$++){D.index>$?(re=D,D=null):re=D.sibling;var ee=w(g,D,S[$],E);if(ee===null){D===null&&(D=re);break}e&&D&&ee.alternate===null&&t(g,D),x=a(ee,x,$),O===null?A=ee:O.sibling=ee,O=ee,D=re}if($===S.length)return n(g,D),ve&&qn(g,$),A;if(D===null){for(;$<S.length;$++)D=y(g,S[$],E),D!==null&&(x=a(D,x,$),O===null?A=D:O.sibling=D,O=D);return ve&&qn(g,$),A}for(D=i(g,D);$<S.length;$++)re=P(D,g,$,S[$],E),re!==null&&(e&&re.alternate!==null&&D.delete(re.key===null?$:re.key),x=a(re,x,$),O===null?A=re:O.sibling=re,O=re);return e&&D.forEach(function(he){return t(g,he)}),ve&&qn(g,$),A}function k(g,x,S,E){var A=xi(S);if(typeof A!="function")throw Error(z(150));if(S=A.call(S),S==null)throw Error(z(151));for(var O=A=null,D=x,$=x=0,re=null,ee=S.next();D!==null&&!ee.done;$++,ee=S.next()){D.index>$?(re=D,D=null):re=D.sibling;var he=w(g,D,ee.value,E);if(he===null){D===null&&(D=re);break}e&&D&&he.alternate===null&&t(g,D),x=a(he,x,$),O===null?A=he:O.sibling=he,O=he,D=re}if(ee.done)return n(g,D),ve&&qn(g,$),A;if(D===null){for(;!ee.done;$++,ee=S.next())ee=y(g,ee.value,E),ee!==null&&(x=a(ee,x,$),O===null?A=ee:O.sibling=ee,O=ee);return ve&&qn(g,$),A}for(D=i(g,D);!ee.done;$++,ee=S.next())ee=P(D,g,$,ee.value,E),ee!==null&&(e&&ee.alternate!==null&&D.delete(ee.key===null?$:ee.key),x=a(ee,x,$),O===null?A=ee:O.sibling=ee,O=ee);return e&&D.forEach(function(Me){return t(g,Me)}),ve&&qn(g,$),A}function N(g,x,S,E){if(typeof S=="object"&&S!==null&&S.type===Or&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Zs:e:{for(var A=S.key,O=x;O!==null;){if(O.key===A){if(A=S.type,A===Or){if(O.tag===7){n(g,O.sibling),x=o(O,S.props.children),x.return=g,g=x;break e}}else if(O.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===_n&&Vd(A)===O.type){n(g,O.sibling),x=o(O,S.props),x.ref=Pi(g,O,S),x.return=g,g=x;break e}n(g,O);break}else t(g,O);O=O.sibling}S.type===Or?(x=rr(S.props.children,g.mode,E,S.key),x.return=g,g=x):(E=So(S.type,S.key,S.props,null,g.mode,E),E.ref=Pi(g,x,S),E.return=g,g=E)}return u(g);case Nr:e:{for(O=S.key;x!==null;){if(x.key===O)if(x.tag===4&&x.stateNode.containerInfo===S.containerInfo&&x.stateNode.implementation===S.implementation){n(g,x.sibling),x=o(x,S.children||[]),x.return=g,g=x;break e}else{n(g,x);break}else t(g,x);x=x.sibling}x=Al(S,g.mode,E),x.return=g,g=x}return u(g);case _n:return O=S._init,N(g,x,O(S._payload),E)}if(Oi(S))return b(g,x,S,E);if(xi(S))return k(g,x,S,E);to(g,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,x!==null&&x.tag===6?(n(g,x.sibling),x=o(x,S),x.return=g,g=x):(n(g,x),x=Ll(S,g.mode,E),x.return=g,g=x),u(g)):n(g,x)}return N}var Xr=rm(!0),im=rm(!1),Do=zn(null),Bo=null,Br=null,wc=null;function xc(){wc=Br=Bo=null}function bc(e){var t=Do.current;ge(Do),e._currentValue=t}function yu(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function qr(e,t){Bo=e,wc=Br=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(st=!0),e.firstContext=null)}function Pt(e){var t=e._currentValue;if(wc!==e)if(e={context:e,memoizedValue:t,next:null},Br===null){if(Bo===null)throw Error(z(308));Br=e,Bo.dependencies={lanes:0,firstContext:e}}else Br=Br.next=e;return t}var Xn=null;function Sc(e){Xn===null?Xn=[e]:Xn.push(e)}function sm(e,t,n,i){var o=t.interleaved;return o===null?(n.next=n,Sc(t)):(n.next=o.next,o.next=n),t.interleaved=n,un(e,i)}function un(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var yn=!1;function kc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function om(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function on(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Nn(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,oe&2){var o=i.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),i.pending=t,un(e,n)}return o=i.interleaved,o===null?(t.next=t,Sc(i)):(t.next=o.next,o.next=t),i.interleaved=t,un(e,n)}function vo(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,uc(e,n)}}function qd(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var o=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var u={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?o=a=u:a=a.next=u,n=n.next}while(n!==null);a===null?o=a=t:a=a.next=t}else o=a=t;n={baseState:i.baseState,firstBaseUpdate:o,lastBaseUpdate:a,shared:i.shared,effects:i.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Uo(e,t,n,i){var o=e.updateQueue;yn=!1;var a=o.firstBaseUpdate,u=o.lastBaseUpdate,d=o.shared.pending;if(d!==null){o.shared.pending=null;var h=d,m=h.next;h.next=null,u===null?a=m:u.next=m,u=h;var _=e.alternate;_!==null&&(_=_.updateQueue,d=_.lastBaseUpdate,d!==u&&(d===null?_.firstBaseUpdate=m:d.next=m,_.lastBaseUpdate=h))}if(a!==null){var y=o.baseState;u=0,_=m=h=null,d=a;do{var w=d.lane,P=d.eventTime;if((i&w)===w){_!==null&&(_=_.next={eventTime:P,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var b=e,k=d;switch(w=t,P=n,k.tag){case 1:if(b=k.payload,typeof b=="function"){y=b.call(P,y,w);break e}y=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=k.payload,w=typeof b=="function"?b.call(P,y,w):b,w==null)break e;y=Se({},y,w);break e;case 2:yn=!0}}d.callback!==null&&d.lane!==0&&(e.flags|=64,w=o.effects,w===null?o.effects=[d]:w.push(d))}else P={eventTime:P,lane:w,tag:d.tag,payload:d.payload,callback:d.callback,next:null},_===null?(m=_=P,h=y):_=_.next=P,u|=w;if(d=d.next,d===null){if(d=o.shared.pending,d===null)break;w=d,d=w.next,w.next=null,o.lastBaseUpdate=w,o.shared.pending=null}}while(!0);if(_===null&&(h=y),o.baseState=h,o.firstBaseUpdate=m,o.lastBaseUpdate=_,t=o.shared.interleaved,t!==null){o=t;do u|=o.lane,o=o.next;while(o!==t)}else a===null&&(o.shared.lanes=0);ar|=u,e.lanes=u,e.memoizedState=y}}function Kd(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],o=i.callback;if(o!==null){if(i.callback=null,i=n,typeof o!="function")throw Error(z(191,o));o.call(i)}}}var ys={},Kt=zn(ys),rs=zn(ys),is=zn(ys);function er(e){if(e===ys)throw Error(z(174));return e}function Ec(e,t){switch(pe(is,t),pe(rs,e),pe(Kt,ys),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Xl(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Xl(t,e)}ge(Kt),pe(Kt,t)}function ei(){ge(Kt),ge(rs),ge(is)}function am(e){er(is.current);var t=er(Kt.current),n=Xl(t,e.type);t!==n&&(pe(rs,e),pe(Kt,n))}function Pc(e){rs.current===e&&(ge(Kt),ge(rs))}var xe=zn(0);function $o(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Pl=[];function Tc(){for(var e=0;e<Pl.length;e++)Pl[e]._workInProgressVersionPrimary=null;Pl.length=0}var _o=hn.ReactCurrentDispatcher,Tl=hn.ReactCurrentBatchConfig,or=0,be=null,Re=null,De=null,Fo=!1,Ui=!1,ss=0,Jy=0;function qe(){throw Error(z(321))}function Cc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Bt(e[n],t[n]))return!1;return!0}function jc(e,t,n,i,o,a){if(or=a,be=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,_o.current=e===null||e.memoizedState===null?e0:t0,e=n(i,o),Ui){a=0;do{if(Ui=!1,ss=0,25<=a)throw Error(z(301));a+=1,De=Re=null,t.updateQueue=null,_o.current=n0,e=n(i,o)}while(Ui)}if(_o.current=Wo,t=Re!==null&&Re.next!==null,or=0,De=Re=be=null,Fo=!1,t)throw Error(z(300));return e}function Nc(){var e=ss!==0;return ss=0,e}function Ht(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return De===null?be.memoizedState=De=e:De=De.next=e,De}function Tt(){if(Re===null){var e=be.alternate;e=e!==null?e.memoizedState:null}else e=Re.next;var t=De===null?be.memoizedState:De.next;if(t!==null)De=t,Re=e;else{if(e===null)throw Error(z(310));Re=e,e={memoizedState:Re.memoizedState,baseState:Re.baseState,baseQueue:Re.baseQueue,queue:Re.queue,next:null},De===null?be.memoizedState=De=e:De=De.next=e}return De}function os(e,t){return typeof t=="function"?t(e):t}function Cl(e){var t=Tt(),n=t.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=e;var i=Re,o=i.baseQueue,a=n.pending;if(a!==null){if(o!==null){var u=o.next;o.next=a.next,a.next=u}i.baseQueue=o=a,n.pending=null}if(o!==null){a=o.next,i=i.baseState;var d=u=null,h=null,m=a;do{var _=m.lane;if((or&_)===_)h!==null&&(h=h.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),i=m.hasEagerState?m.eagerState:e(i,m.action);else{var y={lane:_,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};h===null?(d=h=y,u=i):h=h.next=y,be.lanes|=_,ar|=_}m=m.next}while(m!==null&&m!==a);h===null?u=i:h.next=d,Bt(i,t.memoizedState)||(st=!0),t.memoizedState=i,t.baseState=u,t.baseQueue=h,n.lastRenderedState=i}if(e=n.interleaved,e!==null){o=e;do a=o.lane,be.lanes|=a,ar|=a,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function jl(e){var t=Tt(),n=t.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=e;var i=n.dispatch,o=n.pending,a=t.memoizedState;if(o!==null){n.pending=null;var u=o=o.next;do a=e(a,u.action),u=u.next;while(u!==o);Bt(a,t.memoizedState)||(st=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,i]}function lm(){}function um(e,t){var n=be,i=Tt(),o=t(),a=!Bt(i.memoizedState,o);if(a&&(i.memoizedState=o,st=!0),i=i.queue,Oc(dm.bind(null,n,i,e),[e]),i.getSnapshot!==t||a||De!==null&&De.memoizedState.tag&1){if(n.flags|=2048,as(9,hm.bind(null,n,i,o,t),void 0,null),Be===null)throw Error(z(349));or&30||cm(n,t,o)}return o}function cm(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=be.updateQueue,t===null?(t={lastEffect:null,stores:null},be.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function hm(e,t,n,i){t.value=n,t.getSnapshot=i,fm(t)&&pm(e)}function dm(e,t,n){return n(function(){fm(t)&&pm(e)})}function fm(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Bt(e,n)}catch{return!0}}function pm(e){var t=un(e,1);t!==null&&Dt(t,e,1,-1)}function Gd(e){var t=Ht();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:os,lastRenderedState:e},t.queue=e,e=e.dispatch=Xy.bind(null,be,e),[t.memoizedState,e]}function as(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},t=be.updateQueue,t===null?(t={lastEffect:null,stores:null},be.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e)),e}function mm(){return Tt().memoizedState}function yo(e,t,n,i){var o=Ht();be.flags|=e,o.memoizedState=as(1|t,n,void 0,i===void 0?null:i)}function aa(e,t,n,i){var o=Tt();i=i===void 0?null:i;var a=void 0;if(Re!==null){var u=Re.memoizedState;if(a=u.destroy,i!==null&&Cc(i,u.deps)){o.memoizedState=as(t,n,a,i);return}}be.flags|=e,o.memoizedState=as(1|t,n,a,i)}function Jd(e,t){return yo(8390656,8,e,t)}function Oc(e,t){return aa(2048,8,e,t)}function gm(e,t){return aa(4,2,e,t)}function vm(e,t){return aa(4,4,e,t)}function _m(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ym(e,t,n){return n=n!=null?n.concat([e]):null,aa(4,4,_m.bind(null,t,e),n)}function Lc(){}function wm(e,t){var n=Tt();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&Cc(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function xm(e,t){var n=Tt();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&Cc(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function bm(e,t,n){return or&21?(Bt(n,t)||(n=Tp(),be.lanes|=n,ar|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,st=!0),e.memoizedState=n)}function Qy(e,t){var n=ue;ue=n!==0&&4>n?n:4,e(!0);var i=Tl.transition;Tl.transition={};try{e(!1),t()}finally{ue=n,Tl.transition=i}}function Sm(){return Tt().memoizedState}function Yy(e,t,n){var i=Ln(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},km(e))Em(t,n);else if(n=sm(e,t,n,i),n!==null){var o=Xe();Dt(n,e,i,o),Pm(n,t,i)}}function Xy(e,t,n){var i=Ln(e),o={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(km(e))Em(t,o);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var u=t.lastRenderedState,d=a(u,n);if(o.hasEagerState=!0,o.eagerState=d,Bt(d,u)){var h=t.interleaved;h===null?(o.next=o,Sc(t)):(o.next=h.next,h.next=o),t.interleaved=o;return}}catch{}finally{}n=sm(e,t,o,i),n!==null&&(o=Xe(),Dt(n,e,i,o),Pm(n,t,i))}}function km(e){var t=e.alternate;return e===be||t!==null&&t===be}function Em(e,t){Ui=Fo=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Pm(e,t,n){if(n&4194240){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,uc(e,n)}}var Wo={readContext:Pt,useCallback:qe,useContext:qe,useEffect:qe,useImperativeHandle:qe,useInsertionEffect:qe,useLayoutEffect:qe,useMemo:qe,useReducer:qe,useRef:qe,useState:qe,useDebugValue:qe,useDeferredValue:qe,useTransition:qe,useMutableSource:qe,useSyncExternalStore:qe,useId:qe,unstable_isNewReconciler:!1},e0={readContext:Pt,useCallback:function(e,t){return Ht().memoizedState=[e,t===void 0?null:t],e},useContext:Pt,useEffect:Jd,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,yo(4194308,4,_m.bind(null,t,e),n)},useLayoutEffect:function(e,t){return yo(4194308,4,e,t)},useInsertionEffect:function(e,t){return yo(4,2,e,t)},useMemo:function(e,t){var n=Ht();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=Ht();return t=n!==void 0?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=Yy.bind(null,be,e),[i.memoizedState,e]},useRef:function(e){var t=Ht();return e={current:e},t.memoizedState=e},useState:Gd,useDebugValue:Lc,useDeferredValue:function(e){return Ht().memoizedState=e},useTransition:function(){var e=Gd(!1),t=e[0];return e=Qy.bind(null,e[1]),Ht().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=be,o=Ht();if(ve){if(n===void 0)throw Error(z(407));n=n()}else{if(n=t(),Be===null)throw Error(z(349));or&30||cm(i,t,n)}o.memoizedState=n;var a={value:n,getSnapshot:t};return o.queue=a,Jd(dm.bind(null,i,a,e),[e]),i.flags|=2048,as(9,hm.bind(null,i,a,n,t),void 0,null),n},useId:function(){var e=Ht(),t=Be.identifierPrefix;if(ve){var n=sn,i=rn;n=(i&~(1<<32-zt(i)-1)).toString(32)+n,t=":"+t+"R"+n,n=ss++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Jy++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},t0={readContext:Pt,useCallback:wm,useContext:Pt,useEffect:Oc,useImperativeHandle:ym,useInsertionEffect:gm,useLayoutEffect:vm,useMemo:xm,useReducer:Cl,useRef:mm,useState:function(){return Cl(os)},useDebugValue:Lc,useDeferredValue:function(e){var t=Tt();return bm(t,Re.memoizedState,e)},useTransition:function(){var e=Cl(os)[0],t=Tt().memoizedState;return[e,t]},useMutableSource:lm,useSyncExternalStore:um,useId:Sm,unstable_isNewReconciler:!1},n0={readContext:Pt,useCallback:wm,useContext:Pt,useEffect:Oc,useImperativeHandle:ym,useInsertionEffect:gm,useLayoutEffect:vm,useMemo:xm,useReducer:jl,useRef:mm,useState:function(){return jl(os)},useDebugValue:Lc,useDeferredValue:function(e){var t=Tt();return Re===null?t.memoizedState=e:bm(t,Re.memoizedState,e)},useTransition:function(){var e=jl(os)[0],t=Tt().memoizedState;return[e,t]},useMutableSource:lm,useSyncExternalStore:um,useId:Sm,unstable_isNewReconciler:!1};function Lt(e,t){if(e&&e.defaultProps){t=Se({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function wu(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:Se({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var la={isMounted:function(e){return(e=e._reactInternals)?cr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Xe(),o=Ln(e),a=on(i,o);a.payload=t,n!=null&&(a.callback=n),t=Nn(e,a,o),t!==null&&(Dt(t,e,o,i),vo(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Xe(),o=Ln(e),a=on(i,o);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=Nn(e,a,o),t!==null&&(Dt(t,e,o,i),vo(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Xe(),i=Ln(e),o=on(n,i);o.tag=2,t!=null&&(o.callback=t),t=Nn(e,o,i),t!==null&&(Dt(t,e,i,n),vo(t,e,i))}};function Qd(e,t,n,i,o,a,u){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,a,u):t.prototype&&t.prototype.isPureReactComponent?!Xi(n,i)||!Xi(o,a):!0}function Tm(e,t,n){var i=!1,o=In,a=t.contextType;return typeof a=="object"&&a!==null?a=Pt(a):(o=at(t)?ir:Je.current,i=t.contextTypes,a=(i=i!=null)?Qr(e,o):In),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=la,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=a),t}function Yd(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&la.enqueueReplaceState(t,t.state,null)}function xu(e,t,n,i){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},kc(e);var a=t.contextType;typeof a=="object"&&a!==null?o.context=Pt(a):(a=at(t)?ir:Je.current,o.context=Qr(e,a)),o.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(wu(e,t,a,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&la.enqueueReplaceState(o,o.state,null),Uo(e,n,o,i),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function ti(e,t){try{var n="",i=t;do n+=N_(i),i=i.return;while(i);var o=n}catch(a){o=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:o,digest:null}}function Nl(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function bu(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var r0=typeof WeakMap=="function"?WeakMap:Map;function Cm(e,t,n){n=on(-1,n),n.tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Ho||(Ho=!0,Lu=i),bu(e,t)},n}function jm(e,t,n){n=on(-1,n),n.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var o=t.value;n.payload=function(){return i(o)},n.callback=function(){bu(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){bu(e,t),typeof i!="function"&&(On===null?On=new Set([this]):On.add(this));var u=t.stack;this.componentDidCatch(t.value,{componentStack:u!==null?u:""})}),n}function Xd(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new r0;var o=new Set;i.set(t,o)}else o=i.get(t),o===void 0&&(o=new Set,i.set(t,o));o.has(n)||(o.add(n),e=v0.bind(null,e,t,n),t.then(e,e))}function ef(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function tf(e,t,n,i,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=on(-1,1),t.tag=2,Nn(n,t,1))),n.lanes|=1),e)}var i0=hn.ReactCurrentOwner,st=!1;function Ye(e,t,n,i){t.child=e===null?im(t,null,n,i):Xr(t,e.child,n,i)}function nf(e,t,n,i,o){n=n.render;var a=t.ref;return qr(t,o),i=jc(e,t,n,i,a,o),n=Nc(),e!==null&&!st?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,cn(e,t,o)):(ve&&n&&vc(t),t.flags|=1,Ye(e,t,i,o),t.child)}function rf(e,t,n,i,o){if(e===null){var a=n.type;return typeof a=="function"&&!Uc(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,Nm(e,t,a,i,o)):(e=So(n.type,null,i,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&o)){var u=a.memoizedProps;if(n=n.compare,n=n!==null?n:Xi,n(u,i)&&e.ref===t.ref)return cn(e,t,o)}return t.flags|=1,e=An(a,i),e.ref=t.ref,e.return=t,t.child=e}function Nm(e,t,n,i,o){if(e!==null){var a=e.memoizedProps;if(Xi(a,i)&&e.ref===t.ref)if(st=!1,t.pendingProps=i=a,(e.lanes&o)!==0)e.flags&131072&&(st=!0);else return t.lanes=e.lanes,cn(e,t,o)}return Su(e,t,n,i,o)}function Om(e,t,n){var i=t.pendingProps,o=i.children,a=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},pe($r,ct),ct|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,pe($r,ct),ct|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=a!==null?a.baseLanes:n,pe($r,ct),ct|=i}else a!==null?(i=a.baseLanes|n,t.memoizedState=null):i=n,pe($r,ct),ct|=i;return Ye(e,t,o,n),t.child}function Lm(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Su(e,t,n,i,o){var a=at(n)?ir:Je.current;return a=Qr(t,a),qr(t,o),n=jc(e,t,n,i,a,o),i=Nc(),e!==null&&!st?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,cn(e,t,o)):(ve&&i&&vc(t),t.flags|=1,Ye(e,t,n,o),t.child)}function sf(e,t,n,i,o){if(at(n)){var a=!0;Io(t)}else a=!1;if(qr(t,o),t.stateNode===null)wo(e,t),Tm(t,n,i),xu(t,n,i,o),i=!0;else if(e===null){var u=t.stateNode,d=t.memoizedProps;u.props=d;var h=u.context,m=n.contextType;typeof m=="object"&&m!==null?m=Pt(m):(m=at(n)?ir:Je.current,m=Qr(t,m));var _=n.getDerivedStateFromProps,y=typeof _=="function"||typeof u.getSnapshotBeforeUpdate=="function";y||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(d!==i||h!==m)&&Yd(t,u,i,m),yn=!1;var w=t.memoizedState;u.state=w,Uo(t,i,u,o),h=t.memoizedState,d!==i||w!==h||ot.current||yn?(typeof _=="function"&&(wu(t,n,_,i),h=t.memoizedState),(d=yn||Qd(t,n,d,i,w,h,m))?(y||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=h),u.props=i,u.state=h,u.context=m,i=d):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{u=t.stateNode,om(e,t),d=t.memoizedProps,m=t.type===t.elementType?d:Lt(t.type,d),u.props=m,y=t.pendingProps,w=u.context,h=n.contextType,typeof h=="object"&&h!==null?h=Pt(h):(h=at(n)?ir:Je.current,h=Qr(t,h));var P=n.getDerivedStateFromProps;(_=typeof P=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(d!==y||w!==h)&&Yd(t,u,i,h),yn=!1,w=t.memoizedState,u.state=w,Uo(t,i,u,o);var b=t.memoizedState;d!==y||w!==b||ot.current||yn?(typeof P=="function"&&(wu(t,n,P,i),b=t.memoizedState),(m=yn||Qd(t,n,m,i,w,b,h)||!1)?(_||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(i,b,h),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(i,b,h)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||d===e.memoizedProps&&w===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&w===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=b),u.props=i,u.state=b,u.context=h,i=m):(typeof u.componentDidUpdate!="function"||d===e.memoizedProps&&w===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&w===e.memoizedState||(t.flags|=1024),i=!1)}return ku(e,t,n,i,a,o)}function ku(e,t,n,i,o,a){Lm(e,t);var u=(t.flags&128)!==0;if(!i&&!u)return o&&Wd(t,n,!1),cn(e,t,a);i=t.stateNode,i0.current=t;var d=u&&typeof n.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&u?(t.child=Xr(t,e.child,null,a),t.child=Xr(t,null,d,a)):Ye(e,t,d,a),t.memoizedState=i.state,o&&Wd(t,n,!0),t.child}function Am(e){var t=e.stateNode;t.pendingContext?Fd(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Fd(e,t.context,!1),Ec(e,t.containerInfo)}function of(e,t,n,i,o){return Yr(),yc(o),t.flags|=256,Ye(e,t,n,i),t.child}var Eu={dehydrated:null,treeContext:null,retryLane:0};function Pu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Rm(e,t,n){var i=t.pendingProps,o=xe.current,a=!1,u=(t.flags&128)!==0,d;if((d=u)||(d=e!==null&&e.memoizedState===null?!1:(o&2)!==0),d?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),pe(xe,o&1),e===null)return _u(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(u=i.children,e=i.fallback,a?(i=t.mode,a=t.child,u={mode:"hidden",children:u},!(i&1)&&a!==null?(a.childLanes=0,a.pendingProps=u):a=ha(u,i,0,null),e=rr(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Pu(n),t.memoizedState=Eu,e):Ac(t,u));if(o=e.memoizedState,o!==null&&(d=o.dehydrated,d!==null))return s0(e,t,u,i,d,o,n);if(a){a=i.fallback,u=t.mode,o=e.child,d=o.sibling;var h={mode:"hidden",children:i.children};return!(u&1)&&t.child!==o?(i=t.child,i.childLanes=0,i.pendingProps=h,t.deletions=null):(i=An(o,h),i.subtreeFlags=o.subtreeFlags&14680064),d!==null?a=An(d,a):(a=rr(a,u,n,null),a.flags|=2),a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,u=e.child.memoizedState,u=u===null?Pu(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},a.memoizedState=u,a.childLanes=e.childLanes&~n,t.memoizedState=Eu,i}return a=e.child,e=a.sibling,i=An(a,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=n),i.return=t,i.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Ac(e,t){return t=ha({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function no(e,t,n,i){return i!==null&&yc(i),Xr(t,e.child,null,n),e=Ac(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function s0(e,t,n,i,o,a,u){if(n)return t.flags&256?(t.flags&=-257,i=Nl(Error(z(422))),no(e,t,u,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=i.fallback,o=t.mode,i=ha({mode:"visible",children:i.children},o,0,null),a=rr(a,o,u,null),a.flags|=2,i.return=t,a.return=t,i.sibling=a,t.child=i,t.mode&1&&Xr(t,e.child,null,u),t.child.memoizedState=Pu(u),t.memoizedState=Eu,a);if(!(t.mode&1))return no(e,t,u,null);if(o.data==="$!"){if(i=o.nextSibling&&o.nextSibling.dataset,i)var d=i.dgst;return i=d,a=Error(z(419)),i=Nl(a,i,void 0),no(e,t,u,i)}if(d=(u&e.childLanes)!==0,st||d){if(i=Be,i!==null){switch(u&-u){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(i.suspendedLanes|u)?0:o,o!==0&&o!==a.retryLane&&(a.retryLane=o,un(e,o),Dt(i,e,o,-1))}return Bc(),i=Nl(Error(z(421))),no(e,t,u,i)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=_0.bind(null,e),o._reactRetry=t,null):(e=a.treeContext,ft=jn(o.nextSibling),pt=t,ve=!0,Mt=null,e!==null&&(bt[St++]=rn,bt[St++]=sn,bt[St++]=sr,rn=e.id,sn=e.overflow,sr=t),t=Ac(t,i.children),t.flags|=4096,t)}function af(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),yu(e.return,t,n)}function Ol(e,t,n,i,o){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=n,a.tailMode=o)}function Im(e,t,n){var i=t.pendingProps,o=i.revealOrder,a=i.tail;if(Ye(e,t,i.children,n),i=xe.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&af(e,n,t);else if(e.tag===19)af(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(pe(xe,i),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&$o(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Ol(t,!1,o,n,a);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&$o(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Ol(t,!0,n,null,a);break;case"together":Ol(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function wo(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function cn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ar|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(z(153));if(t.child!==null){for(e=t.child,n=An(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=An(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function o0(e,t,n){switch(t.tag){case 3:Am(t),Yr();break;case 5:am(t);break;case 1:at(t.type)&&Io(t);break;case 4:Ec(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,o=t.memoizedProps.value;pe(Do,i._currentValue),i._currentValue=o;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(pe(xe,xe.current&1),t.flags|=128,null):n&t.child.childLanes?Rm(e,t,n):(pe(xe,xe.current&1),e=cn(e,t,n),e!==null?e.sibling:null);pe(xe,xe.current&1);break;case 19:if(i=(n&t.childLanes)!==0,e.flags&128){if(i)return Im(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),pe(xe,xe.current),i)break;return null;case 22:case 23:return t.lanes=0,Om(e,t,n)}return cn(e,t,n)}var Mm,Tu,zm,Dm;Mm=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Tu=function(){};zm=function(e,t,n,i){var o=e.memoizedProps;if(o!==i){e=t.stateNode,er(Kt.current);var a=null;switch(n){case"input":o=Gl(e,o),i=Gl(e,i),a=[];break;case"select":o=Se({},o,{value:void 0}),i=Se({},i,{value:void 0}),a=[];break;case"textarea":o=Yl(e,o),i=Yl(e,i),a=[];break;default:typeof o.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=Ao)}eu(n,i);var u;n=null;for(m in o)if(!i.hasOwnProperty(m)&&o.hasOwnProperty(m)&&o[m]!=null)if(m==="style"){var d=o[m];for(u in d)d.hasOwnProperty(u)&&(n||(n={}),n[u]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(Vi.hasOwnProperty(m)?a||(a=[]):(a=a||[]).push(m,null));for(m in i){var h=i[m];if(d=o!=null?o[m]:void 0,i.hasOwnProperty(m)&&h!==d&&(h!=null||d!=null))if(m==="style")if(d){for(u in d)!d.hasOwnProperty(u)||h&&h.hasOwnProperty(u)||(n||(n={}),n[u]="");for(u in h)h.hasOwnProperty(u)&&d[u]!==h[u]&&(n||(n={}),n[u]=h[u])}else n||(a||(a=[]),a.push(m,n)),n=h;else m==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,d=d?d.__html:void 0,h!=null&&d!==h&&(a=a||[]).push(m,h)):m==="children"?typeof h!="string"&&typeof h!="number"||(a=a||[]).push(m,""+h):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(Vi.hasOwnProperty(m)?(h!=null&&m==="onScroll"&&me("scroll",e),a||d===h||(a=[])):(a=a||[]).push(m,h))}n&&(a=a||[]).push("style",n);var m=a;(t.updateQueue=m)&&(t.flags|=4)}};Dm=function(e,t,n,i){n!==i&&(t.flags|=4)};function Ti(e,t){if(!ve)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Ke(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags&14680064,i|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags,i|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function a0(e,t,n){var i=t.pendingProps;switch(_c(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ke(t),null;case 1:return at(t.type)&&Ro(),Ke(t),null;case 3:return i=t.stateNode,ei(),ge(ot),ge(Je),Tc(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(eo(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Mt!==null&&(Iu(Mt),Mt=null))),Tu(e,t),Ke(t),null;case 5:Pc(t);var o=er(is.current);if(n=t.type,e!==null&&t.stateNode!=null)zm(e,t,n,i,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(z(166));return Ke(t),null}if(e=er(Kt.current),eo(t)){i=t.stateNode,n=t.type;var a=t.memoizedProps;switch(i[Vt]=t,i[ns]=a,e=(t.mode&1)!==0,n){case"dialog":me("cancel",i),me("close",i);break;case"iframe":case"object":case"embed":me("load",i);break;case"video":case"audio":for(o=0;o<Ai.length;o++)me(Ai[o],i);break;case"source":me("error",i);break;case"img":case"image":case"link":me("error",i),me("load",i);break;case"details":me("toggle",i);break;case"input":md(i,a),me("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!a.multiple},me("invalid",i);break;case"textarea":vd(i,a),me("invalid",i)}eu(n,a),o=null;for(var u in a)if(a.hasOwnProperty(u)){var d=a[u];u==="children"?typeof d=="string"?i.textContent!==d&&(a.suppressHydrationWarning!==!0&&Xs(i.textContent,d,e),o=["children",d]):typeof d=="number"&&i.textContent!==""+d&&(a.suppressHydrationWarning!==!0&&Xs(i.textContent,d,e),o=["children",""+d]):Vi.hasOwnProperty(u)&&d!=null&&u==="onScroll"&&me("scroll",i)}switch(n){case"input":Hs(i),gd(i,a,!0);break;case"textarea":Hs(i),_d(i);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(i.onclick=Ao)}i=o,t.updateQueue=i,i!==null&&(t.flags|=4)}else{u=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=dp(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=u.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=u.createElement(n,{is:i.is}):(e=u.createElement(n),n==="select"&&(u=e,i.multiple?u.multiple=!0:i.size&&(u.size=i.size))):e=u.createElementNS(e,n),e[Vt]=t,e[ns]=i,Mm(e,t,!1,!1),t.stateNode=e;e:{switch(u=tu(n,i),n){case"dialog":me("cancel",e),me("close",e),o=i;break;case"iframe":case"object":case"embed":me("load",e),o=i;break;case"video":case"audio":for(o=0;o<Ai.length;o++)me(Ai[o],e);o=i;break;case"source":me("error",e),o=i;break;case"img":case"image":case"link":me("error",e),me("load",e),o=i;break;case"details":me("toggle",e),o=i;break;case"input":md(e,i),o=Gl(e,i),me("invalid",e);break;case"option":o=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},o=Se({},i,{value:void 0}),me("invalid",e);break;case"textarea":vd(e,i),o=Yl(e,i),me("invalid",e);break;default:o=i}eu(n,o),d=o;for(a in d)if(d.hasOwnProperty(a)){var h=d[a];a==="style"?mp(e,h):a==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&fp(e,h)):a==="children"?typeof h=="string"?(n!=="textarea"||h!=="")&&qi(e,h):typeof h=="number"&&qi(e,""+h):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Vi.hasOwnProperty(a)?h!=null&&a==="onScroll"&&me("scroll",e):h!=null&&rc(e,a,h,u))}switch(n){case"input":Hs(e),gd(e,i,!1);break;case"textarea":Hs(e),_d(e);break;case"option":i.value!=null&&e.setAttribute("value",""+Rn(i.value));break;case"select":e.multiple=!!i.multiple,a=i.value,a!=null?Wr(e,!!i.multiple,a,!1):i.defaultValue!=null&&Wr(e,!!i.multiple,i.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=Ao)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ke(t),null;case 6:if(e&&t.stateNode!=null)Dm(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(z(166));if(n=er(is.current),er(Kt.current),eo(t)){if(i=t.stateNode,n=t.memoizedProps,i[Vt]=t,(a=i.nodeValue!==n)&&(e=pt,e!==null))switch(e.tag){case 3:Xs(i.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Xs(i.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Vt]=t,t.stateNode=i}return Ke(t),null;case 13:if(ge(xe),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ve&&ft!==null&&t.mode&1&&!(t.flags&128))nm(),Yr(),t.flags|=98560,a=!1;else if(a=eo(t),i!==null&&i.dehydrated!==null){if(e===null){if(!a)throw Error(z(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(z(317));a[Vt]=t}else Yr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ke(t),a=!1}else Mt!==null&&(Iu(Mt),Mt=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||xe.current&1?Ie===0&&(Ie=3):Bc())),t.updateQueue!==null&&(t.flags|=4),Ke(t),null);case 4:return ei(),Tu(e,t),e===null&&es(t.stateNode.containerInfo),Ke(t),null;case 10:return bc(t.type._context),Ke(t),null;case 17:return at(t.type)&&Ro(),Ke(t),null;case 19:if(ge(xe),a=t.memoizedState,a===null)return Ke(t),null;if(i=(t.flags&128)!==0,u=a.rendering,u===null)if(i)Ti(a,!1);else{if(Ie!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(u=$o(e),u!==null){for(t.flags|=128,Ti(a,!1),i=u.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;n!==null;)a=n,e=i,a.flags&=14680066,u=a.alternate,u===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,e=u.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return pe(xe,xe.current&1|2),t.child}e=e.sibling}a.tail!==null&&Te()>ni&&(t.flags|=128,i=!0,Ti(a,!1),t.lanes=4194304)}else{if(!i)if(e=$o(u),e!==null){if(t.flags|=128,i=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ti(a,!0),a.tail===null&&a.tailMode==="hidden"&&!u.alternate&&!ve)return Ke(t),null}else 2*Te()-a.renderingStartTime>ni&&n!==1073741824&&(t.flags|=128,i=!0,Ti(a,!1),t.lanes=4194304);a.isBackwards?(u.sibling=t.child,t.child=u):(n=a.last,n!==null?n.sibling=u:t.child=u,a.last=u)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Te(),t.sibling=null,n=xe.current,pe(xe,i?n&1|2:n&1),t):(Ke(t),null);case 22:case 23:return Dc(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?ct&1073741824&&(Ke(t),t.subtreeFlags&6&&(t.flags|=8192)):Ke(t),null;case 24:return null;case 25:return null}throw Error(z(156,t.tag))}function l0(e,t){switch(_c(t),t.tag){case 1:return at(t.type)&&Ro(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ei(),ge(ot),ge(Je),Tc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Pc(t),null;case 13:if(ge(xe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(z(340));Yr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ge(xe),null;case 4:return ei(),null;case 10:return bc(t.type._context),null;case 22:case 23:return Dc(),null;case 24:return null;default:return null}}var ro=!1,Ge=!1,u0=typeof WeakSet=="function"?WeakSet:Set,F=null;function Ur(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Ee(e,t,i)}else n.current=null}function Cu(e,t,n){try{n()}catch(i){Ee(e,t,i)}}var lf=!1;function c0(e,t){if(hu=No,e=Wp(),gc(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var o=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var u=0,d=-1,h=-1,m=0,_=0,y=e,w=null;t:for(;;){for(var P;y!==n||o!==0&&y.nodeType!==3||(d=u+o),y!==a||i!==0&&y.nodeType!==3||(h=u+i),y.nodeType===3&&(u+=y.nodeValue.length),(P=y.firstChild)!==null;)w=y,y=P;for(;;){if(y===e)break t;if(w===n&&++m===o&&(d=u),w===a&&++_===i&&(h=u),(P=y.nextSibling)!==null)break;y=w,w=y.parentNode}y=P}n=d===-1||h===-1?null:{start:d,end:h}}else n=null}n=n||{start:0,end:0}}else n=null;for(du={focusedElem:e,selectionRange:n},No=!1,F=t;F!==null;)if(t=F,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,F=e;else for(;F!==null;){t=F;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var k=b.memoizedProps,N=b.memoizedState,g=t.stateNode,x=g.getSnapshotBeforeUpdate(t.elementType===t.type?k:Lt(t.type,k),N);g.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var S=t.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(E){Ee(t,t.return,E)}if(e=t.sibling,e!==null){e.return=t.return,F=e;break}F=t.return}return b=lf,lf=!1,b}function $i(e,t,n){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var o=i=i.next;do{if((o.tag&e)===e){var a=o.destroy;o.destroy=void 0,a!==void 0&&Cu(t,n,a)}o=o.next}while(o!==i)}}function ua(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function ju(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Bm(e){var t=e.alternate;t!==null&&(e.alternate=null,Bm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Vt],delete t[ns],delete t[mu],delete t[Vy],delete t[qy])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Um(e){return e.tag===5||e.tag===3||e.tag===4}function uf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Um(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Nu(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ao));else if(i!==4&&(e=e.child,e!==null))for(Nu(e,t,n),e=e.sibling;e!==null;)Nu(e,t,n),e=e.sibling}function Ou(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(Ou(e,t,n),e=e.sibling;e!==null;)Ou(e,t,n),e=e.sibling}var Ze=null,Rt=!1;function vn(e,t,n){for(n=n.child;n!==null;)$m(e,t,n),n=n.sibling}function $m(e,t,n){if(qt&&typeof qt.onCommitFiberUnmount=="function")try{qt.onCommitFiberUnmount(ta,n)}catch{}switch(n.tag){case 5:Ge||Ur(n,t);case 6:var i=Ze,o=Rt;Ze=null,vn(e,t,n),Ze=i,Rt=o,Ze!==null&&(Rt?(e=Ze,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ze.removeChild(n.stateNode));break;case 18:Ze!==null&&(Rt?(e=Ze,n=n.stateNode,e.nodeType===8?kl(e.parentNode,n):e.nodeType===1&&kl(e,n),Qi(e)):kl(Ze,n.stateNode));break;case 4:i=Ze,o=Rt,Ze=n.stateNode.containerInfo,Rt=!0,vn(e,t,n),Ze=i,Rt=o;break;case 0:case 11:case 14:case 15:if(!Ge&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){o=i=i.next;do{var a=o,u=a.destroy;a=a.tag,u!==void 0&&(a&2||a&4)&&Cu(n,t,u),o=o.next}while(o!==i)}vn(e,t,n);break;case 1:if(!Ge&&(Ur(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(d){Ee(n,t,d)}vn(e,t,n);break;case 21:vn(e,t,n);break;case 22:n.mode&1?(Ge=(i=Ge)||n.memoizedState!==null,vn(e,t,n),Ge=i):vn(e,t,n);break;default:vn(e,t,n)}}function cf(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new u0),t.forEach(function(i){var o=y0.bind(null,e,i);n.has(i)||(n.add(i),i.then(o,o))})}}function Nt(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var o=n[i];try{var a=e,u=t,d=u;e:for(;d!==null;){switch(d.tag){case 5:Ze=d.stateNode,Rt=!1;break e;case 3:Ze=d.stateNode.containerInfo,Rt=!0;break e;case 4:Ze=d.stateNode.containerInfo,Rt=!0;break e}d=d.return}if(Ze===null)throw Error(z(160));$m(a,u,o),Ze=null,Rt=!1;var h=o.alternate;h!==null&&(h.return=null),o.return=null}catch(m){Ee(o,t,m)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Fm(t,e),t=t.sibling}function Fm(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Nt(t,e),Zt(e),i&4){try{$i(3,e,e.return),ua(3,e)}catch(k){Ee(e,e.return,k)}try{$i(5,e,e.return)}catch(k){Ee(e,e.return,k)}}break;case 1:Nt(t,e),Zt(e),i&512&&n!==null&&Ur(n,n.return);break;case 5:if(Nt(t,e),Zt(e),i&512&&n!==null&&Ur(n,n.return),e.flags&32){var o=e.stateNode;try{qi(o,"")}catch(k){Ee(e,e.return,k)}}if(i&4&&(o=e.stateNode,o!=null)){var a=e.memoizedProps,u=n!==null?n.memoizedProps:a,d=e.type,h=e.updateQueue;if(e.updateQueue=null,h!==null)try{d==="input"&&a.type==="radio"&&a.name!=null&&cp(o,a),tu(d,u);var m=tu(d,a);for(u=0;u<h.length;u+=2){var _=h[u],y=h[u+1];_==="style"?mp(o,y):_==="dangerouslySetInnerHTML"?fp(o,y):_==="children"?qi(o,y):rc(o,_,y,m)}switch(d){case"input":Jl(o,a);break;case"textarea":hp(o,a);break;case"select":var w=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!a.multiple;var P=a.value;P!=null?Wr(o,!!a.multiple,P,!1):w!==!!a.multiple&&(a.defaultValue!=null?Wr(o,!!a.multiple,a.defaultValue,!0):Wr(o,!!a.multiple,a.multiple?[]:"",!1))}o[ns]=a}catch(k){Ee(e,e.return,k)}}break;case 6:if(Nt(t,e),Zt(e),i&4){if(e.stateNode===null)throw Error(z(162));o=e.stateNode,a=e.memoizedProps;try{o.nodeValue=a}catch(k){Ee(e,e.return,k)}}break;case 3:if(Nt(t,e),Zt(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Qi(t.containerInfo)}catch(k){Ee(e,e.return,k)}break;case 4:Nt(t,e),Zt(e);break;case 13:Nt(t,e),Zt(e),o=e.child,o.flags&8192&&(a=o.memoizedState!==null,o.stateNode.isHidden=a,!a||o.alternate!==null&&o.alternate.memoizedState!==null||(Mc=Te())),i&4&&cf(e);break;case 22:if(_=n!==null&&n.memoizedState!==null,e.mode&1?(Ge=(m=Ge)||_,Nt(t,e),Ge=m):Nt(t,e),Zt(e),i&8192){if(m=e.memoizedState!==null,(e.stateNode.isHidden=m)&&!_&&e.mode&1)for(F=e,_=e.child;_!==null;){for(y=F=_;F!==null;){switch(w=F,P=w.child,w.tag){case 0:case 11:case 14:case 15:$i(4,w,w.return);break;case 1:Ur(w,w.return);var b=w.stateNode;if(typeof b.componentWillUnmount=="function"){i=w,n=w.return;try{t=i,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(k){Ee(i,n,k)}}break;case 5:Ur(w,w.return);break;case 22:if(w.memoizedState!==null){df(y);continue}}P!==null?(P.return=w,F=P):df(y)}_=_.sibling}e:for(_=null,y=e;;){if(y.tag===5){if(_===null){_=y;try{o=y.stateNode,m?(a=o.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(d=y.stateNode,h=y.memoizedProps.style,u=h!=null&&h.hasOwnProperty("display")?h.display:null,d.style.display=pp("display",u))}catch(k){Ee(e,e.return,k)}}}else if(y.tag===6){if(_===null)try{y.stateNode.nodeValue=m?"":y.memoizedProps}catch(k){Ee(e,e.return,k)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===e)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===e)break e;for(;y.sibling===null;){if(y.return===null||y.return===e)break e;_===y&&(_=null),y=y.return}_===y&&(_=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:Nt(t,e),Zt(e),i&4&&cf(e);break;case 21:break;default:Nt(t,e),Zt(e)}}function Zt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Um(n)){var i=n;break e}n=n.return}throw Error(z(160))}switch(i.tag){case 5:var o=i.stateNode;i.flags&32&&(qi(o,""),i.flags&=-33);var a=uf(e);Ou(e,a,o);break;case 3:case 4:var u=i.stateNode.containerInfo,d=uf(e);Nu(e,d,u);break;default:throw Error(z(161))}}catch(h){Ee(e,e.return,h)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function h0(e,t,n){F=e,Wm(e)}function Wm(e,t,n){for(var i=(e.mode&1)!==0;F!==null;){var o=F,a=o.child;if(o.tag===22&&i){var u=o.memoizedState!==null||ro;if(!u){var d=o.alternate,h=d!==null&&d.memoizedState!==null||Ge;d=ro;var m=Ge;if(ro=u,(Ge=h)&&!m)for(F=o;F!==null;)u=F,h=u.child,u.tag===22&&u.memoizedState!==null?ff(o):h!==null?(h.return=u,F=h):ff(o);for(;a!==null;)F=a,Wm(a),a=a.sibling;F=o,ro=d,Ge=m}hf(e)}else o.subtreeFlags&8772&&a!==null?(a.return=o,F=a):hf(e)}}function hf(e){for(;F!==null;){var t=F;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ge||ua(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!Ge)if(n===null)i.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:Lt(t.type,n.memoizedProps);i.componentDidUpdate(o,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&Kd(t,a,i);break;case 3:var u=t.updateQueue;if(u!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Kd(t,u,n)}break;case 5:var d=t.stateNode;if(n===null&&t.flags&4){n=d;var h=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&n.focus();break;case"img":h.src&&(n.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var m=t.alternate;if(m!==null){var _=m.memoizedState;if(_!==null){var y=_.dehydrated;y!==null&&Qi(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}Ge||t.flags&512&&ju(t)}catch(w){Ee(t,t.return,w)}}if(t===e){F=null;break}if(n=t.sibling,n!==null){n.return=t.return,F=n;break}F=t.return}}function df(e){for(;F!==null;){var t=F;if(t===e){F=null;break}var n=t.sibling;if(n!==null){n.return=t.return,F=n;break}F=t.return}}function ff(e){for(;F!==null;){var t=F;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ua(4,t)}catch(h){Ee(t,n,h)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var o=t.return;try{i.componentDidMount()}catch(h){Ee(t,o,h)}}var a=t.return;try{ju(t)}catch(h){Ee(t,a,h)}break;case 5:var u=t.return;try{ju(t)}catch(h){Ee(t,u,h)}}}catch(h){Ee(t,t.return,h)}if(t===e){F=null;break}var d=t.sibling;if(d!==null){d.return=t.return,F=d;break}F=t.return}}var d0=Math.ceil,Zo=hn.ReactCurrentDispatcher,Rc=hn.ReactCurrentOwner,Et=hn.ReactCurrentBatchConfig,oe=0,Be=null,Oe=null,He=0,ct=0,$r=zn(0),Ie=0,ls=null,ar=0,ca=0,Ic=0,Fi=null,it=null,Mc=0,ni=1/0,en=null,Ho=!1,Lu=null,On=null,io=!1,En=null,Vo=0,Wi=0,Au=null,xo=-1,bo=0;function Xe(){return oe&6?Te():xo!==-1?xo:xo=Te()}function Ln(e){return e.mode&1?oe&2&&He!==0?He&-He:Gy.transition!==null?(bo===0&&(bo=Tp()),bo):(e=ue,e!==0||(e=window.event,e=e===void 0?16:Rp(e.type)),e):1}function Dt(e,t,n,i){if(50<Wi)throw Wi=0,Au=null,Error(z(185));gs(e,n,i),(!(oe&2)||e!==Be)&&(e===Be&&(!(oe&2)&&(ca|=n),Ie===4&&bn(e,He)),lt(e,i),n===1&&oe===0&&!(t.mode&1)&&(ni=Te()+500,oa&&Dn()))}function lt(e,t){var n=e.callbackNode;G_(e,t);var i=jo(e,e===Be?He:0);if(i===0)n!==null&&xd(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(n!=null&&xd(n),t===1)e.tag===0?Ky(pf.bind(null,e)):Xp(pf.bind(null,e)),Zy(function(){!(oe&6)&&Dn()}),n=null;else{switch(Cp(i)){case 1:n=lc;break;case 4:n=Ep;break;case 16:n=Co;break;case 536870912:n=Pp;break;default:n=Co}n=Qm(n,Zm.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Zm(e,t){if(xo=-1,bo=0,oe&6)throw Error(z(327));var n=e.callbackNode;if(Kr()&&e.callbackNode!==n)return null;var i=jo(e,e===Be?He:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=qo(e,i);else{t=i;var o=oe;oe|=2;var a=Vm();(Be!==e||He!==t)&&(en=null,ni=Te()+500,nr(e,t));do try{m0();break}catch(d){Hm(e,d)}while(!0);xc(),Zo.current=a,oe=o,Oe!==null?t=0:(Be=null,He=0,t=Ie)}if(t!==0){if(t===2&&(o=ou(e),o!==0&&(i=o,t=Ru(e,o))),t===1)throw n=ls,nr(e,0),bn(e,i),lt(e,Te()),n;if(t===6)bn(e,i);else{if(o=e.current.alternate,!(i&30)&&!f0(o)&&(t=qo(e,i),t===2&&(a=ou(e),a!==0&&(i=a,t=Ru(e,a))),t===1))throw n=ls,nr(e,0),bn(e,i),lt(e,Te()),n;switch(e.finishedWork=o,e.finishedLanes=i,t){case 0:case 1:throw Error(z(345));case 2:Kn(e,it,en);break;case 3:if(bn(e,i),(i&130023424)===i&&(t=Mc+500-Te(),10<t)){if(jo(e,0)!==0)break;if(o=e.suspendedLanes,(o&i)!==i){Xe(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=pu(Kn.bind(null,e,it,en),t);break}Kn(e,it,en);break;case 4:if(bn(e,i),(i&4194240)===i)break;for(t=e.eventTimes,o=-1;0<i;){var u=31-zt(i);a=1<<u,u=t[u],u>o&&(o=u),i&=~a}if(i=o,i=Te()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*d0(i/1960))-i,10<i){e.timeoutHandle=pu(Kn.bind(null,e,it,en),i);break}Kn(e,it,en);break;case 5:Kn(e,it,en);break;default:throw Error(z(329))}}}return lt(e,Te()),e.callbackNode===n?Zm.bind(null,e):null}function Ru(e,t){var n=Fi;return e.current.memoizedState.isDehydrated&&(nr(e,t).flags|=256),e=qo(e,t),e!==2&&(t=it,it=n,t!==null&&Iu(t)),e}function Iu(e){it===null?it=e:it.push.apply(it,e)}function f0(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var o=n[i],a=o.getSnapshot;o=o.value;try{if(!Bt(a(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function bn(e,t){for(t&=~Ic,t&=~ca,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-zt(t),i=1<<n;e[n]=-1,t&=~i}}function pf(e){if(oe&6)throw Error(z(327));Kr();var t=jo(e,0);if(!(t&1))return lt(e,Te()),null;var n=qo(e,t);if(e.tag!==0&&n===2){var i=ou(e);i!==0&&(t=i,n=Ru(e,i))}if(n===1)throw n=ls,nr(e,0),bn(e,t),lt(e,Te()),n;if(n===6)throw Error(z(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Kn(e,it,en),lt(e,Te()),null}function zc(e,t){var n=oe;oe|=1;try{return e(t)}finally{oe=n,oe===0&&(ni=Te()+500,oa&&Dn())}}function lr(e){En!==null&&En.tag===0&&!(oe&6)&&Kr();var t=oe;oe|=1;var n=Et.transition,i=ue;try{if(Et.transition=null,ue=1,e)return e()}finally{ue=i,Et.transition=n,oe=t,!(oe&6)&&Dn()}}function Dc(){ct=$r.current,ge($r)}function nr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Wy(n)),Oe!==null)for(n=Oe.return;n!==null;){var i=n;switch(_c(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Ro();break;case 3:ei(),ge(ot),ge(Je),Tc();break;case 5:Pc(i);break;case 4:ei();break;case 13:ge(xe);break;case 19:ge(xe);break;case 10:bc(i.type._context);break;case 22:case 23:Dc()}n=n.return}if(Be=e,Oe=e=An(e.current,null),He=ct=t,Ie=0,ls=null,Ic=ca=ar=0,it=Fi=null,Xn!==null){for(t=0;t<Xn.length;t++)if(n=Xn[t],i=n.interleaved,i!==null){n.interleaved=null;var o=i.next,a=n.pending;if(a!==null){var u=a.next;a.next=o,i.next=u}n.pending=i}Xn=null}return e}function Hm(e,t){do{var n=Oe;try{if(xc(),_o.current=Wo,Fo){for(var i=be.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}Fo=!1}if(or=0,De=Re=be=null,Ui=!1,ss=0,Rc.current=null,n===null||n.return===null){Ie=1,ls=t,Oe=null;break}e:{var a=e,u=n.return,d=n,h=t;if(t=He,d.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var m=h,_=d,y=_.tag;if(!(_.mode&1)&&(y===0||y===11||y===15)){var w=_.alternate;w?(_.updateQueue=w.updateQueue,_.memoizedState=w.memoizedState,_.lanes=w.lanes):(_.updateQueue=null,_.memoizedState=null)}var P=ef(u);if(P!==null){P.flags&=-257,tf(P,u,d,a,t),P.mode&1&&Xd(a,m,t),t=P,h=m;var b=t.updateQueue;if(b===null){var k=new Set;k.add(h),t.updateQueue=k}else b.add(h);break e}else{if(!(t&1)){Xd(a,m,t),Bc();break e}h=Error(z(426))}}else if(ve&&d.mode&1){var N=ef(u);if(N!==null){!(N.flags&65536)&&(N.flags|=256),tf(N,u,d,a,t),yc(ti(h,d));break e}}a=h=ti(h,d),Ie!==4&&(Ie=2),Fi===null?Fi=[a]:Fi.push(a),a=u;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var g=Cm(a,h,t);qd(a,g);break e;case 1:d=h;var x=a.type,S=a.stateNode;if(!(a.flags&128)&&(typeof x.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(On===null||!On.has(S)))){a.flags|=65536,t&=-t,a.lanes|=t;var E=jm(a,d,t);qd(a,E);break e}}a=a.return}while(a!==null)}Km(n)}catch(A){t=A,Oe===n&&n!==null&&(Oe=n=n.return);continue}break}while(!0)}function Vm(){var e=Zo.current;return Zo.current=Wo,e===null?Wo:e}function Bc(){(Ie===0||Ie===3||Ie===2)&&(Ie=4),Be===null||!(ar&268435455)&&!(ca&268435455)||bn(Be,He)}function qo(e,t){var n=oe;oe|=2;var i=Vm();(Be!==e||He!==t)&&(en=null,nr(e,t));do try{p0();break}catch(o){Hm(e,o)}while(!0);if(xc(),oe=n,Zo.current=i,Oe!==null)throw Error(z(261));return Be=null,He=0,Ie}function p0(){for(;Oe!==null;)qm(Oe)}function m0(){for(;Oe!==null&&!U_();)qm(Oe)}function qm(e){var t=Jm(e.alternate,e,ct);e.memoizedProps=e.pendingProps,t===null?Km(e):Oe=t,Rc.current=null}function Km(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=l0(n,t),n!==null){n.flags&=32767,Oe=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ie=6,Oe=null;return}}else if(n=a0(n,t,ct),n!==null){Oe=n;return}if(t=t.sibling,t!==null){Oe=t;return}Oe=t=e}while(t!==null);Ie===0&&(Ie=5)}function Kn(e,t,n){var i=ue,o=Et.transition;try{Et.transition=null,ue=1,g0(e,t,n,i)}finally{Et.transition=o,ue=i}return null}function g0(e,t,n,i){do Kr();while(En!==null);if(oe&6)throw Error(z(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(z(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(J_(e,a),e===Be&&(Oe=Be=null,He=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||io||(io=!0,Qm(Co,function(){return Kr(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Et.transition,Et.transition=null;var u=ue;ue=1;var d=oe;oe|=4,Rc.current=null,c0(e,n),Fm(n,e),My(du),No=!!hu,du=hu=null,e.current=n,h0(n),$_(),oe=d,ue=u,Et.transition=a}else e.current=n;if(io&&(io=!1,En=e,Vo=o),a=e.pendingLanes,a===0&&(On=null),Z_(n.stateNode),lt(e,Te()),t!==null)for(i=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],i(o.value,{componentStack:o.stack,digest:o.digest});if(Ho)throw Ho=!1,e=Lu,Lu=null,e;return Vo&1&&e.tag!==0&&Kr(),a=e.pendingLanes,a&1?e===Au?Wi++:(Wi=0,Au=e):Wi=0,Dn(),null}function Kr(){if(En!==null){var e=Cp(Vo),t=Et.transition,n=ue;try{if(Et.transition=null,ue=16>e?16:e,En===null)var i=!1;else{if(e=En,En=null,Vo=0,oe&6)throw Error(z(331));var o=oe;for(oe|=4,F=e.current;F!==null;){var a=F,u=a.child;if(F.flags&16){var d=a.deletions;if(d!==null){for(var h=0;h<d.length;h++){var m=d[h];for(F=m;F!==null;){var _=F;switch(_.tag){case 0:case 11:case 15:$i(8,_,a)}var y=_.child;if(y!==null)y.return=_,F=y;else for(;F!==null;){_=F;var w=_.sibling,P=_.return;if(Bm(_),_===m){F=null;break}if(w!==null){w.return=P,F=w;break}F=P}}}var b=a.alternate;if(b!==null){var k=b.child;if(k!==null){b.child=null;do{var N=k.sibling;k.sibling=null,k=N}while(k!==null)}}F=a}}if(a.subtreeFlags&2064&&u!==null)u.return=a,F=u;else e:for(;F!==null;){if(a=F,a.flags&2048)switch(a.tag){case 0:case 11:case 15:$i(9,a,a.return)}var g=a.sibling;if(g!==null){g.return=a.return,F=g;break e}F=a.return}}var x=e.current;for(F=x;F!==null;){u=F;var S=u.child;if(u.subtreeFlags&2064&&S!==null)S.return=u,F=S;else e:for(u=x;F!==null;){if(d=F,d.flags&2048)try{switch(d.tag){case 0:case 11:case 15:ua(9,d)}}catch(A){Ee(d,d.return,A)}if(d===u){F=null;break e}var E=d.sibling;if(E!==null){E.return=d.return,F=E;break e}F=d.return}}if(oe=o,Dn(),qt&&typeof qt.onPostCommitFiberRoot=="function")try{qt.onPostCommitFiberRoot(ta,e)}catch{}i=!0}return i}finally{ue=n,Et.transition=t}}return!1}function mf(e,t,n){t=ti(n,t),t=Cm(e,t,1),e=Nn(e,t,1),t=Xe(),e!==null&&(gs(e,1,t),lt(e,t))}function Ee(e,t,n){if(e.tag===3)mf(e,e,n);else for(;t!==null;){if(t.tag===3){mf(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(On===null||!On.has(i))){e=ti(n,e),e=jm(t,e,1),t=Nn(t,e,1),e=Xe(),t!==null&&(gs(t,1,e),lt(t,e));break}}t=t.return}}function v0(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),t=Xe(),e.pingedLanes|=e.suspendedLanes&n,Be===e&&(He&n)===n&&(Ie===4||Ie===3&&(He&130023424)===He&&500>Te()-Mc?nr(e,0):Ic|=n),lt(e,t)}function Gm(e,t){t===0&&(e.mode&1?(t=Ks,Ks<<=1,!(Ks&130023424)&&(Ks=4194304)):t=1);var n=Xe();e=un(e,t),e!==null&&(gs(e,t,n),lt(e,n))}function _0(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Gm(e,n)}function y0(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(z(314))}i!==null&&i.delete(t),Gm(e,n)}var Jm;Jm=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ot.current)st=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return st=!1,o0(e,t,n);st=!!(e.flags&131072)}else st=!1,ve&&t.flags&1048576&&em(t,zo,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;wo(e,t),e=t.pendingProps;var o=Qr(t,Je.current);qr(t,n),o=jc(null,t,i,e,o,n);var a=Nc();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,at(i)?(a=!0,Io(t)):a=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,kc(t),o.updater=la,t.stateNode=o,o._reactInternals=t,xu(t,i,e,n),t=ku(null,t,i,!0,a,n)):(t.tag=0,ve&&a&&vc(t),Ye(null,t,o,n),t=t.child),t;case 16:i=t.elementType;e:{switch(wo(e,t),e=t.pendingProps,o=i._init,i=o(i._payload),t.type=i,o=t.tag=x0(i),e=Lt(i,e),o){case 0:t=Su(null,t,i,e,n);break e;case 1:t=sf(null,t,i,e,n);break e;case 11:t=nf(null,t,i,e,n);break e;case 14:t=rf(null,t,i,Lt(i.type,e),n);break e}throw Error(z(306,i,""))}return t;case 0:return i=t.type,o=t.pendingProps,o=t.elementType===i?o:Lt(i,o),Su(e,t,i,o,n);case 1:return i=t.type,o=t.pendingProps,o=t.elementType===i?o:Lt(i,o),sf(e,t,i,o,n);case 3:e:{if(Am(t),e===null)throw Error(z(387));i=t.pendingProps,a=t.memoizedState,o=a.element,om(e,t),Uo(t,i,null,n);var u=t.memoizedState;if(i=u.element,a.isDehydrated)if(a={element:i,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){o=ti(Error(z(423)),t),t=of(e,t,i,n,o);break e}else if(i!==o){o=ti(Error(z(424)),t),t=of(e,t,i,n,o);break e}else for(ft=jn(t.stateNode.containerInfo.firstChild),pt=t,ve=!0,Mt=null,n=im(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Yr(),i===o){t=cn(e,t,n);break e}Ye(e,t,i,n)}t=t.child}return t;case 5:return am(t),e===null&&_u(t),i=t.type,o=t.pendingProps,a=e!==null?e.memoizedProps:null,u=o.children,fu(i,o)?u=null:a!==null&&fu(i,a)&&(t.flags|=32),Lm(e,t),Ye(e,t,u,n),t.child;case 6:return e===null&&_u(t),null;case 13:return Rm(e,t,n);case 4:return Ec(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Xr(t,null,i,n):Ye(e,t,i,n),t.child;case 11:return i=t.type,o=t.pendingProps,o=t.elementType===i?o:Lt(i,o),nf(e,t,i,o,n);case 7:return Ye(e,t,t.pendingProps,n),t.child;case 8:return Ye(e,t,t.pendingProps.children,n),t.child;case 12:return Ye(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,o=t.pendingProps,a=t.memoizedProps,u=o.value,pe(Do,i._currentValue),i._currentValue=u,a!==null)if(Bt(a.value,u)){if(a.children===o.children&&!ot.current){t=cn(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var d=a.dependencies;if(d!==null){u=a.child;for(var h=d.firstContext;h!==null;){if(h.context===i){if(a.tag===1){h=on(-1,n&-n),h.tag=2;var m=a.updateQueue;if(m!==null){m=m.shared;var _=m.pending;_===null?h.next=h:(h.next=_.next,_.next=h),m.pending=h}}a.lanes|=n,h=a.alternate,h!==null&&(h.lanes|=n),yu(a.return,n,t),d.lanes|=n;break}h=h.next}}else if(a.tag===10)u=a.type===t.type?null:a.child;else if(a.tag===18){if(u=a.return,u===null)throw Error(z(341));u.lanes|=n,d=u.alternate,d!==null&&(d.lanes|=n),yu(u,n,t),u=a.sibling}else u=a.child;if(u!==null)u.return=a;else for(u=a;u!==null;){if(u===t){u=null;break}if(a=u.sibling,a!==null){a.return=u.return,u=a;break}u=u.return}a=u}Ye(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,i=t.pendingProps.children,qr(t,n),o=Pt(o),i=i(o),t.flags|=1,Ye(e,t,i,n),t.child;case 14:return i=t.type,o=Lt(i,t.pendingProps),o=Lt(i.type,o),rf(e,t,i,o,n);case 15:return Nm(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,o=t.pendingProps,o=t.elementType===i?o:Lt(i,o),wo(e,t),t.tag=1,at(i)?(e=!0,Io(t)):e=!1,qr(t,n),Tm(t,i,o),xu(t,i,o,n),ku(null,t,i,!0,e,n);case 19:return Im(e,t,n);case 22:return Om(e,t,n)}throw Error(z(156,t.tag))};function Qm(e,t){return kp(e,t)}function w0(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kt(e,t,n,i){return new w0(e,t,n,i)}function Uc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function x0(e){if(typeof e=="function")return Uc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===sc)return 11;if(e===oc)return 14}return 2}function An(e,t){var n=e.alternate;return n===null?(n=kt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function So(e,t,n,i,o,a){var u=2;if(i=e,typeof e=="function")Uc(e)&&(u=1);else if(typeof e=="string")u=5;else e:switch(e){case Or:return rr(n.children,o,a,t);case ic:u=8,o|=8;break;case Hl:return e=kt(12,n,t,o|2),e.elementType=Hl,e.lanes=a,e;case Vl:return e=kt(13,n,t,o),e.elementType=Vl,e.lanes=a,e;case ql:return e=kt(19,n,t,o),e.elementType=ql,e.lanes=a,e;case ap:return ha(n,o,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case sp:u=10;break e;case op:u=9;break e;case sc:u=11;break e;case oc:u=14;break e;case _n:u=16,i=null;break e}throw Error(z(130,e==null?e:typeof e,""))}return t=kt(u,n,t,o),t.elementType=e,t.type=i,t.lanes=a,t}function rr(e,t,n,i){return e=kt(7,e,i,t),e.lanes=n,e}function ha(e,t,n,i){return e=kt(22,e,i,t),e.elementType=ap,e.lanes=n,e.stateNode={isHidden:!1},e}function Ll(e,t,n){return e=kt(6,e,null,t),e.lanes=n,e}function Al(e,t,n){return t=kt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function b0(e,t,n,i,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fl(0),this.expirationTimes=fl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fl(0),this.identifierPrefix=i,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function $c(e,t,n,i,o,a,u,d,h){return e=new b0(e,t,n,d,h),t===1?(t=1,a===!0&&(t|=8)):t=0,a=kt(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},kc(a),e}function S0(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Nr,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}function Ym(e){if(!e)return In;e=e._reactInternals;e:{if(cr(e)!==e||e.tag!==1)throw Error(z(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(at(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(z(171))}if(e.tag===1){var n=e.type;if(at(n))return Yp(e,n,t)}return t}function Xm(e,t,n,i,o,a,u,d,h){return e=$c(n,i,!0,e,o,a,u,d,h),e.context=Ym(null),n=e.current,i=Xe(),o=Ln(n),a=on(i,o),a.callback=t??null,Nn(n,a,o),e.current.lanes=o,gs(e,o,i),lt(e,i),e}function da(e,t,n,i){var o=t.current,a=Xe(),u=Ln(o);return n=Ym(n),t.context===null?t.context=n:t.pendingContext=n,t=on(a,u),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=Nn(o,t,u),e!==null&&(Dt(e,o,u,a),vo(e,o,u)),u}function Ko(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function gf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Fc(e,t){gf(e,t),(e=e.alternate)&&gf(e,t)}function k0(){return null}var eg=typeof reportError=="function"?reportError:function(e){console.error(e)};function Wc(e){this._internalRoot=e}fa.prototype.render=Wc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(z(409));da(e,t,null,null)};fa.prototype.unmount=Wc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;lr(function(){da(null,e,null,null)}),t[ln]=null}};function fa(e){this._internalRoot=e}fa.prototype.unstable_scheduleHydration=function(e){if(e){var t=Op();e={blockedOn:null,target:e,priority:t};for(var n=0;n<xn.length&&t!==0&&t<xn[n].priority;n++);xn.splice(n,0,e),n===0&&Ap(e)}};function Zc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function pa(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function vf(){}function E0(e,t,n,i,o){if(o){if(typeof i=="function"){var a=i;i=function(){var m=Ko(u);a.call(m)}}var u=Xm(t,i,e,0,null,!1,!1,"",vf);return e._reactRootContainer=u,e[ln]=u.current,es(e.nodeType===8?e.parentNode:e),lr(),u}for(;o=e.lastChild;)e.removeChild(o);if(typeof i=="function"){var d=i;i=function(){var m=Ko(h);d.call(m)}}var h=$c(e,0,!1,null,null,!1,!1,"",vf);return e._reactRootContainer=h,e[ln]=h.current,es(e.nodeType===8?e.parentNode:e),lr(function(){da(t,h,n,i)}),h}function ma(e,t,n,i,o){var a=n._reactRootContainer;if(a){var u=a;if(typeof o=="function"){var d=o;o=function(){var h=Ko(u);d.call(h)}}da(t,u,e,o)}else u=E0(n,t,e,o,i);return Ko(u)}jp=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Li(t.pendingLanes);n!==0&&(uc(t,n|1),lt(t,Te()),!(oe&6)&&(ni=Te()+500,Dn()))}break;case 13:lr(function(){var i=un(e,1);if(i!==null){var o=Xe();Dt(i,e,1,o)}}),Fc(e,1)}};cc=function(e){if(e.tag===13){var t=un(e,134217728);if(t!==null){var n=Xe();Dt(t,e,134217728,n)}Fc(e,134217728)}};Np=function(e){if(e.tag===13){var t=Ln(e),n=un(e,t);if(n!==null){var i=Xe();Dt(n,e,t,i)}Fc(e,t)}};Op=function(){return ue};Lp=function(e,t){var n=ue;try{return ue=e,t()}finally{ue=n}};ru=function(e,t,n){switch(t){case"input":if(Jl(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var o=sa(i);if(!o)throw Error(z(90));up(i),Jl(i,o)}}}break;case"textarea":hp(e,n);break;case"select":t=n.value,t!=null&&Wr(e,!!n.multiple,t,!1)}};_p=zc;yp=lr;var P0={usingClientEntryPoint:!1,Events:[_s,Ir,sa,gp,vp,zc]},Ci={findFiberByHostInstance:Yn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},T0={bundleType:Ci.bundleType,version:Ci.version,rendererPackageName:Ci.rendererPackageName,rendererConfig:Ci.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:hn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=bp(e),e===null?null:e.stateNode},findFiberByHostInstance:Ci.findFiberByHostInstance||k0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var so=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!so.isDisabled&&so.supportsFiber)try{ta=so.inject(T0),qt=so}catch{}}gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P0;gt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zc(t))throw Error(z(200));return S0(e,t,null,n)};gt.createRoot=function(e,t){if(!Zc(e))throw Error(z(299));var n=!1,i="",o=eg;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=$c(e,1,!1,null,null,n,!1,i,o),e[ln]=t.current,es(e.nodeType===8?e.parentNode:e),new Wc(t)};gt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(z(188)):(e=Object.keys(e).join(","),Error(z(268,e)));return e=bp(t),e=e===null?null:e.stateNode,e};gt.flushSync=function(e){return lr(e)};gt.hydrate=function(e,t,n){if(!pa(t))throw Error(z(200));return ma(null,e,t,!0,n)};gt.hydrateRoot=function(e,t,n){if(!Zc(e))throw Error(z(405));var i=n!=null&&n.hydratedSources||null,o=!1,a="",u=eg;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(u=n.onRecoverableError)),t=Xm(t,null,e,1,n??null,o,!1,a,u),e[ln]=t.current,es(e),i)for(e=0;e<i.length;e++)n=i[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new fa(t)};gt.render=function(e,t,n){if(!pa(t))throw Error(z(200));return ma(null,e,t,!1,n)};gt.unmountComponentAtNode=function(e){if(!pa(e))throw Error(z(40));return e._reactRootContainer?(lr(function(){ma(null,null,e,!1,function(){e._reactRootContainer=null,e[ln]=null})}),!0):!1};gt.unstable_batchedUpdates=zc;gt.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!pa(n))throw Error(z(200));if(e==null||e._reactInternals===void 0)throw Error(z(38));return ma(e,t,n,!1,i)};gt.version="18.3.1-next-f1338f8080-20240426";function tg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(tg)}catch(e){console.error(e)}}tg(),tp.exports=gt;var ng=tp.exports,_f=ng;Wl.createRoot=_f.createRoot,Wl.hydrateRoot=_f.hydrateRoot;function ga(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]]);return n}function C0(e,t,n,i){function o(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function d(_){try{m(i.next(_))}catch(y){u(y)}}function h(_){try{m(i.throw(_))}catch(y){u(y)}}function m(_){_.done?a(_.value):o(_.value).then(d,h)}m((i=i.apply(e,t||[])).next())})}const j0=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class Hc extends Error{constructor(t,n="FunctionsError",i){super(t),this.name=n,this.context=i}}class N0 extends Hc{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class yf extends Hc{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class wf extends Hc{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Mu;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Mu||(Mu={}));class O0{constructor(t,{headers:n={},customFetch:i,region:o=Mu.Any}={}){this.url=t,this.headers=n,this.region=o,this.fetch=j0(i)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return C0(this,arguments,void 0,function*(n,i={}){var o;let a,u;try{const{headers:d,method:h,body:m,signal:_,timeout:y}=i;let w={},{region:P}=i;P||(P=this.region);const b=new URL(`${this.url}/${n}`);P&&P!=="any"&&(w["x-region"]=P,b.searchParams.set("forceFunctionRegion",P));let k;m&&(d&&!Object.prototype.hasOwnProperty.call(d,"Content-Type")||!d)?typeof Blob<"u"&&m instanceof Blob||m instanceof ArrayBuffer?(w["Content-Type"]="application/octet-stream",k=m):typeof m=="string"?(w["Content-Type"]="text/plain",k=m):typeof FormData<"u"&&m instanceof FormData?k=m:(w["Content-Type"]="application/json",k=JSON.stringify(m)):k=m;let N=_;y&&(u=new AbortController,a=setTimeout(()=>u.abort(),y),_?(N=u.signal,_.addEventListener("abort",()=>u.abort())):N=u.signal);const g=yield this.fetch(b.toString(),{method:h||"POST",headers:Object.assign(Object.assign(Object.assign({},w),this.headers),d),body:k,signal:N}).catch(A=>{throw new N0(A)}),x=g.headers.get("x-relay-error");if(x&&x==="true")throw new yf(g);if(!g.ok)throw new wf(g);let S=((o=g.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),E;return S==="application/json"?E=yield g.json():S==="application/octet-stream"||S==="application/pdf"?E=yield g.blob():S==="text/event-stream"?E=g:S==="multipart/form-data"?E=yield g.formData():E=yield g.text(),{data:E,error:null,response:g}}catch(d){return{data:null,error:d,response:d instanceof wf||d instanceof yf?d.context:void 0}}finally{a&&clearTimeout(a)}})}}var L0=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},A0=class{constructor(e){var t,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const i=this.fetch;let o=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{let u=null,d=null,h=null,m=a.status,_=a.statusText;if(a.ok){var y,w;if(n.method!=="HEAD"){var P;const g=await a.text();g===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((P=n.headers.get("Accept"))===null||P===void 0)&&P.includes("application/vnd.pgrst.plan+text"))?d=g:d=JSON.parse(g))}const k=(y=n.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),N=(w=a.headers.get("content-range"))===null||w===void 0?void 0:w.split("/");k&&N&&N.length>1&&(h=parseInt(N[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,h=null,m=406,_="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{var b;const k=await a.text();try{u=JSON.parse(k),Array.isArray(u)&&a.status===404&&(d=[],u=null,m=200,_="OK")}catch{a.status===404&&k===""?(m=204,_="No Content"):u={message:k}}if(u&&n.isMaybeSingle&&(!(u==null||(b=u.details)===null||b===void 0)&&b.includes("0 rows"))&&(u=null,m=200,_="OK"),u&&n.shouldThrowOnError)throw new L0(u)}return{error:u,data:d,count:h,status:m,statusText:_}});return this.shouldThrowOnError||(o=o.catch(a=>{var u;let d="";const h=a==null?void 0:a.cause;if(h){var m,_,y,w;const b=(m=h==null?void 0:h.message)!==null&&m!==void 0?m:"",k=(_=h==null?void 0:h.code)!==null&&_!==void 0?_:"";d=`${(y=a==null?void 0:a.name)!==null&&y!==void 0?y:"FetchError"}: ${a==null?void 0:a.message}`,d+=`

Caused by: ${(w=h==null?void 0:h.name)!==null&&w!==void 0?w:"Error"}: ${b}`,k&&(d+=` (${k})`),h!=null&&h.stack&&(d+=`
${h.stack}`)}else{var P;d=(P=a==null?void 0:a.stack)!==null&&P!==void 0?P:""}return{error:{message:`${(u=a==null?void 0:a.name)!==null&&u!==void 0?u:"FetchError"}: ${a==null?void 0:a.message}`,details:d,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),o.then(e,t)}returns(){return this}overrideTypes(){return this}},R0=class extends A0{select(e){let t=!1;const n=(e??"*").split("").map(i=>/\s/.test(i)&&!t?"":(i==='"'&&(t=!t),i)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:i,referencedTable:o=i}={}){const a=o?`${o}.order`:"order",u=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${u?`${u},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:i=n}={}){const o=typeof i>"u"?"offset":`${i}.offset`,a=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(o,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:i=!1,wal:o=!1,format:a="text"}={}){var u;const d=[e?"analyze":null,t?"verbose":null,n?"settings":null,i?"buffers":null,o?"wal":null].filter(Boolean).join("|"),h=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${h}"; options=${d};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const xf=new RegExp("[,()]");var Tr=class extends R0{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(i=>typeof i=="string"&&xf.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}notIn(e,t){const n=Array.from(new Set(t)).map(i=>typeof i=="string"&&xf.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`not.in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:i}={}){let o="";i==="plain"?o="pl":i==="phrase"?o="ph":i==="websearch"&&(o="w");const a=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${o}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const i=n?`${n}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}},I0=class{constructor(e,{headers:t={},schema:n,fetch:i}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=i}select(e,t){const{head:n=!1,count:i}=t??{},o=n?"HEAD":"GET";let a=!1;const u=(e??"*").split("").map(d=>/\s/.test(d)&&!a?"":(d==='"'&&(a=!a),d)).join("");return this.url.searchParams.set("select",u),i&&this.headers.append("Prefer",`count=${i}`),new Tr({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:n=!0}={}){var i;const o="POST";if(t&&this.headers.append("Prefer",`count=${t}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const a=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(a.length>0){const u=[...new Set(a)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Tr({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:i,defaultToNull:o=!0}={}){var a;const u="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),i&&this.headers.append("Prefer",`count=${i}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const d=e.reduce((h,m)=>h.concat(Object.keys(m)),[]);if(d.length>0){const h=[...new Set(d)].map(m=>`"${m}"`);this.url.searchParams.set("columns",h.join(","))}}return new Tr({method:u,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(e,{count:t}={}){var n;const i="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new Tr({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:e}={}){var t;const n="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new Tr({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},M0=class rg{constructor(t,{headers:n={},schema:i,fetch:o}={}){this.url=t,this.headers=new Headers(n),this.schemaName=i,this.fetch=o}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new I0(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new rg(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:i=!1,get:o=!1,count:a}={}){var u;let d;const h=new URL(`${this.url}/rpc/${t}`);let m;i||o?(d=i?"HEAD":"GET",Object.entries(n).filter(([y,w])=>w!==void 0).map(([y,w])=>[y,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([y,w])=>{h.searchParams.append(y,w)})):(d="POST",m=n);const _=new Headers(this.headers);return a&&_.set("Prefer",`count=${a}`),new Tr({method:d,url:h,headers:_,schema:this.schemaName,body:m,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}};class z0{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const i=n.node,o=parseInt(i.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const i=this.getWebSocketConstructor();return new i(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const D0="2.89.0",B0=`realtime-js/${D0}`,ig="1.0.0",U0="2.0.0",bf=ig,zu=1e4,$0=1e3,F0=100;var wn;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(wn||(wn={}));var Ae;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Ae||(Ae={}));var It;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(It||(It={}));var Du;(function(e){e.websocket="websocket"})(Du||(Du={}));var Jn;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Jn||(Jn={}));class W0{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,n){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(t));let i=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(i))}_binaryEncodeUserBroadcastPush(t){var n;return this._isArrayBuffer((n=t.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var n,i;const o=(i=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&i!==void 0?i:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,o)}_encodeJsonUserBroadcastPush(t){var n,i;const o=(i=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&i!==void 0?i:{},u=new TextEncoder().encode(JSON.stringify(o)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,u)}_encodeUserBroadcastPush(t,n,i){var o,a;const u=t.topic,d=(o=t.ref)!==null&&o!==void 0?o:"",h=(a=t.join_ref)!==null&&a!==void 0?a:"",m=t.payload.event,_=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},y=Object.keys(_).length===0?"":JSON.stringify(_);if(h.length>255)throw new Error(`joinRef length ${h.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`ref length ${d.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`topic length ${u.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`userEvent length ${m.length} exceeds maximum of 255`);if(y.length>255)throw new Error(`metadata length ${y.length} exceeds maximum of 255`);const w=this.USER_BROADCAST_PUSH_META_LENGTH+h.length+d.length+u.length+m.length+y.length,P=new ArrayBuffer(this.HEADER_LENGTH+w);let b=new DataView(P),k=0;b.setUint8(k++,this.KINDS.userBroadcastPush),b.setUint8(k++,h.length),b.setUint8(k++,d.length),b.setUint8(k++,u.length),b.setUint8(k++,m.length),b.setUint8(k++,y.length),b.setUint8(k++,n),Array.from(h,g=>b.setUint8(k++,g.charCodeAt(0))),Array.from(d,g=>b.setUint8(k++,g.charCodeAt(0))),Array.from(u,g=>b.setUint8(k++,g.charCodeAt(0))),Array.from(m,g=>b.setUint8(k++,g.charCodeAt(0))),Array.from(y,g=>b.setUint8(k++,g.charCodeAt(0)));var N=new Uint8Array(P.byteLength+i.byteLength);return N.set(new Uint8Array(P),0),N.set(new Uint8Array(i),P.byteLength),N.buffer}decode(t,n){if(this._isArrayBuffer(t)){let i=this._binaryDecode(t);return n(i)}if(typeof t=="string"){const i=JSON.parse(t),[o,a,u,d,h]=i;return n({join_ref:o,ref:a,topic:u,event:d,payload:h})}return n({})}_binaryDecode(t){const n=new DataView(t),i=n.getUint8(0),o=new TextDecoder;switch(i){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,n,o)}}_decodeUserBroadcast(t,n,i){const o=n.getUint8(1),a=n.getUint8(2),u=n.getUint8(3),d=n.getUint8(4);let h=this.HEADER_LENGTH+4;const m=i.decode(t.slice(h,h+o));h=h+o;const _=i.decode(t.slice(h,h+a));h=h+a;const y=i.decode(t.slice(h,h+u));h=h+u;const w=t.slice(h,t.byteLength),P=d===this.JSON_ENCODING?JSON.parse(i.decode(w)):w,b={type:this.BROADCAST_EVENT,event:_,payload:P};return u>0&&(b.meta=JSON.parse(y)),{join_ref:null,ref:null,topic:m,event:this.BROADCAST_EVENT,payload:b}}_isArrayBuffer(t){var n;return t instanceof ArrayBuffer||((n=t==null?void 0:t.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(t,n){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([i])=>n.includes(i)))}}class sg{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var fe;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(fe||(fe={}));const Sf=(e,t,n={})=>{var i;const o=(i=n.skipTypes)!==null&&i!==void 0?i:[];return t?Object.keys(t).reduce((a,u)=>(a[u]=Z0(u,e,t,o),a),{}):{}},Z0=(e,t,n,i)=>{const o=t.find(d=>d.name===e),a=o==null?void 0:o.type,u=n[e];return a&&!i.includes(a)?og(a,u):Bu(u)},og=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return K0(t,n)}switch(e){case fe.bool:return H0(t);case fe.float4:case fe.float8:case fe.int2:case fe.int4:case fe.int8:case fe.numeric:case fe.oid:return V0(t);case fe.json:case fe.jsonb:return q0(t);case fe.timestamp:return G0(t);case fe.abstime:case fe.date:case fe.daterange:case fe.int4range:case fe.int8range:case fe.money:case fe.reltime:case fe.text:case fe.time:case fe.timestamptz:case fe.timetz:case fe.tsrange:case fe.tstzrange:return Bu(t);default:return Bu(t)}},Bu=e=>e,H0=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},V0=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},q0=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},K0=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,i=e[n];if(e[0]==="{"&&i==="}"){let a;const u=e.slice(1,n);try{a=JSON.parse("["+u+"]")}catch{a=u?u.split(","):[]}return a.map(d=>og(t,d))}return e},G0=e=>typeof e=="string"?e.replace(" ","T"):e,ag=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Rl{constructor(t,n,i={},o=zu){this.channel=t,this.event=n,this.payload=i,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var i;return this._hasReceived(t)&&n((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(i=>i.status===t).forEach(i=>i.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var kf;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(kf||(kf={}));class Zi{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},o=>{const{onJoin:a,onLeave:u,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Zi.syncState(this.state,o,a,u),this.pendingDiffs.forEach(h=>{this.state=Zi.syncDiff(this.state,h,a,u)}),this.pendingDiffs=[],d()}),this.channel._on(i.diff,{},o=>{const{onJoin:a,onLeave:u,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=Zi.syncDiff(this.state,o,a,u),d())}),this.onJoin((o,a,u)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:a,newPresences:u})}),this.onLeave((o,a,u)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:a,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,i,o){const a=this.cloneDeep(t),u=this.transformState(n),d={},h={};return this.map(a,(m,_)=>{u[m]||(h[m]=_)}),this.map(u,(m,_)=>{const y=a[m];if(y){const w=_.map(N=>N.presence_ref),P=y.map(N=>N.presence_ref),b=_.filter(N=>P.indexOf(N.presence_ref)<0),k=y.filter(N=>w.indexOf(N.presence_ref)<0);b.length>0&&(d[m]=b),k.length>0&&(h[m]=k)}else d[m]=_}),this.syncDiff(a,{joins:d,leaves:h},i,o)}static syncDiff(t,n,i,o){const{joins:a,leaves:u}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return i||(i=()=>{}),o||(o=()=>{}),this.map(a,(d,h)=>{var m;const _=(m=t[d])!==null&&m!==void 0?m:[];if(t[d]=this.cloneDeep(h),_.length>0){const y=t[d].map(P=>P.presence_ref),w=_.filter(P=>y.indexOf(P.presence_ref)<0);t[d].unshift(...w)}i(d,_,h)}),this.map(u,(d,h)=>{let m=t[d];if(!m)return;const _=h.map(y=>y.presence_ref);m=m.filter(y=>_.indexOf(y.presence_ref)<0),t[d]=m,o(d,m,h),m.length===0&&delete t[d]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(i=>n(i,t[i]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,i)=>{const o=t[i];return"metas"in o?n[i]=o.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[i]=o,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ef;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Ef||(Ef={}));var Hi;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Hi||(Hi={}));var tn;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(tn||(tn={}));class Fr{constructor(t,n={config:{}},i){var o,a;if(this.topic=t,this.params=n,this.socket=i,this.bindings={},this.state=Ae.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Rl(this,It.join,this.params,this.timeout),this.rejoinTimer=new sg(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ae.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ae.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=Ae.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ae.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=Ae.errored,this.rejoinTimer.scheduleTimeout())}),this._on(It.reply,{},(u,d)=>{this._trigger(this._replyEventName(d),u)}),this.presence=new Zi(this),this.broadcastEndpointURL=ag(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var i,o,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Ae.closed){const{config:{broadcast:u,presence:d,private:h}}=this.params,m=(o=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(P=>P.filter))!==null&&o!==void 0?o:[],_=!!this.bindings[Hi.PRESENCE]&&this.bindings[Hi.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,y={},w={broadcast:u,presence:Object.assign(Object.assign({},d),{enabled:_}),postgres_changes:m,private:h};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(P=>t==null?void 0:t(tn.CHANNEL_ERROR,P)),this._onClose(()=>t==null?void 0:t(tn.CLOSED)),this.updateJoinPayload(Object.assign({config:w},y)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:P})=>{var b;if(this.socket._isManualToken()||this.socket.setAuth(),P===void 0){t==null||t(tn.SUBSCRIBED);return}else{const k=this.bindings.postgres_changes,N=(b=k==null?void 0:k.length)!==null&&b!==void 0?b:0,g=[];for(let x=0;x<N;x++){const S=k[x],{filter:{event:E,schema:A,table:O,filter:D}}=S,$=P&&P[x];if($&&$.event===E&&Fr.isFilterValueEqual($.schema,A)&&Fr.isFilterValueEqual($.table,O)&&Fr.isFilterValueEqual($.filter,D))g.push(Object.assign(Object.assign({},S),{id:$.id}));else{this.unsubscribe(),this.state=Ae.errored,t==null||t(tn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,t&&t(tn.SUBSCRIBED);return}}).receive("error",P=>{this.state=Ae.errored,t==null||t(tn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(P).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(tn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,i){return this.state===Ae.joined&&t===Hi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,n,i)}async httpSend(t,n,i={}){var o;if(n==null)return Promise.reject("Payload is required for httpSend()");const a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const u={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},d=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(o=i.timeout)!==null&&o!==void 0?o:this.timeout);if(d.status===202)return{success:!0};let h=d.statusText;try{const m=await d.json();h=m.error||m.message||h}catch{}return Promise.reject(new Error(h))}async send(t,n={}){var i,o;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:u}=t,d={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(d.Authorization=`Bearer ${this.socket.accessTokenValue}`);const h={method:"POST",headers:d,body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:u,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);return await((o=m.body)===null||o===void 0?void 0:o.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var u,d,h;const m=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((h=(d=(u=this.params)===null||u===void 0?void 0:u.config)===null||d===void 0?void 0:d.broadcast)===null||h===void 0)&&h.ack)&&a("ok"),m.receive("ok",()=>a("ok")),m.receive("error",()=>a("error")),m.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Ae.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(It.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(o=>{i=new Rl(this,It.leave,{},t),i.receive("ok",()=>{n(),o("ok")}).receive("timeout",()=>{n(),o("timed out")}).receive("error",()=>{o("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i==null||i.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ae.closed,this.bindings={}}async _fetchWithTimeout(t,n,i){const o=new AbortController,a=setTimeout(()=>o.abort(),i),u=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:o.signal}));return clearTimeout(a),u}_push(t,n,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new Rl(this,t,n,i);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>F0){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,i){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,i){var o,a;const u=t.toLocaleLowerCase(),{close:d,error:h,leave:m,join:_}=It;if(i&&[d,h,m,_].indexOf(u)>=0&&i!==this._joinRef())return;let w=this._onMessage(u,n,i);if(n&&!w)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(P=>{var b,k,N;return((b=P.filter)===null||b===void 0?void 0:b.event)==="*"||((N=(k=P.filter)===null||k===void 0?void 0:k.event)===null||N===void 0?void 0:N.toLocaleLowerCase())===u}).map(P=>P.callback(w,i)):(a=this.bindings[u])===null||a===void 0||a.filter(P=>{var b,k,N,g,x,S;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in P){const E=P.id,A=(b=P.filter)===null||b===void 0?void 0:b.event;return E&&((k=n.ids)===null||k===void 0?void 0:k.includes(E))&&(A==="*"||(A==null?void 0:A.toLocaleLowerCase())===((N=n.data)===null||N===void 0?void 0:N.type.toLocaleLowerCase()))}else{const E=(x=(g=P==null?void 0:P.filter)===null||g===void 0?void 0:g.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return E==="*"||E===((S=n==null?void 0:n.event)===null||S===void 0?void 0:S.toLocaleLowerCase())}else return P.type.toLocaleLowerCase()===u}).map(P=>{if(typeof w=="object"&&"ids"in w){const b=w.data,{schema:k,table:N,commit_timestamp:g,type:x,errors:S}=b;w=Object.assign(Object.assign({},{schema:k,table:N,commit_timestamp:g,eventType:x,new:{},old:{},errors:S}),this._getPayloadRecords(b))}P.callback(w,i)})}_isClosed(){return this.state===Ae.closed}_isJoined(){return this.state===Ae.joined}_isJoining(){return this.state===Ae.joining}_isLeaving(){return this.state===Ae.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,i){const o=t.toLocaleLowerCase(),a={type:o,filter:n,callback:i};return this.bindings[o]?this.bindings[o].push(a):this.bindings[o]=[a],this}_off(t,n){const i=t.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(o=>{var a;return!(((a=o.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===i&&Fr.isEqual(o.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const i in t)if(t[i]!==n[i])return!1;return!0}static isFilterValueEqual(t,n){return(t??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(It.close,{},t)}_onError(t){this._on(It.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ae.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Sf(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Sf(t.columns,t.old_record)),n}}const Il=()=>{},oo={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},J0=[1e3,2e3,5e3,1e4],Q0=1e4,Y0=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class X0{constructor(t,n){var i;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=zu,this.transport=null,this.heartbeatIntervalMs=oo.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Il,this.ref=0,this.reconnectTimer=null,this.vsn=bf,this.logger=Il,this.conn=null,this.sendBuffer=[],this.serializer=new W0,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>o?(...a)=>o(...a):(...a)=>fetch(...a),!(!((i=n==null?void 0:n.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Du.websocket}`,this.httpEndpoint=ag(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=z0.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,i){this.logger(t,n,i)}connectionState(){switch(this.conn&&this.conn.readyState){case wn.connecting:return Jn.Connecting;case wn.open:return Jn.Open;case wn.closing:return Jn.Closing;default:return Jn.Closed}}isConnected(){return this.connectionState()===Jn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const i=`realtime:${t}`,o=this.getChannels().find(a=>a.topic===i);if(o)return o;{const a=new Fr(`realtime:${t}`,n,this);return this.channels.push(a),a}}push(t){const{topic:n,event:i,payload:o,ref:a}=t,u=()=>{this.encode(t,d=>{var h;(h=this.conn)===null||h===void 0||h.send(d)})};this.log("push",`${n} ${i} (${a})`,o),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close($0,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},oo.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(i=>i.topic===t&&(i._isJoined()||i._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(m){this.log("error","error in heartbeat callback",m)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:o,payload:a,ref:u}=n,d=u?`(${u})`:"",h=a.status||"";this.log("receive",`${h} ${i} ${o} ${d}`.trim(),a),this.channels.filter(m=>m._isMember(i)).forEach(m=>m._trigger(o,a,u)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===wn.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===wn.open||this.conn.readyState===wn.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(It.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const i=t.match(/\?/)?"&":"?",o=new URLSearchParams(n);return`${t}${i}${o}`}_workerObjectUrl(t){let n;if(t)n=t;else{const i=new Blob([Y0],{type:"application/javascript"});n=URL.createObjectURL(i)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n,i=!1;if(t)n=t,i=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(o){this.log("error","Error fetching access token from callback",o),n=this.accessTokenValue}else n=this.accessTokenValue;i?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(o=>{const a={access_token:n,version:B0};n&&o.updateJoinPayload(a),o.joinedOnce&&o._isJoined()&&o._push(It.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(i=>{try{i(n)}catch(o){this.log("error",`error in ${t} callback`,o)}})}catch(i){this.log("error",`error triggering ${t} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new sg(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},oo.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,i,o,a,u,d,h,m,_,y,w,P;switch(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(i=t==null?void 0:t.timeout)!==null&&i!==void 0?i:zu,this.heartbeatIntervalMs=(o=t==null?void 0:t.heartbeatIntervalMs)!==null&&o!==void 0?o:oo.HEARTBEAT_INTERVAL,this.worker=(a=t==null?void 0:t.worker)!==null&&a!==void 0?a:!1,this.accessToken=(u=t==null?void 0:t.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(d=t==null?void 0:t.heartbeatCallback)!==null&&d!==void 0?d:Il,this.vsn=(h=t==null?void 0:t.vsn)!==null&&h!==void 0?h:bf,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(m=t==null?void 0:t.reconnectAfterMs)!==null&&m!==void 0?m:b=>J0[b-1]||Q0,this.vsn){case ig:this.encode=(_=t==null?void 0:t.encode)!==null&&_!==void 0?_:(b,k)=>k(JSON.stringify(b)),this.decode=(y=t==null?void 0:t.decode)!==null&&y!==void 0?y:(b,k)=>k(JSON.parse(b));break;case U0:this.encode=(w=t==null?void 0:t.encode)!==null&&w!==void 0?w:this.serializer.encode.bind(this.serializer),this.decode=(P=t==null?void 0:t.decode)!==null&&P!==void 0?P:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var us=class extends Error{constructor(e,t){var n;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((n=t.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function ew(e,t,n){const i=new URL(t,e);if(n)for(const[o,a]of Object.entries(n))a!==void 0&&i.searchParams.set(o,a);return i.toString()}async function tw(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function nw(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:n,path:i,query:o,body:a,headers:u}){const d=ew(e.baseUrl,i,o),h=await tw(e.auth),m=await t(d,{method:n,headers:{...a?{"Content-Type":"application/json"}:{},...h,...u},body:a?JSON.stringify(a):void 0}),_=await m.text(),y=(m.headers.get("content-type")||"").includes("application/json"),w=y&&_?JSON.parse(_):_;if(!m.ok){const P=y?w:void 0,b=P==null?void 0:P.error;throw new us((b==null?void 0:b.message)??`Request failed with status ${m.status}`,{status:m.status,icebergType:b==null?void 0:b.type,icebergCode:b==null?void 0:b.code,details:P})}return{status:m.status,headers:m.headers,data:w}}}}function ao(e){return e.join("")}var rw=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:ao(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(i=>({namespace:i}))}async createNamespace(e,t){const n={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ao(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ao(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ao(e.namespace)}`}),!0}catch(t){if(t instanceof us&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof us&&n.status===409)return;throw n}}};function xr(e){return e.join("")}var iw=class{constructor(e,t="",n){this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${xr(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${xr(e.namespace)}/tables`,body:t,headers:n})).data.metadata}async updateTable(e,t){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${xr(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${xr(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${xr(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${xr(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(n){if(n instanceof us&&n.status===404)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof us&&n.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},sw=class{constructor(e){var i;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const n=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=nw({baseUrl:n,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(i=e.accessDelegation)==null?void 0:i.join(","),this.namespaceOps=new rw(this.client,t),this.tableOps=new iw(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},va=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function we(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var ow=class extends va{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Uu=class extends va{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};const Vc=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),aw=()=>Response,$u=e=>{if(Array.isArray(e))return e.map(n=>$u(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,i])=>{const o=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[o]=$u(i)}),t},lw=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},uw=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function cs(e){"@babel/helpers - typeof";return cs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cs(e)}function cw(e,t){if(cs(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(cs(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hw(e){var t=cw(e,"string");return cs(t)=="symbol"?t:t+""}function dw(e,t,n){return(t=hw(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,i)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Pf(Object(n),!0).forEach(function(i){dw(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pf(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}const Ml=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},fw=async(e,t,n)=>{e instanceof await aw()&&!(n!=null&&n.noResolveJson)?e.json().then(i=>{const o=e.status||500,a=(i==null?void 0:i.statusCode)||o+"";t(new ow(Ml(i),o,a))}).catch(i=>{t(new Uu(Ml(i),i))}):t(new Uu(Ml(e),e))},pw=(e,t,n,i)=>{const o={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!i?o:(lw(i)?(o.headers=q({"Content-Type":"application/json"},t==null?void 0:t.headers),o.body=JSON.stringify(i)):o.body=i,t!=null&&t.duplex&&(o.duplex=t.duplex),q(q({},o),n))};async function ws(e,t,n,i,o,a){return new Promise((u,d)=>{e(n,pw(t,i,o,a)).then(h=>{if(!h.ok)throw h;return i!=null&&i.noResolveJson?h:h.json()}).then(h=>u(h)).catch(h=>fw(h,d,i))})}async function hs(e,t,n,i){return ws(e,"GET",t,n,i)}async function At(e,t,n,i,o){return ws(e,"POST",t,i,o,n)}async function Fu(e,t,n,i,o){return ws(e,"PUT",t,i,o,n)}async function mw(e,t,n,i){return ws(e,"HEAD",t,q(q({},n),{},{noResolveJson:!0}),i)}async function qc(e,t,n,i,o){return ws(e,"DELETE",t,i,o,n)}var gw=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(we(t))return{data:null,error:t};throw t}}};let lg;lg=Symbol.toStringTag;var vw=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[lg]="BlobDownloadBuilder",this.promise=null}asStream(){return new gw(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(we(t))return{data:null,error:t};throw t}}};const _w={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Tf={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var yw=class{constructor(e,t={},n,i){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=n,this.fetch=Vc(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,t,n,i){var o=this;try{let a;const u=q(q({},Tf),i);let d=q(q({},o.headers),e==="POST"&&{"x-upsert":String(u.upsert)});const h=u.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",u.cacheControl),h&&a.append("metadata",o.encodeMetadata(h)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.has("cacheControl")||a.append("cacheControl",u.cacheControl),h&&!a.has("metadata")&&a.append("metadata",o.encodeMetadata(h))):(a=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType,h&&(d["x-metadata"]=o.toBase64(o.encodeMetadata(h))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!u.duplex&&(u.duplex="half")),i!=null&&i.headers&&(d=q(q({},d),i.headers));const m=o._removeEmptyFolders(t),_=o._getFinalPath(m),y=await(e=="PUT"?Fu:At)(o.fetch,`${o.url}/object/${_}`,a,q({headers:d},u!=null&&u.duplex?{duplex:u.duplex}:{}));return{data:{path:m,id:y.Id,fullPath:y.Key},error:null}}catch(a){if(o.shouldThrowOnError)throw a;if(we(a))return{data:null,error:a};throw a}}async upload(e,t,n){return this.uploadOrUpdate("POST",e,t,n)}async uploadToSignedUrl(e,t,n,i){var o=this;const a=o._removeEmptyFolders(e),u=o._getFinalPath(a),d=new URL(o.url+`/object/upload/sign/${u}`);d.searchParams.set("token",t);try{let h;const m=q({upsert:Tf.upsert},i),_=q(q({},o.headers),{"x-upsert":String(m.upsert)});return typeof Blob<"u"&&n instanceof Blob?(h=new FormData,h.append("cacheControl",m.cacheControl),h.append("",n)):typeof FormData<"u"&&n instanceof FormData?(h=n,h.append("cacheControl",m.cacheControl)):(h=n,_["cache-control"]=`max-age=${m.cacheControl}`,_["content-type"]=m.contentType),{data:{path:a,fullPath:(await Fu(o.fetch,d.toString(),h,{headers:_})).Key},error:null}}catch(h){if(o.shouldThrowOnError)throw h;if(we(h))return{data:null,error:h};throw h}}async createSignedUploadUrl(e,t){var n=this;try{let i=n._getFinalPath(e);const o=q({},n.headers);t!=null&&t.upsert&&(o["x-upsert"]="true");const a=await At(n.fetch,`${n.url}/object/upload/sign/${i}`,{},{headers:o}),u=new URL(n.url+a.url),d=u.searchParams.get("token");if(!d)throw new va("No token returned by API");return{data:{signedUrl:u.toString(),path:e,token:d},error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(we(i))return{data:null,error:i};throw i}}async update(e,t,n){return this.uploadOrUpdate("PUT",e,t,n)}async move(e,t,n){var i=this;try{return{data:await At(i.fetch,`${i.url}/object/move`,{bucketId:i.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:i.headers}),error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(we(o))return{data:null,error:o};throw o}}async copy(e,t,n){var i=this;try{return{data:{path:(await At(i.fetch,`${i.url}/object/copy`,{bucketId:i.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:i.headers})).Key},error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(we(o))return{data:null,error:o};throw o}}async createSignedUrl(e,t,n){var i=this;try{let o=i._getFinalPath(e),a=await At(i.fetch,`${i.url}/object/sign/${o}`,q({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:i.headers});const u=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${i.url}${a.signedURL}${u}`)},{data:a,error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(we(o))return{data:null,error:o};throw o}}async createSignedUrls(e,t,n){var i=this;try{const o=await At(i.fetch,`${i.url}/object/sign/${i.bucketId}`,{expiresIn:t,paths:e},{headers:i.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:o.map(u=>q(q({},u),{},{signedUrl:u.signedURL?encodeURI(`${i.url}${u.signedURL}${a}`):null})),error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(we(o))return{data:null,error:o};throw o}}download(e,t){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=i?`?${i}`:"",a=this._getFinalPath(e),u=()=>hs(this.fetch,`${this.url}/${n}/${a}${o}`,{headers:this.headers,noResolveJson:!0});return new vw(u,this.shouldThrowOnError)}async info(e){var t=this;const n=t._getFinalPath(e);try{return{data:$u(await hs(t.fetch,`${t.url}/object/info/${n}`,{headers:t.headers})),error:null}}catch(i){if(t.shouldThrowOnError)throw i;if(we(i))return{data:null,error:i};throw i}}async exists(e){var t=this;const n=t._getFinalPath(e);try{return await mw(t.fetch,`${t.url}/object/${n}`,{headers:t.headers}),{data:!0,error:null}}catch(i){if(t.shouldThrowOnError)throw i;if(we(i)&&i instanceof Uu){const o=i.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:i}}throw i}}getPublicUrl(e,t){const n=this._getFinalPath(e),i=[],o=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";o!==""&&i.push(o);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",u=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});u!==""&&i.push(u);let d=i.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${d}`)}}}async remove(e){var t=this;try{return{data:await qc(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(we(n))return{data:null,error:n};throw n}}async list(e,t,n){var i=this;try{const o=q(q(q({},_w),t),{},{prefix:e||""});return{data:await At(i.fetch,`${i.url}/object/list/${i.bucketId}`,o,{headers:i.headers},n),error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(we(o))return{data:null,error:o};throw o}}async listV2(e,t){var n=this;try{const i=q({},e);return{data:await At(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,i,{headers:n.headers},t),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(we(i))return{data:null,error:i};throw i}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const ug="2.89.0",cg={"X-Client-Info":`storage-js/${ug}`};var ww=class{constructor(e,t={},n,i){this.shouldThrowOnError=!1;const o=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=q(q({},cg),t),this.fetch=Vc(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){var t=this;try{const n=t.listBucketOptionsToQueryString(e);return{data:await hs(t.fetch,`${t.url}/bucket${n}`,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(we(n))return{data:null,error:n};throw n}}async getBucket(e){var t=this;try{return{data:await hs(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(we(n))return{data:null,error:n};throw n}}async createBucket(e,t={public:!1}){var n=this;try{return{data:await At(n.fetch,`${n.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(we(i))return{data:null,error:i};throw i}}async updateBucket(e,t){var n=this;try{return{data:await Fu(n.fetch,`${n.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(we(i))return{data:null,error:i};throw i}}async emptyBucket(e){var t=this;try{return{data:await At(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(we(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await qc(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(we(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},xw=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=q(q({},cg),t),this.fetch=Vc(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await At(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(we(n))return{data:null,error:n};throw n}}async listBuckets(e){var t=this;try{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const i=n.toString(),o=i?`${t.url}/bucket?${i}`:`${t.url}/bucket`;return{data:await hs(t.fetch,o,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(we(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await qc(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(we(n))return{data:null,error:n};throw n}}from(e){var t=this;if(!uw(e))throw new va("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new sw({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),i=this.shouldThrowOnError;return new Proxy(n,{get(o,a){const u=o[a];return typeof u!="function"?u:async(...d)=>{try{return{data:await u.apply(o,d),error:null}}catch(h){if(i)throw h;return{data:null,error:h}}}}})}};const Kc={"X-Client-Info":`storage-js/${ug}`,"Content-Type":"application/json"};var hg=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function ht(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}var zl=class extends hg{constructor(e,t,n){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},bw=class extends hg{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};const Gc=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Sw=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Cf=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),kw=async(e,t,n)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(n!=null&&n.noResolveJson)){const i=e.status||500,o=e;if(typeof o.json=="function")o.json().then(a=>{const u=(a==null?void 0:a.statusCode)||(a==null?void 0:a.code)||i+"";t(new zl(Cf(a),i,u))}).catch(()=>{const a=i+"";t(new zl(o.statusText||`HTTP ${i} error`,i,a))});else{const a=i+"";t(new zl(o.statusText||`HTTP ${i} error`,i,a))}}else t(new bw(Cf(e),e))},Ew=(e,t,n,i)=>{const o={method:e,headers:(t==null?void 0:t.headers)||{}};return i?(Sw(i)?(o.headers=q({"Content-Type":"application/json"},t==null?void 0:t.headers),o.body=JSON.stringify(i)):o.body=i,q(q({},o),n)):o};async function Pw(e,t,n,i,o,a){return new Promise((u,d)=>{e(n,Ew(t,i,o,a)).then(h=>{if(!h.ok)throw h;if(i!=null&&i.noResolveJson)return h;const m=h.headers.get("content-type");return!m||!m.includes("application/json")?{}:h.json()}).then(h=>u(h)).catch(h=>kw(h,d,i))})}async function dt(e,t,n,i,o){return Pw(e,"POST",t,i,o,n)}var Tw=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=q(q({},Kc),t),this.fetch=Gc(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){var t=this;try{return{data:await dt(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ht(n))return{data:null,error:n};throw n}}async getIndex(e,t){var n=this;try{return{data:await dt(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers}),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(ht(i))return{data:null,error:i};throw i}}async listIndexes(e){var t=this;try{return{data:await dt(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ht(n))return{data:null,error:n};throw n}}async deleteIndex(e,t){var n=this;try{return{data:await dt(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers})||{},error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(ht(i))return{data:null,error:i};throw i}}},Cw=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=q(q({},Kc),t),this.fetch=Gc(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){var t=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await dt(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ht(n))return{data:null,error:n};throw n}}async getVectors(e){var t=this;try{return{data:await dt(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ht(n))return{data:null,error:n};throw n}}async listVectors(e){var t=this;try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await dt(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ht(n))return{data:null,error:n};throw n}}async queryVectors(e){var t=this;try{return{data:await dt(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ht(n))return{data:null,error:n};throw n}}async deleteVectors(e){var t=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await dt(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ht(n))return{data:null,error:n};throw n}}},jw=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=q(q({},Kc),t),this.fetch=Gc(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await dt(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ht(n))return{data:null,error:n};throw n}}async getBucket(e){var t=this;try{return{data:await dt(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ht(n))return{data:null,error:n};throw n}}async listBuckets(e={}){var t=this;try{return{data:await dt(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ht(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await dt(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ht(n))return{data:null,error:n};throw n}}},Nw=class extends jw{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new Ow(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,n=this;return t().call(n,e)}async getBucket(e){var t=()=>super.getBucket,n=this;return t().call(n,e)}async listBuckets(e={}){var t=()=>super.listBuckets,n=this;return t().call(n,e)}async deleteBucket(e){var t=()=>super.deleteBucket,n=this;return t().call(n,e)}},Ow=class extends Tw{constructor(e,t,n,i){super(e,t,i),this.vectorBucketName=n}async createIndex(e){var t=()=>super.createIndex,n=this;return t().call(n,q(q({},e),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,n=this;return t().call(n,q(q({},e),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,n=this;return t().call(n,n.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,n=this;return t().call(n,n.vectorBucketName,e)}index(e){return new Lw(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},Lw=class extends Cw{constructor(e,t,n,i,o){super(e,t,o),this.vectorBucketName=n,this.indexName=i}async putVectors(e){var t=()=>super.putVectors,n=this;return t().call(n,q(q({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(e){var t=()=>super.getVectors,n=this;return t().call(n,q(q({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,n=this;return t().call(n,q(q({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,n=this;return t().call(n,q(q({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,n=this;return t().call(n,q(q({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},Aw=class extends ww{constructor(e,t={},n,i){super(e,t,n,i)}from(e){return new yw(this.url,this.headers,e,this.fetch)}get vectors(){return new Nw(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new xw(this.url+"/iceberg",this.headers,this.fetch)}};const dg="2.89.0",Cr=30*1e3,Wu=3,Dl=Wu*Cr,Rw="http://localhost:9999",Iw="supabase.auth.token",Mw={"X-Client-Info":`gotrue-js/${dg}`},Zu="X-Supabase-Api-Version",fg={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},zw=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Dw=10*60*1e3;class ds extends Error{constructor(t,n,i){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=i}}function W(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Bw extends ds{constructor(t,n,i){super(t,n,i),this.name="AuthApiError",this.status=n,this.code=i}}function Uw(e){return W(e)&&e.name==="AuthApiError"}class Qn extends ds{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class dn extends ds{constructor(t,n,i,o){super(t,i,o),this.name=n,this.status=i}}class ut extends dn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function $w(e){return W(e)&&e.name==="AuthSessionMissingError"}class br extends dn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class lo extends dn{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class uo extends dn{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Fw(e){return W(e)&&e.name==="AuthImplicitGrantRedirectError"}class jf extends dn{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ww extends dn{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Hu extends dn{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function Bl(e){return W(e)&&e.name==="AuthRetryableFetchError"}class Nf extends dn{constructor(t,n,i){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=i}}class Vu extends dn{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Go="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Of=` 	
\r=`.split(""),Zw=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Of.length;t+=1)e[Of[t].charCodeAt(0)]=-2;for(let t=0;t<Go.length;t+=1)e[Go[t].charCodeAt(0)]=t;return e})();function Lf(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;n(Go[i]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;n(Go[i]),t.queuedBits-=6}}function pg(e,t,n){const i=Zw[e];if(i>-1)for(t.queue=t.queue<<6|i,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Af(e){const t=[],n=u=>{t.push(String.fromCodePoint(u))},i={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},a=u=>{qw(u,i,n)};for(let u=0;u<e.length;u+=1)pg(e.charCodeAt(u),o,a);return t.join("")}function Hw(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Vw(e,t){for(let n=0;n<e.length;n+=1){let i=e.charCodeAt(n);if(i>55295&&i<=56319){const o=(i-55296)*1024&65535;i=(e.charCodeAt(n+1)-56320&65535|o)+65536,n+=1}Hw(i,t)}}function qw(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let i=1;i<6;i+=1)if(!(e>>7-i&1)){t.utf8seq=i;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function Gr(e){const t=[],n={queue:0,queuedBits:0},i=o=>{t.push(o)};for(let o=0;o<e.length;o+=1)pg(e.charCodeAt(o),n,i);return new Uint8Array(t)}function Kw(e){const t=[];return Vw(e,n=>t.push(n)),new Uint8Array(t)}function tr(e){const t=[],n={queue:0,queuedBits:0},i=o=>{t.push(o)};return e.forEach(o=>Lf(o,n,i)),Lf(null,n,i),t.join("")}function Gw(e){return Math.round(Date.now()/1e3)+e}function Jw(){return Symbol("auth-callback")}const We=()=>typeof window<"u"&&typeof document<"u",Hn={tested:!1,writable:!1},mg=()=>{if(!We())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Hn.tested)return Hn.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Hn.tested=!0,Hn.writable=!0}catch{Hn.tested=!0,Hn.writable=!1}return Hn.writable};function Qw(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((o,a)=>{t[a]=o})}catch{}return n.searchParams.forEach((i,o)=>{t[o]=i}),t}const gg=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Yw=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",jr=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Vn=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Fe=async(e,t)=>{await e.removeItem(t)};class _a{constructor(){this.promise=new _a.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}_a.promiseConstructor=Promise;function Ul(e){const t=e.split(".");if(t.length!==3)throw new Vu("Invalid JWT structure");for(let i=0;i<t.length;i++)if(!zw.test(t[i]))throw new Vu("JWT not in base64url format");return{header:JSON.parse(Af(t[0])),payload:JSON.parse(Af(t[1])),signature:Gr(t[2]),raw:{header:t[0],payload:t[1]}}}async function Xw(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function ex(e,t){return new Promise((i,o)=>{(async()=>{for(let a=0;a<1/0;a++)try{const u=await e(a);if(!t(a,null,u)){i(u);return}}catch(u){if(!t(a,u)){o(u);return}}})()})}function tx(e){return("0"+e.toString(16)).substr(-2)}function nx(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=n.length;let o="";for(let a=0;a<56;a++)o+=n.charAt(Math.floor(Math.random()*i));return o}return crypto.getRandomValues(t),Array.from(t,tx).join("")}async function rx(e){const n=new TextEncoder().encode(e),i=await crypto.subtle.digest("SHA-256",n),o=new Uint8Array(i);return Array.from(o).map(a=>String.fromCharCode(a)).join("")}async function ix(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await rx(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Sr(e,t,n=!1){const i=nx();let o=i;n&&(o+="/PASSWORD_RECOVERY"),await jr(e,`${t}-code-verifier`,o);const a=await ix(i);return[a,i===a?"plain":"s256"]}const sx=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function ox(e){const t=e.headers.get(Zu);if(!t||!t.match(sx))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function ax(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function lx(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const ux=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function kr(e){if(!ux.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function $l(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function cx(e,t){return new Proxy(e,{get:(n,i,o)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const a=i.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,i,o)}return!t.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,i,o)}})}function Rf(e){return JSON.parse(JSON.stringify(e))}const Gn=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),hx=[502,503,504];async function If(e){var t;if(!Yw(e))throw new Hu(Gn(e),0);if(hx.includes(e.status))throw new Hu(Gn(e),e.status);let n;try{n=await e.json()}catch(a){throw new Qn(Gn(a),a)}let i;const o=ox(e);if(o&&o.getTime()>=fg["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?i=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(i=n.error_code),i){if(i==="weak_password")throw new Nf(Gn(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(i==="session_not_found")throw new ut}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,u)=>a&&typeof u=="string",!0))throw new Nf(Gn(n),e.status,n.weak_password.reasons);throw new Bw(Gn(n),e.status||500,i)}const dx=(e,t,n,i)=>{const o={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),o.body=JSON.stringify(i),Object.assign(Object.assign({},o),n))};async function V(e,t,n,i){var o;const a=Object.assign({},i==null?void 0:i.headers);a[Zu]||(a[Zu]=fg["2024-01-01"].name),i!=null&&i.jwt&&(a.Authorization=`Bearer ${i.jwt}`);const u=(o=i==null?void 0:i.query)!==null&&o!==void 0?o:{};i!=null&&i.redirectTo&&(u.redirect_to=i.redirectTo);const d=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",h=await fx(e,t,n+d,{headers:a,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(h):{data:Object.assign({},h),error:null}}async function fx(e,t,n,i,o,a){const u=dx(t,i,o,a);let d;try{d=await e(n,Object.assign({},u))}catch(h){throw console.error(h),new Hu(Gn(h),0)}if(d.ok||await If(d),i!=null&&i.noResolveJson)return d;try{return await d.json()}catch(h){await If(h)}}function Ot(e){var t;let n=null;gx(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=Gw(e.expires_in)));const i=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:i},error:null}}function Mf(e){const t=Ot(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,i)=>n&&typeof i=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Sn(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function px(e){return{data:e,error:null}}function mx(e){const{action_link:t,email_otp:n,hashed_token:i,redirect_to:o,verification_type:a}=e,u=ga(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:t,email_otp:n,hashed_token:i,redirect_to:o,verification_type:a},h=Object.assign({},u);return{data:{properties:d,user:h},error:null}}function zf(e){return e}function gx(e){return e.access_token&&e.refresh_token&&e.expires_in}const Fl=["global","local","others"];class vx{constructor({url:t="",headers:n={},fetch:i}){this.url=t,this.headers=n,this.fetch=gg(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=Fl[0]){if(Fl.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Fl.join(", ")}`);try{return await V(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(i){if(W(i))return{data:null,error:i};throw i}}async inviteUserByEmail(t,n={}){try{return await V(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Sn})}catch(i){if(W(i))return{data:{user:null},error:i};throw i}}async generateLink(t){try{const{options:n}=t,i=ga(t,["options"]),o=Object.assign(Object.assign({},i),n);return"newEmail"in i&&(o.new_email=i==null?void 0:i.newEmail,delete o.newEmail),await V(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:mx,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(W(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await V(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Sn})}catch(n){if(W(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,i,o,a,u,d,h;try{const m={nextPage:null,lastPage:0,total:0},_=await V(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(a=(o=t==null?void 0:t.perPage)===null||o===void 0?void 0:o.toString())!==null&&a!==void 0?a:""},xform:zf});if(_.error)throw _.error;const y=await _.json(),w=(u=_.headers.get("x-total-count"))!==null&&u!==void 0?u:0,P=(h=(d=_.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&h!==void 0?h:[];return P.length>0&&(P.forEach(b=>{const k=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(b.split(";")[1].split("=")[1]);m[`${N}Page`]=k}),m.total=parseInt(w)),{data:Object.assign(Object.assign({},y),m),error:null}}catch(m){if(W(m))return{data:{users:[]},error:m};throw m}}async getUserById(t){kr(t);try{return await V(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Sn})}catch(n){if(W(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){kr(t);try{return await V(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Sn})}catch(i){if(W(i))return{data:{user:null},error:i};throw i}}async deleteUser(t,n=!1){kr(t);try{return await V(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Sn})}catch(i){if(W(i))return{data:{user:null},error:i};throw i}}async _listFactors(t){kr(t.userId);try{const{data:n,error:i}=await V(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:n,error:i}}catch(n){if(W(n))return{data:null,error:n};throw n}}async _deleteFactor(t){kr(t.userId),kr(t.id);try{return{data:await V(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(W(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,i,o,a,u,d,h;try{const m={nextPage:null,lastPage:0,total:0},_=await V(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(a=(o=t==null?void 0:t.perPage)===null||o===void 0?void 0:o.toString())!==null&&a!==void 0?a:""},xform:zf});if(_.error)throw _.error;const y=await _.json(),w=(u=_.headers.get("x-total-count"))!==null&&u!==void 0?u:0,P=(h=(d=_.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&h!==void 0?h:[];return P.length>0&&(P.forEach(b=>{const k=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(b.split(";")[1].split("=")[1]);m[`${N}Page`]=k}),m.total=parseInt(w)),{data:Object.assign(Object.assign({},y),m),error:null}}catch(m){if(W(m))return{data:{clients:[]},error:m};throw m}}async _createOAuthClient(t){try{return await V(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(W(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await V(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(W(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await V(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(W(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(t){try{return await V(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(W(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await V(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(W(n))return{data:null,error:n};throw n}}}function Df(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const Er={debug:!!(globalThis&&mg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class vg extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class _x extends vg{}async function yx(e,t,n){Er.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const i=new globalThis.AbortController;return t>0&&setTimeout(()=>{i.abort(),Er.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async o=>{if(o){Er.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,o.name);try{return await n()}finally{Er.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,o.name)}}else{if(t===0)throw Er.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new _x(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Er.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function wx(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function _g(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function xx(e){return parseInt(e,16)}function bx(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,i=>i.toString(16).padStart(2,"0")).join("")}function Sx(e){var t;const{chainId:n,domain:i,expirationTime:o,issuedAt:a=new Date,nonce:u,notBefore:d,requestId:h,resources:m,scheme:_,uri:y,version:w}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!y)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(w!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${w}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const P=_g(e.address),b=_?`${_}://${i}`:i,k=e.statement?`${e.statement}
`:"",N=`${b} wants you to sign in with your Ethereum account:
${P}

${k}`;let g=`URI: ${y}
Version: ${w}
Chain ID: ${n}${u?`
Nonce: ${u}`:""}
Issued At: ${a.toISOString()}`;if(o&&(g+=`
Expiration Time: ${o.toISOString()}`),d&&(g+=`
Not Before: ${d.toISOString()}`),h&&(g+=`
Request ID: ${h}`),m){let x=`
Resources:`;for(const S of m){if(!S||typeof S!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${S}`);x+=`
- ${S}`}g+=x}return`${N}
${g}`}class Ne extends Error{constructor({message:t,code:n,cause:i,name:o}){var a;super(t,{cause:i}),this.__isWebAuthnError=!0,this.name=(a=o??(i instanceof Error?i.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=n}}class Jo extends Ne{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function kx({error:e,options:t}){var n,i,o;const{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Ne({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=a.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Ne({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((i=a.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Ne({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((o=a.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new Ne({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Ne({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Ne({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return a.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new Ne({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Ne({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const u=window.location.hostname;if(yg(u)){if(a.rp.id!==u)return new Ne({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Ne({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new Ne({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Ne({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Ne({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function Ex({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Ne({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Ne({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const i=window.location.hostname;if(yg(i)){if(n.rpId!==i)return new Ne({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Ne({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Ne({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Ne({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class Px{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const Tx=new Px;function Cx(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:i}=e,o=ga(e,["challenge","user","excludeCredentials"]),a=Gr(t).buffer,u=Object.assign(Object.assign({},n),{id:Gr(n.id).buffer}),d=Object.assign(Object.assign({},o),{challenge:a,user:u});if(i&&i.length>0){d.excludeCredentials=new Array(i.length);for(let h=0;h<i.length;h++){const m=i[h];d.excludeCredentials[h]=Object.assign(Object.assign({},m),{id:Gr(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return d}function jx(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,i=ga(e,["challenge","allowCredentials"]),o=Gr(t).buffer,a=Object.assign(Object.assign({},i),{challenge:o});if(n&&n.length>0){a.allowCredentials=new Array(n.length);for(let u=0;u<n.length;u++){const d=n[u];a.allowCredentials[u]=Object.assign(Object.assign({},d),{id:Gr(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return a}function Nx(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:tr(new Uint8Array(e.response.attestationObject)),clientDataJSON:tr(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Ox(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,i=e.getClientExtensionResults(),o=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:tr(new Uint8Array(o.authenticatorData)),clientDataJSON:tr(new Uint8Array(o.clientDataJSON)),signature:tr(new Uint8Array(o.signature)),userHandle:o.userHandle?tr(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function yg(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Bf(){var e,t;return!!(We()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function Lx(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Jo("Browser returned unexpected credential type",t)}:{data:null,error:new Jo("Empty credential response",t)}}catch(t){return{data:null,error:kx({error:t,options:e})}}}async function Ax(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Jo("Browser returned unexpected credential type",t)}:{data:null,error:new Jo("Empty credential response",t)}}catch(t){return{data:null,error:Ex({error:t,options:e})}}}const Rx={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Ix={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Qo(...e){const t=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),n=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),i={};for(const o of e)if(o)for(const a in o){const u=o[a];if(u!==void 0)if(Array.isArray(u))i[a]=u;else if(n(u))i[a]=u;else if(t(u)){const d=i[a];t(d)?i[a]=Qo(d,u):i[a]=Qo(u)}else i[a]=u}return i}function Mx(e,t){return Qo(Rx,e,t||{})}function zx(e,t){return Qo(Ix,e,t||{})}class Dx{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:i,signal:o},a){try{const{data:u,error:d}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!u)return{data:null,error:d};const h=o??Tx.createNewAbortSignal();if(u.webauthn.type==="create"){const{user:m}=u.webauthn.credential_options.publicKey;m.name||(m.name=`${m.id}:${i}`),m.displayName||(m.displayName=m.name)}switch(u.webauthn.type){case"create":{const m=Mx(u.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:_,error:y}=await Lx({publicKey:m,signal:h});return _?{data:{factorId:t,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:_}},error:null}:{data:null,error:y}}case"request":{const m=zx(u.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:_,error:y}=await Ax(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:m,signal:h}));return _?{data:{factorId:t,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:_}},error:null}:{data:null,error:y}}}}catch(u){return W(u)?{data:null,error:u}:{data:null,error:new Qn("Unexpected error in challenge",u)}}}async _verify({challengeId:t,factorId:n,webauthn:i}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:i})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},a){if(!n)return{data:null,error:new ds("rpId is required for WebAuthn authentication")};try{if(!Bf())return{data:null,error:new Qn("Browser does not support WebAuthn",null)};const{data:u,error:d}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:i},signal:o},{request:a});if(!u)return{data:null,error:d};const{webauthn:h}=u;return this._verify({factorId:t,challengeId:u.challengeId,webauthn:{type:h.type,rpId:n,rpOrigins:i,credential_response:h.credential_response}})}catch(u){return W(u)?{data:null,error:u}:{data:null,error:new Qn("Unexpected error in authenticate",u)}}}async _register({friendlyName:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},a){if(!n)return{data:null,error:new ds("rpId is required for WebAuthn registration")};try{if(!Bf())return{data:null,error:new Qn("Browser does not support WebAuthn",null)};const{data:u,error:d}=await this._enroll({friendlyName:t});if(!u)return await this.client.mfa.listFactors().then(_=>{var y;return(y=_.data)===null||y===void 0?void 0:y.all.find(w=>w.factor_type==="webauthn"&&w.friendly_name===t&&w.status!=="unverified")}).then(_=>_?this.client.mfa.unenroll({factorId:_==null?void 0:_.id}):void 0),{data:null,error:d};const{data:h,error:m}=await this._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:n,rpOrigins:i},signal:o},{create:a});return h?this._verify({factorId:u.id,challengeId:h.challengeId,webauthn:{rpId:n,rpOrigins:i,type:h.webauthn.type,credential_response:h.webauthn.credential_response}}):{data:null,error:m}}catch(u){return W(u)?{data:null,error:u}:{data:null,error:new Qn("Unexpected error in register",u)}}}}wx();const Bx={url:Rw,storageKey:Iw,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Mw,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Uf(e,t,n){return await n()}const Pr={};class fs{get jwks(){var t,n;return(n=(t=Pr[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Pr[this.storageKey]=Object.assign(Object.assign({},Pr[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Pr[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Pr[this.storageKey]=Object.assign(Object.assign({},Pr[this.storageKey]),{cachedAt:t})}constructor(t){var n,i,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},Bx),t);if(this.storageKey=a.storageKey,this.instanceID=(n=fs.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,fs.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&We()){const u=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(u),this.logDebugMessages&&console.trace(u)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new vx({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=gg(a.fetch),this.lock=a.lock||Uf,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,a.lock?this.lock=a.lock:this.persistSession&&We()&&(!((i=globalThis==null?void 0:globalThis.navigator)===null||i===void 0)&&i.locks)?this.lock=yx:this.lock=Uf,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Dx(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:mg()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Df(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=Df(this.memoryStorage)),We()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${dg}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let n={},i="none";if(We()&&(n=Qw(window.location.href),this._isImplicitGrantCallback(n)?i="implicit":await this._isPKCECallback(n)&&(i="pkce")),We()&&this.detectSessionInUrl&&i!=="none"){const{data:o,error:a}=await this._getSessionFromURL(n,i);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),Fw(a)){const h=(t=a.details)===null||t===void 0?void 0:t.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:u,redirectType:d}=o;return this._debug("#_initialize()","detected session in URL",u,"redirect type",d),await this._saveSession(u),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return W(n)?this._returnResult({error:n}):this._returnResult({error:new Qn("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,i,o;try{const a=await V(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(o=t==null?void 0:t.options)===null||o===void 0?void 0:o.captchaToken}},xform:Ot}),{data:u,error:d}=a;if(d||!u)return this._returnResult({data:{user:null,session:null},error:d});const h=u.session,m=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:m,session:h},error:null})}catch(a){if(W(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(t){var n,i,o;try{let a;if("email"in t){const{email:_,password:y,options:w}=t;let P=null,b=null;this.flowType==="pkce"&&([P,b]=await Sr(this.storage,this.storageKey)),a=await V(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:w==null?void 0:w.emailRedirectTo,body:{email:_,password:y,data:(n=w==null?void 0:w.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:w==null?void 0:w.captchaToken},code_challenge:P,code_challenge_method:b},xform:Ot})}else if("phone"in t){const{phone:_,password:y,options:w}=t;a=await V(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:_,password:y,data:(i=w==null?void 0:w.data)!==null&&i!==void 0?i:{},channel:(o=w==null?void 0:w.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:w==null?void 0:w.captchaToken}},xform:Ot})}else throw new lo("You must provide either an email or phone number and a password");const{data:u,error:d}=a;if(d||!u)return await Fe(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:d});const h=u.session,m=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:m,session:h},error:null})}catch(a){if(await Fe(this.storage,`${this.storageKey}-code-verifier`),W(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(t){try{let n;if("email"in t){const{email:a,password:u,options:d}=t;n=await V(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:u,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:Mf})}else if("phone"in t){const{phone:a,password:u,options:d}=t;n=await V(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:u,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:Mf})}else throw new lo("You must provide either an email or phone number and a password");const{data:i,error:o}=n;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!i||!i.session||!i.user){const a=new br;return this._returnResult({data:{user:null,session:null},error:a})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(n){if(W(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(t){var n,i,o,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(i=t.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=t.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,i,o,a,u,d,h,m,_,y,w;let P,b;if("message"in t)P=t.message,b=t.signature;else{const{chain:k,wallet:N,statement:g,options:x}=t;let S;if(We())if(typeof N=="object")S=N;else{const re=window;if("ethereum"in re&&typeof re.ethereum=="object"&&"request"in re.ethereum&&typeof re.ethereum.request=="function")S=re.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=N}const E=new URL((n=x==null?void 0:x.url)!==null&&n!==void 0?n:window.location.href),A=await S.request({method:"eth_requestAccounts"}).then(re=>re).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!A||A.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const O=_g(A[0]);let D=(i=x==null?void 0:x.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!D){const re=await S.request({method:"eth_chainId"});D=xx(re)}const $={domain:E.host,address:O,statement:g,uri:E.href,version:"1",chainId:D,nonce:(o=x==null?void 0:x.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(u=(a=x==null?void 0:x.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(d=x==null?void 0:x.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(h=x==null?void 0:x.signInWithEthereum)===null||h===void 0?void 0:h.notBefore,requestId:(m=x==null?void 0:x.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(_=x==null?void 0:x.signInWithEthereum)===null||_===void 0?void 0:_.resources};P=Sx($),b=await S.request({method:"personal_sign",params:[bx(P),O]})}try{const{data:k,error:N}=await V(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:P,signature:b},!((y=t.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(w=t.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:Ot});if(N)throw N;if(!k||!k.session||!k.user){const g=new br;return this._returnResult({data:{user:null,session:null},error:g})}return k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),this._returnResult({data:Object.assign({},k),error:N})}catch(k){if(W(k))return this._returnResult({data:{user:null,session:null},error:k});throw k}}async signInWithSolana(t){var n,i,o,a,u,d,h,m,_,y,w,P;let b,k;if("message"in t)b=t.message,k=t.signature;else{const{chain:N,wallet:g,statement:x,options:S}=t;let E;if(We())if(typeof g=="object")E=g;else{const O=window;if("solana"in O&&typeof O.solana=="object"&&("signIn"in O.solana&&typeof O.solana.signIn=="function"||"signMessage"in O.solana&&typeof O.solana.signMessage=="function"))E=O.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(S!=null&&S.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=g}const A=new URL((n=S==null?void 0:S.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in E&&E.signIn){const O=await E.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},S==null?void 0:S.signInWithSolana),{version:"1",domain:A.host,uri:A.href}),x?{statement:x}:null));let D;if(Array.isArray(O)&&O[0]&&typeof O[0]=="object")D=O[0];else if(O&&typeof O=="object"&&"signedMessage"in O&&"signature"in O)D=O;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in D&&"signature"in D&&(typeof D.signedMessage=="string"||D.signedMessage instanceof Uint8Array)&&D.signature instanceof Uint8Array)b=typeof D.signedMessage=="string"?D.signedMessage:new TextDecoder().decode(D.signedMessage),k=D.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in E)||typeof E.signMessage!="function"||!("publicKey"in E)||typeof E!="object"||!E.publicKey||!("toBase58"in E.publicKey)||typeof E.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${A.host} wants you to sign in with your Solana account:`,E.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${A.href}`,`Issued At: ${(o=(i=S==null?void 0:S.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((a=S==null?void 0:S.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${S.signInWithSolana.notBefore}`]:[],...!((u=S==null?void 0:S.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${S.signInWithSolana.expirationTime}`]:[],...!((d=S==null?void 0:S.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${S.signInWithSolana.chainId}`]:[],...!((h=S==null?void 0:S.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${S.signInWithSolana.nonce}`]:[],...!((m=S==null?void 0:S.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${S.signInWithSolana.requestId}`]:[],...!((y=(_=S==null?void 0:S.signInWithSolana)===null||_===void 0?void 0:_.resources)===null||y===void 0)&&y.length?["Resources",...S.signInWithSolana.resources.map(D=>`- ${D}`)]:[]].join(`
`);const O=await E.signMessage(new TextEncoder().encode(b),"utf8");if(!O||!(O instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");k=O}}try{const{data:N,error:g}=await V(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:tr(k)},!((w=t.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(P=t.options)===null||P===void 0?void 0:P.captchaToken}}:null),xform:Ot});if(g)throw g;if(!N||!N.session||!N.user){const x=new br;return this._returnResult({data:{user:null,session:null},error:x})}return N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),this._returnResult({data:Object.assign({},N),error:g})}catch(N){if(W(N))return this._returnResult({data:{user:null,session:null},error:N});throw N}}async _exchangeCodeForSession(t){const n=await Vn(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(n??"").split("/");try{if(!i&&this.flowType==="pkce")throw new Ww;const{data:a,error:u}=await V(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:i},xform:Ot});if(await Fe(this.storage,`${this.storageKey}-code-verifier`),u)throw u;if(!a||!a.session||!a.user){const d=new br;return this._returnResult({data:{user:null,session:null,redirectType:null},error:d})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:o??null}),error:u})}catch(a){if(await Fe(this.storage,`${this.storageKey}-code-verifier`),W(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(t){try{const{options:n,provider:i,token:o,access_token:a,nonce:u}=t,d=await V(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:a,nonce:u,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Ot}),{data:h,error:m}=d;if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!h||!h.session||!h.user){const _=new br;return this._returnResult({data:{user:null,session:null},error:_})}return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),this._returnResult({data:h,error:m})}catch(n){if(W(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(t){var n,i,o,a,u;try{if("email"in t){const{email:d,options:h}=t;let m=null,_=null;this.flowType==="pkce"&&([m,_]=await Sr(this.storage,this.storageKey));const{error:y}=await V(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},create_user:(i=h==null?void 0:h.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:m,code_challenge_method:_},redirectTo:h==null?void 0:h.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:y})}if("phone"in t){const{phone:d,options:h}=t,{data:m,error:_}=await V(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(o=h==null?void 0:h.data)!==null&&o!==void 0?o:{},create_user:(a=h==null?void 0:h.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},channel:(u=h==null?void 0:h.channel)!==null&&u!==void 0?u:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:m==null?void 0:m.message_id},error:_})}throw new lo("You must provide either an email or phone number.")}catch(d){if(await Fe(this.storage,`${this.storageKey}-code-verifier`),W(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async verifyOtp(t){var n,i;try{let o,a;"options"in t&&(o=(n=t.options)===null||n===void 0?void 0:n.redirectTo,a=(i=t.options)===null||i===void 0?void 0:i.captchaToken);const{data:u,error:d}=await V(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:o,xform:Ot});if(d)throw d;if(!u)throw new Error("An error occurred on token verification.");const h=u.session,m=u.user;return h!=null&&h.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),this._returnResult({data:{user:m,session:h},error:null})}catch(o){if(W(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(t){var n,i,o,a,u;try{let d=null,h=null;this.flowType==="pkce"&&([d,h]=await Sr(this.storage,this.storageKey));const m=await V(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=t==null?void 0:t.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:d,code_challenge_method:h}),headers:this.headers,xform:px});return!((a=m.data)===null||a===void 0)&&a.url&&We()&&!(!((u=t.options)===null||u===void 0)&&u.skipBrowserRedirect)&&window.location.assign(m.data.url),this._returnResult(m)}catch(d){if(await Fe(this.storage,`${this.storageKey}-code-verifier`),W(d))return this._returnResult({data:null,error:d});throw d}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:i}=t;if(i)throw i;if(!n)throw new ut;const{error:o}=await V(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(t){if(W(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:i,type:o,options:a}=t,{error:u}=await V(this.fetch,"POST",n,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:u})}else if("phone"in t){const{phone:i,type:o,options:a}=t,{data:u,error:d}=await V(this.fetch,"POST",n,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new lo("You must provide either an email or phone number and a type")}catch(n){if(W(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await i,await n()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=n();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Vn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const i=t.expires_at?t.expires_at*1e3-Date.now()<Dl:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",t.expires_at),!i){if(this.userStorage){const u=await Vn(this.userStorage,this.storageKey+"-user");u!=null&&u.user?t.user=u.user:t.user=$l()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const u={value:this.suppressGetSessionWarning};t.user=cx(t.user,u),u.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:o,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(t){try{return t?await V(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Sn}):await this._useSession(async n=>{var i,o,a;const{data:u,error:d}=n;if(d)throw d;return!(!((i=u.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ut}:await V(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(o=u.session)===null||o===void 0?void 0:o.access_token)!==null&&a!==void 0?a:void 0,xform:Sn})})}catch(n){if(W(n))return $w(n)&&(await this._removeSession(),await Fe(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async i=>{const{data:o,error:a}=i;if(a)throw a;if(!o.session)throw new ut;const u=o.session;let d=null,h=null;this.flowType==="pkce"&&t.email!=null&&([d,h]=await Sr(this.storage,this.storageKey));const{data:m,error:_}=await V(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:d,code_challenge_method:h}),jwt:u.access_token,xform:Sn});if(_)throw _;return u.user=m.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),this._returnResult({data:{user:u.user},error:null})})}catch(i){if(await Fe(this.storage,`${this.storageKey}-code-verifier`),W(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new ut;const n=Date.now()/1e3;let i=n,o=!0,a=null;const{payload:u}=Ul(t.access_token);if(u.exp&&(i=u.exp,o=i<=n),o){const{data:d,error:h}=await this._callRefreshToken(t.refresh_token);if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!d)return{data:{user:null,session:null},error:null};a=d}else{const{data:d,error:h}=await this._getUser(t.access_token);if(h)throw h;a={access_token:t.access_token,refresh_token:t.refresh_token,user:d.user,token_type:"bearer",expires_in:i-n,expires_at:i},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(n){if(W(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var i;if(!t){const{data:u,error:d}=n;if(d)throw d;t=(i=u.session)!==null&&i!==void 0?i:void 0}if(!(t!=null&&t.refresh_token))throw new ut;const{data:o,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(W(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(t,n){try{if(!We())throw new uo("No browser detected.");if(t.error||t.error_description||t.error_code)throw new uo(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new jf("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new uo("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new jf("No code detected.");const{data:x,error:S}=await this._exchangeCodeForSession(t.code);if(S)throw S;const E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:o,access_token:a,refresh_token:u,expires_in:d,expires_at:h,token_type:m}=t;if(!a||!d||!u||!m)throw new uo("No session defined in URL");const _=Math.round(Date.now()/1e3),y=parseInt(d);let w=_+y;h&&(w=parseInt(h));const P=w-_;P*1e3<=Cr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${P}s, should have been closer to ${y}s`);const b=w-y;_-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,w,_):_-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,w,_);const{data:k,error:N}=await this._getUser(a);if(N)throw N;const g={provider_token:i,provider_refresh_token:o,access_token:a,expires_in:y,expires_at:w,refresh_token:u,token_type:m,user:k.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:g,redirectType:t.type},error:null})}catch(i){if(W(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Vn(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var i;const{data:o,error:a}=n;if(a)return this._returnResult({error:a});const u=(i=o.session)===null||i===void 0?void 0:i.access_token;if(u){const{error:d}=await this.admin.signOut(u,t);if(d&&!(Uw(d)&&(d.status===404||d.status===401||d.status===403)))return this._returnResult({error:d})}return t!=="others"&&(await this._removeSession(),await Fe(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const n=Jw(),i={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:i}}}async _emitInitialSession(t){return await this._useSession(async n=>{var i,o;try{const{data:{session:a},error:u}=n;if(u)throw u;await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((o=this.stateChangeEmitters.get(t))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,n={}){let i=null,o=null;this.flowType==="pkce"&&([i,o]=await Sr(this.storage,this.storageKey,!0));try{return await V(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:i,code_challenge_method:o,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(await Fe(this.storage,`${this.storageKey}-code-verifier`),W(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var t;try{const{data:n,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(n){if(W(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:i,error:o}=await this._useSession(async a=>{var u,d,h,m,_;const{data:y,error:w}=a;if(w)throw w;const P=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(u=t.options)===null||u===void 0?void 0:u.redirectTo,scopes:(d=t.options)===null||d===void 0?void 0:d.scopes,queryParams:(h=t.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await V(this.fetch,"GET",P,{headers:this.headers,jwt:(_=(m=y.session)===null||m===void 0?void 0:m.access_token)!==null&&_!==void 0?_:void 0})});if(o)throw o;return We()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),this._returnResult({data:{provider:t.provider,url:i==null?void 0:i.url},error:null})}catch(i){if(W(i))return this._returnResult({data:{provider:t.provider,url:null},error:i});throw i}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var i;try{const{error:o,data:{session:a}}=n;if(o)throw o;const{options:u,provider:d,token:h,access_token:m,nonce:_}=t,y=await V(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=a==null?void 0:a.access_token)!==null&&i!==void 0?i:void 0,body:{provider:d,id_token:h,access_token:m,nonce:_,link_identity:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Ot}),{data:w,error:P}=y;return P?this._returnResult({data:{user:null,session:null},error:P}):!w||!w.session||!w.user?this._returnResult({data:{user:null,session:null},error:new br}):(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("USER_UPDATED",w.session)),this._returnResult({data:w,error:P}))}catch(o){if(await Fe(this.storage,`${this.storageKey}-code-verifier`),W(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var i,o;const{data:a,error:u}=n;if(u)throw u;return await V(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(o=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})})}catch(n){if(W(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const i=Date.now();return await ex(async o=>(o>0&&await Xw(200*Math.pow(2,o-1)),this._debug(n,"refreshing attempt",o),await V(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ot})),(o,a)=>{const u=200*Math.pow(2,o);return a&&Bl(a)&&Date.now()+u-i<Cr})}catch(i){if(this._debug(n,"error",i),W(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const i=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",i),We()&&!n.skipBrowserRedirect&&window.location.assign(i),{data:{provider:t,url:i},error:null}}async _recoverAndRefresh(){var t,n;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const o=await Vn(this.storage,this.storageKey);if(o&&this.userStorage){let u=await Vn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:o.user},await jr(this.userStorage,this.storageKey+"-user",u)),o.user=(t=u==null?void 0:u.user)!==null&&t!==void 0?t:$l()}else if(o&&!o.user&&!o.user){const u=await Vn(this.storage,this.storageKey+"-user");u&&(u!=null&&u.user)?(o.user=u.user,await Fe(this.storage,this.storageKey+"-user"),await jr(this.storage,this.storageKey,o)):o.user=$l()}if(this._debug(i,"session from storage",o),!this._isValidSession(o)){this._debug(i,"session is not valid"),o!==null&&await this._removeSession();return}const a=((n=o.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Dl;if(this._debug(i,`session has${a?"":" not"} expired with margin of ${Dl}s`),a){if(this.autoRefreshToken&&o.refresh_token){const{error:u}=await this._callRefreshToken(o.refresh_token);u&&(console.error(u),Bl(u)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:d}=await this._getUser(o.access_token);!d&&(u!=null&&u.user)?(o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(i,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(i,"error",o),console.error(o);return}finally{this._debug(i,"end")}}async _callRefreshToken(t){var n,i;if(!t)throw new ut;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new _a;const{data:a,error:u}=await this._refreshAccessToken(t);if(u)throw u;if(!a.session)throw new ut;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const d={data:a.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(a){if(this._debug(o,"error",a),W(a)){const u={data:null,error:a};return Bl(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(u),u}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(a),a}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(t,n,i=!0){const o=`#_notifyAllSubscribers(${t})`;this._debug(o,"begin",n,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:t,session:n});const a=[],u=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(t,n)}catch(h){a.push(h)}});if(await Promise.all(u),a.length>0){for(let d=0;d<a.length;d+=1)console.error(a[d]);throw a[0]}}finally{this._debug(o,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Fe(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},t),i=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&n.user&&await jr(this.userStorage,this.storageKey+"-user",{user:n.user});const o=Object.assign({},n);delete o.user;const a=Rf(o);await jr(this.storage,this.storageKey,a)}else{const o=Rf(n);await jr(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Fe(this.storage,this.storageKey),await Fe(this.storage,this.storageKey+"-code-verifier"),await Fe(this.storage,this.storageKey+"-user"),this.userStorage&&await Fe(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&We()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Cr);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:i}}=n;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((i.expires_at*1e3-t)/Cr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${Cr}ms, refresh threshold is ${Wu} ticks`),o<=Wu&&await this._callRefreshToken(i.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof vg)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!We()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,i){const o=[`provider=${encodeURIComponent(n)}`];if(i!=null&&i.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[a,u]=await Sr(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(u)}`});o.push(d.toString())}if(i!=null&&i.queryParams){const a=new URLSearchParams(i.queryParams);o.push(a.toString())}return i!=null&&i.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${t}?${o.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var i;const{data:o,error:a}=n;return a?this._returnResult({data:null,error:a}):await V(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(i=o==null?void 0:o.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(W(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(t){try{return await this._useSession(async n=>{var i,o;const{data:a,error:u}=n;if(u)return this._returnResult({data:null,error:u});const d=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:h,error:m}=await V(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(i=a==null?void 0:a.session)===null||i===void 0?void 0:i.access_token});return m?this._returnResult({data:null,error:m}):(t.factorType==="totp"&&h.type==="totp"&&(!((o=h==null?void 0:h.totp)===null||o===void 0)&&o.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),this._returnResult({data:h,error:null}))})}catch(n){if(W(n))return this._returnResult({data:null,error:n});throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:o,error:a}=n;if(a)return this._returnResult({data:null,error:a});const u=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?Nx(t.webauthn.credential_response):Ox(t.webauthn.credential_response)})}:{code:t.code}),{data:d,error:h}=await V(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:u,headers:this.headers,jwt:(i=o==null?void 0:o.session)===null||i===void 0?void 0:i.access_token});return h?this._returnResult({data:null,error:h}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),this._returnResult({data:d,error:h}))})}catch(n){if(W(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:o,error:a}=n;if(a)return this._returnResult({data:null,error:a});const u=await V(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(i=o==null?void 0:o.session)===null||i===void 0?void 0:i.access_token});if(u.error)return u;const{data:d}=u;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:Cx(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:jx(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(W(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(t){const{data:n,error:i}=await this._challenge({factorId:t.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:i}=await this.getUser();if(i)return{data:null,error:i};const o={all:[],phone:[],totp:[],webauthn:[]};for(const a of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])o.all.push(a),a.status==="verified"&&o[a.factor_type].push(a);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(){var t,n;const{data:{session:i},error:o}=await this.getSession();if(o)return this._returnResult({data:null,error:o});if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Ul(i.access_token);let u=null;a.aal&&(u=a.aal);let d=u;((n=(t=i.user.factors)===null||t===void 0?void 0:t.filter(_=>_.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(d="aal2");const m=a.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:m},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:i},error:o}=n;return o?this._returnResult({data:null,error:o}):i?await V(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:i.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new ut})})}catch(n){if(W(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async i=>{const{data:{session:o},error:a}=i;if(a)return this._returnResult({data:null,error:a});if(!o)return this._returnResult({data:null,error:new ut});const u=await V(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:d=>({data:d,error:null})});return u.data&&u.data.redirect_url&&We()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(u.data.redirect_url),u})}catch(i){if(W(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(t,n){try{return await this._useSession(async i=>{const{data:{session:o},error:a}=i;if(a)return this._returnResult({data:null,error:a});if(!o)return this._returnResult({data:null,error:new ut});const u=await V(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:d=>({data:d,error:null})});return u.data&&u.data.redirect_url&&We()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(u.data.redirect_url),u})}catch(i){if(W(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:n},error:i}=t;return i?this._returnResult({data:null,error:i}):n?await V(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new ut})})}catch(t){if(W(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async n=>{const{data:{session:i},error:o}=n;return o?this._returnResult({data:null,error:o}):i?(await V(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new ut})})}catch(n){if(W(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,n={keys:[]}){let i=n.keys.find(d=>d.kid===t);if(i)return i;const o=Date.now();if(i=this.jwks.keys.find(d=>d.kid===t),i&&this.jwks_cached_at+Dw>o)return i;const{data:a,error:u}=await V(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=o,i=a.keys.find(d=>d.kid===t),!i)?null:i}async getClaims(t,n={}){try{let i=t;if(!i){const{data:P,error:b}=await this.getSession();if(b||!P.session)return this._returnResult({data:null,error:b});i=P.session.access_token}const{header:o,payload:a,signature:u,raw:{header:d,payload:h}}=Ul(i);n!=null&&n.allowExpired||ax(a.exp);const m=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!m){const{error:P}=await this.getUser(i);if(P)throw P;return{data:{claims:a,header:o,signature:u},error:null}}const _=lx(o.alg),y=await crypto.subtle.importKey("jwk",m,_,!0,["verify"]);if(!await crypto.subtle.verify(_,y,u,Kw(`${d}.${h}`)))throw new Vu("Invalid JWT signature");return{data:{claims:a,header:o,signature:u},error:null}}catch(i){if(W(i))return this._returnResult({data:null,error:i});throw i}}}fs.nextInstanceID={};const Ux=fs,$x="2.89.0";let Ri="";typeof Deno<"u"?Ri="deno":typeof document<"u"?Ri="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ri="react-native":Ri="node";const Fx={"X-Client-Info":`supabase-js-${Ri}/${$x}`},Wx={headers:Fx},Zx={schema:"public"},Hx={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Vx={};function ps(e){"@babel/helpers - typeof";return ps=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ps(e)}function qx(e,t){if(ps(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(ps(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Kx(e){var t=qx(e,"string");return ps(t)=="symbol"?t:t+""}function Gx(e,t,n){return(t=Kx(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,i)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$f(Object(n),!0).forEach(function(i){Gx(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$f(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}const Jx=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Qx=()=>Headers,Yx=(e,t,n)=>{const i=Jx(n),o=Qx();return async(a,u)=>{var d;const h=(d=await t())!==null&&d!==void 0?d:e;let m=new o(u==null?void 0:u.headers);return m.has("apikey")||m.set("apikey",e),m.has("Authorization")||m.set("Authorization",`Bearer ${h}`),i(a,ke(ke({},u),{},{headers:m}))}};function Xx(e){return e.endsWith("/")?e:e+"/"}function eb(e,t){var n,i;const{db:o,auth:a,realtime:u,global:d}=e,{db:h,auth:m,realtime:_,global:y}=t,w={db:ke(ke({},h),o),auth:ke(ke({},m),a),realtime:ke(ke({},_),u),storage:{},global:ke(ke(ke({},y),d),{},{headers:ke(ke({},(n=y==null?void 0:y.headers)!==null&&n!==void 0?n:{}),(i=d==null?void 0:d.headers)!==null&&i!==void 0?i:{})}),accessToken:async()=>""};return e.accessToken?w.accessToken=e.accessToken:delete w.accessToken,w}function tb(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Xx(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var nb=class extends Ux{constructor(e){super(e)}},rb=class{constructor(e,t,n){var i,o;this.supabaseUrl=e,this.supabaseKey=t;const a=tb(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const u=`sb-${a.hostname.split(".")[0]}-auth-token`,d={db:Zx,realtime:Vx,auth:ke(ke({},Hx),{},{storageKey:u}),global:Wx},h=eb(n??{},d);if(this.storageKey=(i=h.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=h.global.headers)!==null&&o!==void 0?o:{},h.accessToken)this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(_,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}});else{var m;this.auth=this._initSupabaseAuthClient((m=h.auth)!==null&&m!==void 0?m:{},this.headers,h.global.fetch)}this.fetch=Yx(t,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(ke({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.accessToken&&this.accessToken().then(_=>this.realtime.setAuth(_)).catch(_=>console.warn("Failed to set initial Realtime auth token:",_)),this.rest=new M0(new URL("rest/v1",a).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new Aw(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new O0(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,n;if(e.accessToken)return await e.accessToken();const{data:i}=await e.auth.getSession();return(t=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:i,userStorage:o,storageKey:a,flowType:u,lock:d,debug:h,throwOnError:m},_,y){const w={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new nb({url:this.authUrl.href,headers:ke(ke({},w),_),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:i,userStorage:o,flowType:u,lock:d,debug:h,throwOnError:m,fetch:y,hasCustomAuthorizationHeader:Object.keys(this.headers).some(P=>P.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new X0(this.realtimeUrl.href,ke(ke({},e),{},{params:ke(ke({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const ib=(e,t,n)=>new rb(e,t,n);function sb(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}sb()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const ob="https://focjfmngczjfevhtcsbq.supabase.co",ab="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZvY2pmbW5nY3pqZmV2aHRjc2JxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc3MTA2MTEsImV4cCI6MjA4MzI4NjYxMX0.t_iCIpmiPMW91UQgmyNvALehLDO8QtM3gk6I4PBZpR8",H=ib(ob,ab),wg=R.createContext(void 0);function lb({children:e}){const[t,n]=R.useState(null),[i,o]=R.useState(null),[a,u]=R.useState(!0),[d,h]=R.useState(null);R.useEffect(()=>{const w=async b=>{const{data:k}=await H.from("user_profiles").select("role").eq("id",b).maybeSingle();h((k==null?void 0:k.role)||"user")};H.auth.getSession().then(({data:{session:b}})=>{o(b),n((b==null?void 0:b.user)??null),b!=null&&b.user&&w(b.user.id),u(!1)});const{data:{subscription:P}}=H.auth.onAuthStateChange((b,k)=>{(async()=>(o(k),n((k==null?void 0:k.user)??null),k!=null&&k.user?await w(k.user.id):h(null),u(!1)))()});return()=>P.unsubscribe()},[]);const m=async(w,P)=>{const{error:b}=await H.auth.signInWithPassword({email:w,password:P});return{error:b}},_=async(w,P)=>{const{error:b}=await H.auth.signUp({email:w,password:P});return{error:b}},y=async()=>{await H.auth.signOut()};return f.jsx(wg.Provider,{value:{user:t,session:i,loading:a,userRole:d,signIn:m,signUp:_,signOut:y},children:e})}function fn(){const e=R.useContext(wg);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ub={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cb=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),_e=(e,t)=>{const n=R.forwardRef(({color:i="currentColor",size:o=24,strokeWidth:a=2,absoluteStrokeWidth:u,className:d="",children:h,...m},_)=>R.createElement("svg",{ref:_,...ub,width:o,height:o,stroke:i,strokeWidth:u?Number(a)*24/Number(o):a,className:["lucide",`lucide-${cb(e)}`,d].join(" "),...m},[...t.map(([y,w])=>R.createElement(y,w)),...Array.isArray(h)?h:[h]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hb=_e("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const db=_e("Cable",[["path",{d:"M4 9a2 2 0 0 1-2-2V5h6v2a2 2 0 0 1-2 2Z",key:"1s6oa5"}],["path",{d:"M3 5V3",key:"1k5hjh"}],["path",{d:"M7 5V3",key:"1t1388"}],["path",{d:"M19 15V6.5a3.5 3.5 0 0 0-7 0v11a3.5 3.5 0 0 1-7 0V9",key:"1ytv72"}],["path",{d:"M17 21v-2",key:"ds4u3f"}],["path",{d:"M21 21v-2",key:"eo0ou"}],["path",{d:"M22 19h-6v-2a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2Z",key:"sdz6o8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jc=_e("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fb=_e("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pb=_e("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mb=_e("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gb=_e("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vb=_e("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ff=_e("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _b=_e("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yb=_e("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=_e("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ya=_e("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wb=_e("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xg=_e("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qu=_e("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yo=_e("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=_e("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xb=_e("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bb=_e("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sb=_e("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kb=_e("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eb=_e("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bg=_e("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function Pb(){const[e,t]=R.useState(!1),[n,i]=R.useState(""),[o,a]=R.useState(""),[u,d]=R.useState(""),[h,m]=R.useState(!1),{signIn:_,signUp:y}=fn(),w=async P=>{P.preventDefault(),d(""),m(!0);const{error:b}=e?await y(n,o):await _(n,o);b&&d(b.message),m(!1)};return f.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center p-4",children:f.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-8",children:[f.jsxs("div",{className:"flex flex-col items-center mb-8",children:[f.jsx("div",{className:"bg-blue-600 p-4 rounded-full mb-4",children:f.jsx(_b,{className:"w-12 h-12 text-white"})}),f.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Gerenciamento de Rede"}),f.jsx("p",{className:"text-slate-600 text-center",children:"Sistema de gesto de fibra ptica"})]}),f.jsxs("form",{onSubmit:w,className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Email"}),f.jsx("input",{type:"email",value:n,onChange:P=>i(P.target.value),className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition",placeholder:"seu@email.com",required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Senha"}),f.jsx("input",{type:"password",value:o,onChange:P=>a(P.target.value),className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition",placeholder:"",required:!0,minLength:6})]}),u&&f.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:u}),f.jsx("button",{type:"submit",disabled:h,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 transition disabled:opacity-50 disabled:cursor-not-allowed",children:h?"Carregando...":e?"Criar Conta":"Entrar"})]}),f.jsx("div",{className:"mt-6 text-center",children:f.jsx("button",{onClick:()=>{t(!e),d("")},className:"text-blue-600 hover:text-blue-700 font-medium text-sm",children:e?"J tem uma conta? Entre aqui":"No tem conta? Crie uma agora"})})]})})}async function wa(e,t,n,i,o,a){try{await H.from("audit_logs").insert({user_id:e,user_email:t||"unknown",action:"INSERT",table_name:n,record_id:i,record_name:o,new_data:a})}catch(u){console.error("Erro ao registrar log de insero:",u)}}async function xa(e,t,n,i,o,a,u){try{await H.from("audit_logs").insert({user_id:e,user_email:t||"unknown",action:"UPDATE",table_name:n,record_id:i,record_name:o,old_data:a,new_data:u})}catch(d){console.error("Erro ao registrar log de atualizao:",d)}}async function ba(e,t,n,i,o,a){try{await H.from("audit_logs").insert({user_id:e,user_email:t||"unknown",action:"DELETE",table_name:n,record_id:i,record_name:o,old_data:a})}catch(u){console.error("Erro ao registrar log de excluso:",u)}}function Tb(){const[e,t]=R.useState([]),[n,i]=R.useState(!1),[o,a]=R.useState(null),{user:u}=fn(),[d,h]=R.useState({nome:"",latitude:"",longitude:"",endereco:"",descricao:"",icone:"datacenter"});R.useEffect(()=>{m()},[]);const m=async()=>{const{data:b}=await H.from("pops").select("*").order("created_at",{ascending:!1});b&&t(b)},_=async b=>{b.preventDefault();const k={nome:d.nome,latitude:parseFloat(d.latitude),longitude:parseFloat(d.longitude),endereco:d.endereco,descricao:d.descricao||null,icone:d.icone,created_by:u==null?void 0:u.id};if(o){const N=e.find(g=>g.id===o);await H.from("pops").update(k).eq("id",o),await xa(u==null?void 0:u.id,u==null?void 0:u.email,"pops",o,d.nome,N,k),a(null)}else{const{data:N}=await H.from("pops").insert([k]).select();N&&N[0]&&await wa(u==null?void 0:u.id,u==null?void 0:u.email,"pops",N[0].id,d.nome,k)}h({nome:"",latitude:"",longitude:"",endereco:"",descricao:"",icone:"datacenter"}),i(!1),m(),window.location.reload()},y=b=>{h({nome:b.nome,latitude:b.latitude.toString(),longitude:b.longitude.toString(),endereco:b.endereco,descricao:b.descricao||"",icone:b.icone||"datacenter"}),a(b.id),i(!0)},w=async b=>{if(confirm("Deseja realmente excluir este POP?")){const k=e.find(N=>N.id===b);await H.from("pops").delete().eq("id",b),k&&await ba(u==null?void 0:u.id,u==null?void 0:u.email,"pops",b,k.nome,k),m(),window.location.reload()}},P=()=>{h({nome:"",latitude:"",longitude:"",endereco:"",descricao:"",icone:"datacenter"}),i(!1),a(null)};return f.jsxs("div",{className:"space-y-4",children:[f.jsxs("button",{onClick:()=>i(!n),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg flex items-center justify-center gap-2 transition",children:[f.jsx(ya,{className:"w-5 h-5"}),"Adicionar POP"]}),n&&f.jsxs("form",{onSubmit:_,className:"bg-slate-50 p-4 rounded-lg space-y-3",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Nome"}),f.jsx("input",{type:"text",value:d.nome,onChange:b=>h({...d,nome:b.target.value}),required:!0,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Latitude"}),f.jsx("input",{type:"number",step:"any",value:d.latitude,onChange:b=>h({...d,latitude:b.target.value}),required:!0,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Longitude"}),f.jsx("input",{type:"number",step:"any",value:d.longitude,onChange:b=>h({...d,longitude:b.target.value}),required:!0,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Endereo"}),f.jsx("input",{type:"text",value:d.endereco,onChange:b=>h({...d,endereco:b.target.value}),required:!0,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Descrio"}),f.jsx("textarea",{value:d.descricao,onChange:b=>h({...d,descricao:b.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",rows:2})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Tipo de cone"}),f.jsx("div",{className:"p-3 bg-slate-100 rounded-lg border border-slate-300",children:f.jsxs("p",{className:"text-sm text-slate-700",children:[f.jsx("strong",{children:"Datacenter"})," - Todos os POPs usam o cone de datacenter no mapa"]})})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg transition",children:o?"Atualizar":"Salvar"}),f.jsx("button",{type:"button",onClick:P,className:"flex-1 bg-slate-300 hover:bg-slate-400 text-slate-700 py-2 rounded-lg transition",children:"Cancelar"})]})]}),f.jsx("div",{className:"space-y-2",children:e.map(b=>f.jsx("div",{className:"bg-slate-50 p-3 rounded-lg",children:f.jsxs("div",{className:"flex items-start justify-between",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("h3",{className:"font-semibold text-slate-800",children:b.nome}),f.jsx("p",{className:"text-sm text-slate-600",children:b.endereco}),f.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[b.latitude,", ",b.longitude]})]}),f.jsxs("div",{className:"flex gap-1",children:[f.jsx("button",{onClick:()=>y(b),className:"p-2 text-blue-600 hover:bg-blue-50 rounded transition",children:f.jsx(xs,{className:"w-4 h-4"})}),f.jsx("button",{onClick:()=>w(b.id),className:"p-2 text-red-600 hover:bg-red-50 rounded transition",children:f.jsx(bs,{className:"w-4 h-4"})})]})]})},b.id))})]})}function Sg(e,t){const n=R.useRef(t);R.useEffect(function(){t!==n.current&&e.attributionControl!=null&&(n.current!=null&&e.attributionControl.removeAttribution(n.current),t!=null&&e.attributionControl.addAttribution(t)),n.current=t},[e,t])}const Cb=1;function jb(e){return Object.freeze({__version:Cb,map:e})}function kg(e,t){return Object.freeze({...e,...t})}const Eg=R.createContext(null),Pg=Eg.Provider;function Sa(){const e=R.useContext(Eg);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function Tg(e){function t(n,i){const{instance:o,context:a}=e(n).current;return R.useImperativeHandle(i,()=>o),n.children==null?null:ko.createElement(Pg,{value:a},n.children)}return R.forwardRef(t)}function Nb(e){function t(n,i){const[o,a]=R.useState(!1),{instance:u}=e(n,a).current;R.useImperativeHandle(i,()=>u),R.useEffect(function(){o&&u.update()},[u,o,n.children]);const d=u._contentNode;return d?ng.createPortal(n.children,d):null}return R.forwardRef(t)}function Ob(e){function t(n,i){const{instance:o}=e(n).current;return R.useImperativeHandle(i,()=>o),null}return R.forwardRef(t)}function Qc(e,t){const n=R.useRef();R.useEffect(function(){return t!=null&&e.instance.on(t),n.current=t,function(){n.current!=null&&e.instance.off(n.current),n.current=null}},[e,t])}function ka(e,t){const n=e.pane??t.pane;return n?{...e,pane:n}:e}function Lb(e,t){return function(i,o){const a=Sa(),u=e(ka(i,a),a);return Sg(a.map,i.attribution),Qc(u.current,i.eventHandlers),t(u.current,a,i,o),u}}var Ku={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(n,i){i(t)})(n_,function(n){var i="1.9.4";function o(r){var s,l,c,p;for(l=1,c=arguments.length;l<c;l++){p=arguments[l];for(s in p)r[s]=p[s]}return r}var a=Object.create||function(){function r(){}return function(s){return r.prototype=s,new r}}();function u(r,s){var l=Array.prototype.slice;if(r.bind)return r.bind.apply(r,l.call(arguments,1));var c=l.call(arguments,2);return function(){return r.apply(s,c.length?c.concat(l.call(arguments)):arguments)}}var d=0;function h(r){return"_leaflet_id"in r||(r._leaflet_id=++d),r._leaflet_id}function m(r,s,l){var c,p,v,T;return T=function(){c=!1,p&&(v.apply(l,p),p=!1)},v=function(){c?p=arguments:(r.apply(l,arguments),setTimeout(T,s),c=!0)},v}function _(r,s,l){var c=s[1],p=s[0],v=c-p;return r===c&&l?r:((r-p)%v+v)%v+p}function y(){return!1}function w(r,s){if(s===!1)return r;var l=Math.pow(10,s===void 0?6:s);return Math.round(r*l)/l}function P(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function b(r){return P(r).split(/\s+/)}function k(r,s){Object.prototype.hasOwnProperty.call(r,"options")||(r.options=r.options?a(r.options):{});for(var l in s)r.options[l]=s[l];return r.options}function N(r,s,l){var c=[];for(var p in r)c.push(encodeURIComponent(l?p.toUpperCase():p)+"="+encodeURIComponent(r[p]));return(!s||s.indexOf("?")===-1?"?":"&")+c.join("&")}var g=/\{ *([\w_ -]+) *\}/g;function x(r,s){return r.replace(g,function(l,c){var p=s[c];if(p===void 0)throw new Error("No value provided for variable "+l);return typeof p=="function"&&(p=p(s)),p})}var S=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"};function E(r,s){for(var l=0;l<r.length;l++)if(r[l]===s)return l;return-1}var A="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function O(r){return window["webkit"+r]||window["moz"+r]||window["ms"+r]}var D=0;function $(r){var s=+new Date,l=Math.max(0,16-(s-D));return D=s+l,window.setTimeout(r,l)}var re=window.requestAnimationFrame||O("RequestAnimationFrame")||$,ee=window.cancelAnimationFrame||O("CancelAnimationFrame")||O("CancelRequestAnimationFrame")||function(r){window.clearTimeout(r)};function he(r,s,l){if(l&&re===$)r.call(s);else return re.call(window,u(r,s))}function Me(r){r&&ee.call(window,r)}var Bn={__proto__:null,extend:o,create:a,bind:u,get lastId(){return d},stamp:h,throttle:m,wrapNum:_,falseFn:y,formatNum:w,trim:P,splitWords:b,setOptions:k,getParamString:N,template:x,isArray:S,indexOf:E,emptyImageUrl:A,requestFn:re,cancelFn:ee,requestAnimFrame:he,cancelAnimFrame:Me};function _t(){}_t.extend=function(r){var s=function(){k(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},l=s.__super__=this.prototype,c=a(l);c.constructor=s,s.prototype=c;for(var p in this)Object.prototype.hasOwnProperty.call(this,p)&&p!=="prototype"&&p!=="__super__"&&(s[p]=this[p]);return r.statics&&o(s,r.statics),r.includes&&(Ta(r.includes),o.apply(null,[c].concat(r.includes))),o(c,r),delete c.statics,delete c.includes,c.options&&(c.options=l.options?a(l.options):{},o(c.options,r.options)),c._initHooks=[],c.callInitHooks=function(){if(!this._initHooksCalled){l.callInitHooks&&l.callInitHooks.call(this),this._initHooksCalled=!0;for(var v=0,T=c._initHooks.length;v<T;v++)c._initHooks[v].call(this)}},s},_t.include=function(r){var s=this.prototype.options;return o(this.prototype,r),r.options&&(this.prototype.options=s,this.mergeOptions(r.options)),this},_t.mergeOptions=function(r){return o(this.prototype.options,r),this},_t.addInitHook=function(r){var s=Array.prototype.slice.call(arguments,1),l=typeof r=="function"?r:function(){this[r].apply(this,s)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(l),this};function Ta(r){if(!(typeof L>"u"||!L||!L.Mixin)){r=S(r)?r:[r];for(var s=0;s<r.length;s++)r[s]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Ue={on:function(r,s,l){if(typeof r=="object")for(var c in r)this._on(c,r[c],s);else{r=b(r);for(var p=0,v=r.length;p<v;p++)this._on(r[p],s,l)}return this},off:function(r,s,l){if(!arguments.length)delete this._events;else if(typeof r=="object")for(var c in r)this._off(c,r[c],s);else{r=b(r);for(var p=arguments.length===1,v=0,T=r.length;v<T;v++)p?this._off(r[v]):this._off(r[v],s,l)}return this},_on:function(r,s,l,c){if(typeof s!="function"){console.warn("wrong listener type: "+typeof s);return}if(this._listens(r,s,l)===!1){l===this&&(l=void 0);var p={fn:s,ctx:l};c&&(p.once=!0),this._events=this._events||{},this._events[r]=this._events[r]||[],this._events[r].push(p)}},_off:function(r,s,l){var c,p,v;if(this._events&&(c=this._events[r],!!c)){if(arguments.length===1){if(this._firingCount)for(p=0,v=c.length;p<v;p++)c[p].fn=y;delete this._events[r];return}if(typeof s!="function"){console.warn("wrong listener type: "+typeof s);return}var T=this._listens(r,s,l);if(T!==!1){var C=c[T];this._firingCount&&(C.fn=y,this._events[r]=c=c.slice()),c.splice(T,1)}}},fire:function(r,s,l){if(!this.listens(r,l))return this;var c=o({},s,{type:r,target:this,sourceTarget:s&&s.sourceTarget||this});if(this._events){var p=this._events[r];if(p){this._firingCount=this._firingCount+1||1;for(var v=0,T=p.length;v<T;v++){var C=p[v],j=C.fn;C.once&&this.off(r,j,C.ctx),j.call(C.ctx||this,c)}this._firingCount--}}return l&&this._propagateEvent(c),this},listens:function(r,s,l,c){typeof r!="string"&&console.warn('"string" type argument expected');var p=s;typeof s!="function"&&(c=!!s,p=void 0,l=void 0);var v=this._events&&this._events[r];if(v&&v.length&&this._listens(r,p,l)!==!1)return!0;if(c){for(var T in this._eventParents)if(this._eventParents[T].listens(r,s,l,c))return!0}return!1},_listens:function(r,s,l){if(!this._events)return!1;var c=this._events[r]||[];if(!s)return!!c.length;l===this&&(l=void 0);for(var p=0,v=c.length;p<v;p++)if(c[p].fn===s&&c[p].ctx===l)return p;return!1},once:function(r,s,l){if(typeof r=="object")for(var c in r)this._on(c,r[c],s,!0);else{r=b(r);for(var p=0,v=r.length;p<v;p++)this._on(r[p],s,l,!0)}return this},addEventParent:function(r){return this._eventParents=this._eventParents||{},this._eventParents[h(r)]=r,this},removeEventParent:function(r){return this._eventParents&&delete this._eventParents[h(r)],this},_propagateEvent:function(r){for(var s in this._eventParents)this._eventParents[s].fire(r.type,o({layer:r.target,propagatedFrom:r.target},r),!0)}};Ue.addEventListener=Ue.on,Ue.removeEventListener=Ue.clearAllEventListeners=Ue.off,Ue.addOneTimeEventListener=Ue.once,Ue.fireEvent=Ue.fire,Ue.hasEventListeners=Ue.listens;var Gt=_t.extend(Ue);function I(r,s,l){this.x=l?Math.round(r):r,this.y=l?Math.round(s):s}var J=Math.trunc||function(r){return r>0?Math.floor(r):Math.ceil(r)};I.prototype={clone:function(){return new I(this.x,this.y)},add:function(r){return this.clone()._add(B(r))},_add:function(r){return this.x+=r.x,this.y+=r.y,this},subtract:function(r){return this.clone()._subtract(B(r))},_subtract:function(r){return this.x-=r.x,this.y-=r.y,this},divideBy:function(r){return this.clone()._divideBy(r)},_divideBy:function(r){return this.x/=r,this.y/=r,this},multiplyBy:function(r){return this.clone()._multiplyBy(r)},_multiplyBy:function(r){return this.x*=r,this.y*=r,this},scaleBy:function(r){return new I(this.x*r.x,this.y*r.y)},unscaleBy:function(r){return new I(this.x/r.x,this.y/r.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=J(this.x),this.y=J(this.y),this},distanceTo:function(r){r=B(r);var s=r.x-this.x,l=r.y-this.y;return Math.sqrt(s*s+l*l)},equals:function(r){return r=B(r),r.x===this.x&&r.y===this.y},contains:function(r){return r=B(r),Math.abs(r.x)<=Math.abs(this.x)&&Math.abs(r.y)<=Math.abs(this.y)},toString:function(){return"Point("+w(this.x)+", "+w(this.y)+")"}};function B(r,s,l){return r instanceof I?r:S(r)?new I(r[0],r[1]):r==null?r:typeof r=="object"&&"x"in r&&"y"in r?new I(r.x,r.y):new I(r,s,l)}function G(r,s){if(r)for(var l=s?[r,s]:r,c=0,p=l.length;c<p;c++)this.extend(l[c])}G.prototype={extend:function(r){var s,l;if(!r)return this;if(r instanceof I||typeof r[0]=="number"||"x"in r)s=l=B(r);else if(r=se(r),s=r.min,l=r.max,!s||!l)return this;return!this.min&&!this.max?(this.min=s.clone(),this.max=l.clone()):(this.min.x=Math.min(s.x,this.min.x),this.max.x=Math.max(l.x,this.max.x),this.min.y=Math.min(s.y,this.min.y),this.max.y=Math.max(l.y,this.max.y)),this},getCenter:function(r){return B((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,r)},getBottomLeft:function(){return B(this.min.x,this.max.y)},getTopRight:function(){return B(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(r){var s,l;return typeof r[0]=="number"||r instanceof I?r=B(r):r=se(r),r instanceof G?(s=r.min,l=r.max):s=l=r,s.x>=this.min.x&&l.x<=this.max.x&&s.y>=this.min.y&&l.y<=this.max.y},intersects:function(r){r=se(r);var s=this.min,l=this.max,c=r.min,p=r.max,v=p.x>=s.x&&c.x<=l.x,T=p.y>=s.y&&c.y<=l.y;return v&&T},overlaps:function(r){r=se(r);var s=this.min,l=this.max,c=r.min,p=r.max,v=p.x>s.x&&c.x<l.x,T=p.y>s.y&&c.y<l.y;return v&&T},isValid:function(){return!!(this.min&&this.max)},pad:function(r){var s=this.min,l=this.max,c=Math.abs(s.x-l.x)*r,p=Math.abs(s.y-l.y)*r;return se(B(s.x-c,s.y-p),B(l.x+c,l.y+p))},equals:function(r){return r?(r=se(r),this.min.equals(r.getTopLeft())&&this.max.equals(r.getBottomRight())):!1}};function se(r,s){return!r||r instanceof G?r:new G(r,s)}function Le(r,s){if(r)for(var l=s?[r,s]:r,c=0,p=l.length;c<p;c++)this.extend(l[c])}Le.prototype={extend:function(r){var s=this._southWest,l=this._northEast,c,p;if(r instanceof ae)c=r,p=r;else if(r instanceof Le){if(c=r._southWest,p=r._northEast,!c||!p)return this}else return r?this.extend(Q(r)||ce(r)):this;return!s&&!l?(this._southWest=new ae(c.lat,c.lng),this._northEast=new ae(p.lat,p.lng)):(s.lat=Math.min(c.lat,s.lat),s.lng=Math.min(c.lng,s.lng),l.lat=Math.max(p.lat,l.lat),l.lng=Math.max(p.lng,l.lng)),this},pad:function(r){var s=this._southWest,l=this._northEast,c=Math.abs(s.lat-l.lat)*r,p=Math.abs(s.lng-l.lng)*r;return new Le(new ae(s.lat-c,s.lng-p),new ae(l.lat+c,l.lng+p))},getCenter:function(){return new ae((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ae(this.getNorth(),this.getWest())},getSouthEast:function(){return new ae(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(r){typeof r[0]=="number"||r instanceof ae||"lat"in r?r=Q(r):r=ce(r);var s=this._southWest,l=this._northEast,c,p;return r instanceof Le?(c=r.getSouthWest(),p=r.getNorthEast()):c=p=r,c.lat>=s.lat&&p.lat<=l.lat&&c.lng>=s.lng&&p.lng<=l.lng},intersects:function(r){r=ce(r);var s=this._southWest,l=this._northEast,c=r.getSouthWest(),p=r.getNorthEast(),v=p.lat>=s.lat&&c.lat<=l.lat,T=p.lng>=s.lng&&c.lng<=l.lng;return v&&T},overlaps:function(r){r=ce(r);var s=this._southWest,l=this._northEast,c=r.getSouthWest(),p=r.getNorthEast(),v=p.lat>s.lat&&c.lat<l.lat,T=p.lng>s.lng&&c.lng<l.lng;return v&&T},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(r,s){return r?(r=ce(r),this._southWest.equals(r.getSouthWest(),s)&&this._northEast.equals(r.getNorthEast(),s)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ce(r,s){return r instanceof Le?r:new Le(r,s)}function ae(r,s,l){if(isNaN(r)||isNaN(s))throw new Error("Invalid LatLng object: ("+r+", "+s+")");this.lat=+r,this.lng=+s,l!==void 0&&(this.alt=+l)}ae.prototype={equals:function(r,s){if(!r)return!1;r=Q(r);var l=Math.max(Math.abs(this.lat-r.lat),Math.abs(this.lng-r.lng));return l<=(s===void 0?1e-9:s)},toString:function(r){return"LatLng("+w(this.lat,r)+", "+w(this.lng,r)+")"},distanceTo:function(r){return pn.distance(this,Q(r))},wrap:function(){return pn.wrapLatLng(this)},toBounds:function(r){var s=180*r/40075017,l=s/Math.cos(Math.PI/180*this.lat);return ce([this.lat-s,this.lng-l],[this.lat+s,this.lng+l])},clone:function(){return new ae(this.lat,this.lng,this.alt)}};function Q(r,s,l){return r instanceof ae?r:S(r)&&typeof r[0]!="object"?r.length===3?new ae(r[0],r[1],r[2]):r.length===2?new ae(r[0],r[1]):null:r==null?r:typeof r=="object"&&"lat"in r?new ae(r.lat,"lng"in r?r.lng:r.lon,r.alt):s===void 0?null:new ae(r,s,l)}var nt={latLngToPoint:function(r,s){var l=this.projection.project(r),c=this.scale(s);return this.transformation._transform(l,c)},pointToLatLng:function(r,s){var l=this.scale(s),c=this.transformation.untransform(r,l);return this.projection.unproject(c)},project:function(r){return this.projection.project(r)},unproject:function(r){return this.projection.unproject(r)},scale:function(r){return 256*Math.pow(2,r)},zoom:function(r){return Math.log(r/256)/Math.LN2},getProjectedBounds:function(r){if(this.infinite)return null;var s=this.projection.bounds,l=this.scale(r),c=this.transformation.transform(s.min,l),p=this.transformation.transform(s.max,l);return new G(c,p)},infinite:!1,wrapLatLng:function(r){var s=this.wrapLng?_(r.lng,this.wrapLng,!0):r.lng,l=this.wrapLat?_(r.lat,this.wrapLat,!0):r.lat,c=r.alt;return new ae(l,s,c)},wrapLatLngBounds:function(r){var s=r.getCenter(),l=this.wrapLatLng(s),c=s.lat-l.lat,p=s.lng-l.lng;if(c===0&&p===0)return r;var v=r.getSouthWest(),T=r.getNorthEast(),C=new ae(v.lat-c,v.lng-p),j=new ae(T.lat-c,T.lng-p);return new Le(C,j)}},pn=o({},nt,{wrapLng:[-180,180],R:6371e3,distance:function(r,s){var l=Math.PI/180,c=r.lat*l,p=s.lat*l,v=Math.sin((s.lat-r.lat)*l/2),T=Math.sin((s.lng-r.lng)*l/2),C=v*v+Math.cos(c)*Math.cos(p)*T*T,j=2*Math.atan2(Math.sqrt(C),Math.sqrt(1-C));return this.R*j}}),Xc=6378137,Ca={R:Xc,MAX_LATITUDE:85.0511287798,project:function(r){var s=Math.PI/180,l=this.MAX_LATITUDE,c=Math.max(Math.min(l,r.lat),-l),p=Math.sin(c*s);return new I(this.R*r.lng*s,this.R*Math.log((1+p)/(1-p))/2)},unproject:function(r){var s=180/Math.PI;return new ae((2*Math.atan(Math.exp(r.y/this.R))-Math.PI/2)*s,r.x*s/this.R)},bounds:function(){var r=Xc*Math.PI;return new G([-r,-r],[r,r])}()};function ja(r,s,l,c){if(S(r)){this._a=r[0],this._b=r[1],this._c=r[2],this._d=r[3];return}this._a=r,this._b=s,this._c=l,this._d=c}ja.prototype={transform:function(r,s){return this._transform(r.clone(),s)},_transform:function(r,s){return s=s||1,r.x=s*(this._a*r.x+this._b),r.y=s*(this._c*r.y+this._d),r},untransform:function(r,s){return s=s||1,new I((r.x/s-this._b)/this._a,(r.y/s-this._d)/this._c)}};function ai(r,s,l,c){return new ja(r,s,l,c)}var Na=o({},pn,{code:"EPSG:3857",projection:Ca,transformation:function(){var r=.5/(Math.PI*Ca.R);return ai(r,.5,-r,.5)}()}),Lg=o({},Na,{code:"EPSG:900913"});function eh(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function th(r,s){var l="",c,p,v,T,C,j;for(c=0,v=r.length;c<v;c++){for(C=r[c],p=0,T=C.length;p<T;p++)j=C[p],l+=(p?"L":"M")+j.x+" "+j.y;l+=s?Z.svg?"z":"x":""}return l||"M0 0"}var Oa=document.documentElement.style,ks="ActiveXObject"in window,Ag=ks&&!document.addEventListener,nh="msLaunchUri"in navigator&&!("documentMode"in document),La=Ut("webkit"),rh=Ut("android"),ih=Ut("android 2")||Ut("android 3"),Rg=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ig=rh&&Ut("Google")&&Rg<537&&!("AudioNode"in window),Aa=!!window.opera,sh=!nh&&Ut("chrome"),oh=Ut("gecko")&&!La&&!Aa&&!ks,Mg=!sh&&Ut("safari"),ah=Ut("phantom"),lh="OTransition"in Oa,zg=navigator.platform.indexOf("Win")===0,uh=ks&&"transition"in Oa,Ra="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ih,ch="MozPerspective"in Oa,Dg=!window.L_DISABLE_3D&&(uh||Ra||ch)&&!lh&&!ah,li=typeof orientation<"u"||Ut("mobile"),Bg=li&&La,Ug=li&&Ra,hh=!window.PointerEvent&&window.MSPointerEvent,dh=!!(window.PointerEvent||hh),fh="ontouchstart"in window||!!window.TouchEvent,$g=!window.L_NO_TOUCH&&(fh||dh),Fg=li&&Aa,Wg=li&&oh,Zg=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Hg=function(){var r=!1;try{var s=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("testPassiveEventSupport",y,s),window.removeEventListener("testPassiveEventSupport",y,s)}catch{}return r}(),Vg=function(){return!!document.createElement("canvas").getContext}(),Ia=!!(document.createElementNS&&eh("svg").createSVGRect),qg=!!Ia&&function(){var r=document.createElement("div");return r.innerHTML="<svg/>",(r.firstChild&&r.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Kg=!Ia&&function(){try{var r=document.createElement("div");r.innerHTML='<v:shape adj="1"/>';var s=r.firstChild;return s.style.behavior="url(#default#VML)",s&&typeof s.adj=="object"}catch{return!1}}(),Gg=navigator.platform.indexOf("Mac")===0,Jg=navigator.platform.indexOf("Linux")===0;function Ut(r){return navigator.userAgent.toLowerCase().indexOf(r)>=0}var Z={ie:ks,ielt9:Ag,edge:nh,webkit:La,android:rh,android23:ih,androidStock:Ig,opera:Aa,chrome:sh,gecko:oh,safari:Mg,phantom:ah,opera12:lh,win:zg,ie3d:uh,webkit3d:Ra,gecko3d:ch,any3d:Dg,mobile:li,mobileWebkit:Bg,mobileWebkit3d:Ug,msPointer:hh,pointer:dh,touch:$g,touchNative:fh,mobileOpera:Fg,mobileGecko:Wg,retina:Zg,passiveEvents:Hg,canvas:Vg,svg:Ia,vml:Kg,inlineSvg:qg,mac:Gg,linux:Jg},ph=Z.msPointer?"MSPointerDown":"pointerdown",mh=Z.msPointer?"MSPointerMove":"pointermove",gh=Z.msPointer?"MSPointerUp":"pointerup",vh=Z.msPointer?"MSPointerCancel":"pointercancel",Ma={touchstart:ph,touchmove:mh,touchend:gh,touchcancel:vh},_h={touchstart:nv,touchmove:Es,touchend:Es,touchcancel:Es},hr={},yh=!1;function Qg(r,s,l){return s==="touchstart"&&tv(),_h[s]?(l=_h[s].bind(this,l),r.addEventListener(Ma[s],l,!1),l):(console.warn("wrong event specified:",s),y)}function Yg(r,s,l){if(!Ma[s]){console.warn("wrong event specified:",s);return}r.removeEventListener(Ma[s],l,!1)}function Xg(r){hr[r.pointerId]=r}function ev(r){hr[r.pointerId]&&(hr[r.pointerId]=r)}function wh(r){delete hr[r.pointerId]}function tv(){yh||(document.addEventListener(ph,Xg,!0),document.addEventListener(mh,ev,!0),document.addEventListener(gh,wh,!0),document.addEventListener(vh,wh,!0),yh=!0)}function Es(r,s){if(s.pointerType!==(s.MSPOINTER_TYPE_MOUSE||"mouse")){s.touches=[];for(var l in hr)s.touches.push(hr[l]);s.changedTouches=[s],r(s)}}function nv(r,s){s.MSPOINTER_TYPE_TOUCH&&s.pointerType===s.MSPOINTER_TYPE_TOUCH&&$e(s),Es(r,s)}function rv(r){var s={},l,c;for(c in r)l=r[c],s[c]=l&&l.bind?l.bind(r):l;return r=s,s.type="dblclick",s.detail=2,s.isTrusted=!1,s._simulated=!0,s}var iv=200;function sv(r,s){r.addEventListener("dblclick",s);var l=0,c;function p(v){if(v.detail!==1){c=v.detail;return}if(!(v.pointerType==="mouse"||v.sourceCapabilities&&!v.sourceCapabilities.firesTouchEvents)){var T=Eh(v);if(!(T.some(function(j){return j instanceof HTMLLabelElement&&j.attributes.for})&&!T.some(function(j){return j instanceof HTMLInputElement||j instanceof HTMLSelectElement}))){var C=Date.now();C-l<=iv?(c++,c===2&&s(rv(v))):c=1,l=C}}}return r.addEventListener("click",p),{dblclick:s,simDblclick:p}}function ov(r,s){r.removeEventListener("dblclick",s.dblclick),r.removeEventListener("click",s.simDblclick)}var za=Cs(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ui=Cs(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),xh=ui==="webkitTransition"||ui==="OTransition"?ui+"End":"transitionend";function bh(r){return typeof r=="string"?document.getElementById(r):r}function ci(r,s){var l=r.style[s]||r.currentStyle&&r.currentStyle[s];if((!l||l==="auto")&&document.defaultView){var c=document.defaultView.getComputedStyle(r,null);l=c?c[s]:null}return l==="auto"?null:l}function le(r,s,l){var c=document.createElement(r);return c.className=s||"",l&&l.appendChild(c),c}function ye(r){var s=r.parentNode;s&&s.removeChild(r)}function Ps(r){for(;r.firstChild;)r.removeChild(r.firstChild)}function dr(r){var s=r.parentNode;s&&s.lastChild!==r&&s.appendChild(r)}function fr(r){var s=r.parentNode;s&&s.firstChild!==r&&s.insertBefore(r,s.firstChild)}function Da(r,s){if(r.classList!==void 0)return r.classList.contains(s);var l=Ts(r);return l.length>0&&new RegExp("(^|\\s)"+s+"(\\s|$)").test(l)}function X(r,s){if(r.classList!==void 0)for(var l=b(s),c=0,p=l.length;c<p;c++)r.classList.add(l[c]);else if(!Da(r,s)){var v=Ts(r);Ba(r,(v?v+" ":"")+s)}}function Pe(r,s){r.classList!==void 0?r.classList.remove(s):Ba(r,P((" "+Ts(r)+" ").replace(" "+s+" "," ")))}function Ba(r,s){r.className.baseVal===void 0?r.className=s:r.className.baseVal=s}function Ts(r){return r.correspondingElement&&(r=r.correspondingElement),r.className.baseVal===void 0?r.className:r.className.baseVal}function yt(r,s){"opacity"in r.style?r.style.opacity=s:"filter"in r.style&&av(r,s)}function av(r,s){var l=!1,c="DXImageTransform.Microsoft.Alpha";try{l=r.filters.item(c)}catch{if(s===1)return}s=Math.round(s*100),l?(l.Enabled=s!==100,l.Opacity=s):r.style.filter+=" progid:"+c+"(opacity="+s+")"}function Cs(r){for(var s=document.documentElement.style,l=0;l<r.length;l++)if(r[l]in s)return r[l];return!1}function Un(r,s,l){var c=s||new I(0,0);r.style[za]=(Z.ie3d?"translate("+c.x+"px,"+c.y+"px)":"translate3d("+c.x+"px,"+c.y+"px,0)")+(l?" scale("+l+")":"")}function Ce(r,s){r._leaflet_pos=s,Z.any3d?Un(r,s):(r.style.left=s.x+"px",r.style.top=s.y+"px")}function $n(r){return r._leaflet_pos||new I(0,0)}var hi,di,Ua;if("onselectstart"in document)hi=function(){Y(window,"selectstart",$e)},di=function(){de(window,"selectstart",$e)};else{var fi=Cs(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);hi=function(){if(fi){var r=document.documentElement.style;Ua=r[fi],r[fi]="none"}},di=function(){fi&&(document.documentElement.style[fi]=Ua,Ua=void 0)}}function $a(){Y(window,"dragstart",$e)}function Fa(){de(window,"dragstart",$e)}var js,Wa;function Za(r){for(;r.tabIndex===-1;)r=r.parentNode;r.style&&(Ns(),js=r,Wa=r.style.outlineStyle,r.style.outlineStyle="none",Y(window,"keydown",Ns))}function Ns(){js&&(js.style.outlineStyle=Wa,js=void 0,Wa=void 0,de(window,"keydown",Ns))}function Sh(r){do r=r.parentNode;while((!r.offsetWidth||!r.offsetHeight)&&r!==document.body);return r}function Ha(r){var s=r.getBoundingClientRect();return{x:s.width/r.offsetWidth||1,y:s.height/r.offsetHeight||1,boundingClientRect:s}}var lv={__proto__:null,TRANSFORM:za,TRANSITION:ui,TRANSITION_END:xh,get:bh,getStyle:ci,create:le,remove:ye,empty:Ps,toFront:dr,toBack:fr,hasClass:Da,addClass:X,removeClass:Pe,setClass:Ba,getClass:Ts,setOpacity:yt,testProp:Cs,setTransform:Un,setPosition:Ce,getPosition:$n,get disableTextSelection(){return hi},get enableTextSelection(){return di},disableImageDrag:$a,enableImageDrag:Fa,preventOutline:Za,restoreOutline:Ns,getSizedParentNode:Sh,getScale:Ha};function Y(r,s,l,c){if(s&&typeof s=="object")for(var p in s)qa(r,p,s[p],l);else{s=b(s);for(var v=0,T=s.length;v<T;v++)qa(r,s[v],l,c)}return this}var $t="_leaflet_events";function de(r,s,l,c){if(arguments.length===1)kh(r),delete r[$t];else if(s&&typeof s=="object")for(var p in s)Ka(r,p,s[p],l);else if(s=b(s),arguments.length===2)kh(r,function(C){return E(s,C)!==-1});else for(var v=0,T=s.length;v<T;v++)Ka(r,s[v],l,c);return this}function kh(r,s){for(var l in r[$t]){var c=l.split(/\d/)[0];(!s||s(c))&&Ka(r,c,null,null,l)}}var Va={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function qa(r,s,l,c){var p=s+h(l)+(c?"_"+h(c):"");if(r[$t]&&r[$t][p])return this;var v=function(C){return l.call(c||r,C||window.event)},T=v;!Z.touchNative&&Z.pointer&&s.indexOf("touch")===0?v=Qg(r,s,v):Z.touch&&s==="dblclick"?v=sv(r,v):"addEventListener"in r?s==="touchstart"||s==="touchmove"||s==="wheel"||s==="mousewheel"?r.addEventListener(Va[s]||s,v,Z.passiveEvents?{passive:!1}:!1):s==="mouseenter"||s==="mouseleave"?(v=function(C){C=C||window.event,Ja(r,C)&&T(C)},r.addEventListener(Va[s],v,!1)):r.addEventListener(s,T,!1):r.attachEvent("on"+s,v),r[$t]=r[$t]||{},r[$t][p]=v}function Ka(r,s,l,c,p){p=p||s+h(l)+(c?"_"+h(c):"");var v=r[$t]&&r[$t][p];if(!v)return this;!Z.touchNative&&Z.pointer&&s.indexOf("touch")===0?Yg(r,s,v):Z.touch&&s==="dblclick"?ov(r,v):"removeEventListener"in r?r.removeEventListener(Va[s]||s,v,!1):r.detachEvent("on"+s,v),r[$t][p]=null}function Fn(r){return r.stopPropagation?r.stopPropagation():r.originalEvent?r.originalEvent._stopped=!0:r.cancelBubble=!0,this}function Ga(r){return qa(r,"wheel",Fn),this}function pi(r){return Y(r,"mousedown touchstart dblclick contextmenu",Fn),r._leaflet_disable_click=!0,this}function $e(r){return r.preventDefault?r.preventDefault():r.returnValue=!1,this}function Wn(r){return $e(r),Fn(r),this}function Eh(r){if(r.composedPath)return r.composedPath();for(var s=[],l=r.target;l;)s.push(l),l=l.parentNode;return s}function Ph(r,s){if(!s)return new I(r.clientX,r.clientY);var l=Ha(s),c=l.boundingClientRect;return new I((r.clientX-c.left)/l.x-s.clientLeft,(r.clientY-c.top)/l.y-s.clientTop)}var uv=Z.linux&&Z.chrome?window.devicePixelRatio:Z.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Th(r){return Z.edge?r.wheelDeltaY/2:r.deltaY&&r.deltaMode===0?-r.deltaY/uv:r.deltaY&&r.deltaMode===1?-r.deltaY*20:r.deltaY&&r.deltaMode===2?-r.deltaY*60:r.deltaX||r.deltaZ?0:r.wheelDelta?(r.wheelDeltaY||r.wheelDelta)/2:r.detail&&Math.abs(r.detail)<32765?-r.detail*20:r.detail?r.detail/-32765*60:0}function Ja(r,s){var l=s.relatedTarget;if(!l)return!0;try{for(;l&&l!==r;)l=l.parentNode}catch{return!1}return l!==r}var cv={__proto__:null,on:Y,off:de,stopPropagation:Fn,disableScrollPropagation:Ga,disableClickPropagation:pi,preventDefault:$e,stop:Wn,getPropagationPath:Eh,getMousePosition:Ph,getWheelDelta:Th,isExternalTarget:Ja,addListener:Y,removeListener:de},Ch=Gt.extend({run:function(r,s,l,c){this.stop(),this._el=r,this._inProgress=!0,this._duration=l||.25,this._easeOutPower=1/Math.max(c||.5,.2),this._startPos=$n(r),this._offset=s.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=he(this._animate,this),this._step()},_step:function(r){var s=+new Date-this._startTime,l=this._duration*1e3;s<l?this._runFrame(this._easeOut(s/l),r):(this._runFrame(1),this._complete())},_runFrame:function(r,s){var l=this._startPos.add(this._offset.multiplyBy(r));s&&l._round(),Ce(this._el,l),this.fire("step")},_complete:function(){Me(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(r){return 1-Math.pow(1-r,this._easeOutPower)}}),ie=Gt.extend({options:{crs:Na,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(r,s){s=k(this,s),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(r),this._initLayout(),this._onResize=u(this._onResize,this),this._initEvents(),s.maxBounds&&this.setMaxBounds(s.maxBounds),s.zoom!==void 0&&(this._zoom=this._limitZoom(s.zoom)),s.center&&s.zoom!==void 0&&this.setView(Q(s.center),s.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ui&&Z.any3d&&!Z.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Y(this._proxy,xh,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(r,s,l){if(s=s===void 0?this._zoom:this._limitZoom(s),r=this._limitCenter(Q(r),s,this.options.maxBounds),l=l||{},this._stop(),this._loaded&&!l.reset&&l!==!0){l.animate!==void 0&&(l.zoom=o({animate:l.animate},l.zoom),l.pan=o({animate:l.animate,duration:l.duration},l.pan));var c=this._zoom!==s?this._tryAnimatedZoom&&this._tryAnimatedZoom(r,s,l.zoom):this._tryAnimatedPan(r,l.pan);if(c)return clearTimeout(this._sizeTimer),this}return this._resetView(r,s,l.pan&&l.pan.noMoveStart),this},setZoom:function(r,s){return this._loaded?this.setView(this.getCenter(),r,{zoom:s}):(this._zoom=r,this)},zoomIn:function(r,s){return r=r||(Z.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+r,s)},zoomOut:function(r,s){return r=r||(Z.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-r,s)},setZoomAround:function(r,s,l){var c=this.getZoomScale(s),p=this.getSize().divideBy(2),v=r instanceof I?r:this.latLngToContainerPoint(r),T=v.subtract(p).multiplyBy(1-1/c),C=this.containerPointToLatLng(p.add(T));return this.setView(C,s,{zoom:l})},_getBoundsCenterZoom:function(r,s){s=s||{},r=r.getBounds?r.getBounds():ce(r);var l=B(s.paddingTopLeft||s.padding||[0,0]),c=B(s.paddingBottomRight||s.padding||[0,0]),p=this.getBoundsZoom(r,!1,l.add(c));if(p=typeof s.maxZoom=="number"?Math.min(s.maxZoom,p):p,p===1/0)return{center:r.getCenter(),zoom:p};var v=c.subtract(l).divideBy(2),T=this.project(r.getSouthWest(),p),C=this.project(r.getNorthEast(),p),j=this.unproject(T.add(C).divideBy(2).add(v),p);return{center:j,zoom:p}},fitBounds:function(r,s){if(r=ce(r),!r.isValid())throw new Error("Bounds are not valid.");var l=this._getBoundsCenterZoom(r,s);return this.setView(l.center,l.zoom,s)},fitWorld:function(r){return this.fitBounds([[-90,-180],[90,180]],r)},panTo:function(r,s){return this.setView(r,this._zoom,{pan:s})},panBy:function(r,s){if(r=B(r).round(),s=s||{},!r.x&&!r.y)return this.fire("moveend");if(s.animate!==!0&&!this.getSize().contains(r))return this._resetView(this.unproject(this.project(this.getCenter()).add(r)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ch,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),s.noMoveStart||this.fire("movestart"),s.animate!==!1){X(this._mapPane,"leaflet-pan-anim");var l=this._getMapPanePos().subtract(r).round();this._panAnim.run(this._mapPane,l,s.duration||.25,s.easeLinearity)}else this._rawPanBy(r),this.fire("move").fire("moveend");return this},flyTo:function(r,s,l){if(l=l||{},l.animate===!1||!Z.any3d)return this.setView(r,s,l);this._stop();var c=this.project(this.getCenter()),p=this.project(r),v=this.getSize(),T=this._zoom;r=Q(r),s=s===void 0?T:s;var C=Math.max(v.x,v.y),j=C*this.getZoomScale(T,s),M=p.distanceTo(c)||1,U=1.42,K=U*U;function te(je){var Fs=je?-1:1,Yv=je?j:C,Xv=j*j-C*C+Fs*K*K*M*M,e_=2*Yv*K*M,al=Xv/e_,ld=Math.sqrt(al*al+1)-al,t_=ld<1e-9?-18:Math.log(ld);return t_}function Qe(je){return(Math.exp(je)-Math.exp(-je))/2}function ze(je){return(Math.exp(je)+Math.exp(-je))/2}function xt(je){return Qe(je)/ze(je)}var rt=te(0);function yr(je){return C*(ze(rt)/ze(rt+U*je))}function Kv(je){return C*(ze(rt)*xt(rt+U*je)-Qe(rt))/K}function Gv(je){return 1-Math.pow(1-je,1.5)}var Jv=Date.now(),od=(te(1)-rt)/U,Qv=l.duration?1e3*l.duration:1e3*od*.8;function ad(){var je=(Date.now()-Jv)/Qv,Fs=Gv(je)*od;je<=1?(this._flyToFrame=he(ad,this),this._move(this.unproject(c.add(p.subtract(c).multiplyBy(Kv(Fs)/M)),T),this.getScaleZoom(C/yr(Fs),T),{flyTo:!0})):this._move(r,s)._moveEnd(!0)}return this._moveStart(!0,l.noMoveStart),ad.call(this),this},flyToBounds:function(r,s){var l=this._getBoundsCenterZoom(r,s);return this.flyTo(l.center,l.zoom,s)},setMaxBounds:function(r){return r=ce(r),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),r.isValid()?(this.options.maxBounds=r,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(r){var s=this.options.minZoom;return this.options.minZoom=r,this._loaded&&s!==r&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(r):this},setMaxZoom:function(r){var s=this.options.maxZoom;return this.options.maxZoom=r,this._loaded&&s!==r&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(r):this},panInsideBounds:function(r,s){this._enforcingBounds=!0;var l=this.getCenter(),c=this._limitCenter(l,this._zoom,ce(r));return l.equals(c)||this.panTo(c,s),this._enforcingBounds=!1,this},panInside:function(r,s){s=s||{};var l=B(s.paddingTopLeft||s.padding||[0,0]),c=B(s.paddingBottomRight||s.padding||[0,0]),p=this.project(this.getCenter()),v=this.project(r),T=this.getPixelBounds(),C=se([T.min.add(l),T.max.subtract(c)]),j=C.getSize();if(!C.contains(v)){this._enforcingBounds=!0;var M=v.subtract(C.getCenter()),U=C.extend(v).getSize().subtract(j);p.x+=M.x<0?-U.x:U.x,p.y+=M.y<0?-U.y:U.y,this.panTo(this.unproject(p),s),this._enforcingBounds=!1}return this},invalidateSize:function(r){if(!this._loaded)return this;r=o({animate:!1,pan:!0},r===!0?{animate:!0}:r);var s=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var l=this.getSize(),c=s.divideBy(2).round(),p=l.divideBy(2).round(),v=c.subtract(p);return!v.x&&!v.y?this:(r.animate&&r.pan?this.panBy(v):(r.pan&&this._rawPanBy(v),this.fire("move"),r.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(u(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:s,newSize:l}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(r){if(r=this._locateOptions=o({timeout:1e4,watch:!1},r),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var s=u(this._handleGeolocationResponse,this),l=u(this._handleGeolocationError,this);return r.watch?this._locationWatchId=navigator.geolocation.watchPosition(s,l,r):navigator.geolocation.getCurrentPosition(s,l,r),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(r){if(this._container._leaflet_id){var s=r.code,l=r.message||(s===1?"permission denied":s===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:s,message:"Geolocation error: "+l+"."})}},_handleGeolocationResponse:function(r){if(this._container._leaflet_id){var s=r.coords.latitude,l=r.coords.longitude,c=new ae(s,l),p=c.toBounds(r.coords.accuracy*2),v=this._locateOptions;if(v.setView){var T=this.getBoundsZoom(p);this.setView(c,v.maxZoom?Math.min(T,v.maxZoom):T)}var C={latlng:c,bounds:p,timestamp:r.timestamp};for(var j in r.coords)typeof r.coords[j]=="number"&&(C[j]=r.coords[j]);this.fire("locationfound",C)}},addHandler:function(r,s){if(!s)return this;var l=this[r]=new s(this);return this._handlers.push(l),this.options[r]&&l.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),ye(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Me(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var r;for(r in this._layers)this._layers[r].remove();for(r in this._panes)ye(this._panes[r]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(r,s){var l="leaflet-pane"+(r?" leaflet-"+r.replace("Pane","")+"-pane":""),c=le("div",l,s||this._mapPane);return r&&(this._panes[r]=c),c},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var r=this.getPixelBounds(),s=this.unproject(r.getBottomLeft()),l=this.unproject(r.getTopRight());return new Le(s,l)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(r,s,l){r=ce(r),l=B(l||[0,0]);var c=this.getZoom()||0,p=this.getMinZoom(),v=this.getMaxZoom(),T=r.getNorthWest(),C=r.getSouthEast(),j=this.getSize().subtract(l),M=se(this.project(C,c),this.project(T,c)).getSize(),U=Z.any3d?this.options.zoomSnap:1,K=j.x/M.x,te=j.y/M.y,Qe=s?Math.max(K,te):Math.min(K,te);return c=this.getScaleZoom(Qe,c),U&&(c=Math.round(c/(U/100))*(U/100),c=s?Math.ceil(c/U)*U:Math.floor(c/U)*U),Math.max(p,Math.min(v,c))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new I(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(r,s){var l=this._getTopLeftPoint(r,s);return new G(l,l.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(r){return this.options.crs.getProjectedBounds(r===void 0?this.getZoom():r)},getPane:function(r){return typeof r=="string"?this._panes[r]:r},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(r,s){var l=this.options.crs;return s=s===void 0?this._zoom:s,l.scale(r)/l.scale(s)},getScaleZoom:function(r,s){var l=this.options.crs;s=s===void 0?this._zoom:s;var c=l.zoom(r*l.scale(s));return isNaN(c)?1/0:c},project:function(r,s){return s=s===void 0?this._zoom:s,this.options.crs.latLngToPoint(Q(r),s)},unproject:function(r,s){return s=s===void 0?this._zoom:s,this.options.crs.pointToLatLng(B(r),s)},layerPointToLatLng:function(r){var s=B(r).add(this.getPixelOrigin());return this.unproject(s)},latLngToLayerPoint:function(r){var s=this.project(Q(r))._round();return s._subtract(this.getPixelOrigin())},wrapLatLng:function(r){return this.options.crs.wrapLatLng(Q(r))},wrapLatLngBounds:function(r){return this.options.crs.wrapLatLngBounds(ce(r))},distance:function(r,s){return this.options.crs.distance(Q(r),Q(s))},containerPointToLayerPoint:function(r){return B(r).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(r){return B(r).add(this._getMapPanePos())},containerPointToLatLng:function(r){var s=this.containerPointToLayerPoint(B(r));return this.layerPointToLatLng(s)},latLngToContainerPoint:function(r){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Q(r)))},mouseEventToContainerPoint:function(r){return Ph(r,this._container)},mouseEventToLayerPoint:function(r){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(r))},mouseEventToLatLng:function(r){return this.layerPointToLatLng(this.mouseEventToLayerPoint(r))},_initContainer:function(r){var s=this._container=bh(r);if(s){if(s._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Y(s,"scroll",this._onScroll,this),this._containerId=h(s)},_initLayout:function(){var r=this._container;this._fadeAnimated=this.options.fadeAnimation&&Z.any3d,X(r,"leaflet-container"+(Z.touch?" leaflet-touch":"")+(Z.retina?" leaflet-retina":"")+(Z.ielt9?" leaflet-oldie":"")+(Z.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var s=ci(r,"position");s!=="absolute"&&s!=="relative"&&s!=="fixed"&&s!=="sticky"&&(r.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var r=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ce(this._mapPane,new I(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(X(r.markerPane,"leaflet-zoom-hide"),X(r.shadowPane,"leaflet-zoom-hide"))},_resetView:function(r,s,l){Ce(this._mapPane,new I(0,0));var c=!this._loaded;this._loaded=!0,s=this._limitZoom(s),this.fire("viewprereset");var p=this._zoom!==s;this._moveStart(p,l)._move(r,s)._moveEnd(p),this.fire("viewreset"),c&&this.fire("load")},_moveStart:function(r,s){return r&&this.fire("zoomstart"),s||this.fire("movestart"),this},_move:function(r,s,l,c){s===void 0&&(s=this._zoom);var p=this._zoom!==s;return this._zoom=s,this._lastCenter=r,this._pixelOrigin=this._getNewPixelOrigin(r),c?l&&l.pinch&&this.fire("zoom",l):((p||l&&l.pinch)&&this.fire("zoom",l),this.fire("move",l)),this},_moveEnd:function(r){return r&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Me(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(r){Ce(this._mapPane,this._getMapPanePos().subtract(r))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(r){this._targets={},this._targets[h(this._container)]=this;var s=r?de:Y;s(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&s(window,"resize",this._onResize,this),Z.any3d&&this.options.transform3DLimit&&(r?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Me(this._resizeRequest),this._resizeRequest=he(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var r=this._getMapPanePos();Math.max(Math.abs(r.x),Math.abs(r.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(r,s){for(var l=[],c,p=s==="mouseout"||s==="mouseover",v=r.target||r.srcElement,T=!1;v;){if(c=this._targets[h(v)],c&&(s==="click"||s==="preclick")&&this._draggableMoved(c)){T=!0;break}if(c&&c.listens(s,!0)&&(p&&!Ja(v,r)||(l.push(c),p))||v===this._container)break;v=v.parentNode}return!l.length&&!T&&!p&&this.listens(s,!0)&&(l=[this]),l},_isClickDisabled:function(r){for(;r&&r!==this._container;){if(r._leaflet_disable_click)return!0;r=r.parentNode}},_handleDOMEvent:function(r){var s=r.target||r.srcElement;if(!(!this._loaded||s._leaflet_disable_events||r.type==="click"&&this._isClickDisabled(s))){var l=r.type;l==="mousedown"&&Za(s),this._fireDOMEvent(r,l)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(r,s,l){if(r.type==="click"){var c=o({},r);c.type="preclick",this._fireDOMEvent(c,c.type,l)}var p=this._findEventTargets(r,s);if(l){for(var v=[],T=0;T<l.length;T++)l[T].listens(s,!0)&&v.push(l[T]);p=v.concat(p)}if(p.length){s==="contextmenu"&&$e(r);var C=p[0],j={originalEvent:r};if(r.type!=="keypress"&&r.type!=="keydown"&&r.type!=="keyup"){var M=C.getLatLng&&(!C._radius||C._radius<=10);j.containerPoint=M?this.latLngToContainerPoint(C.getLatLng()):this.mouseEventToContainerPoint(r),j.layerPoint=this.containerPointToLayerPoint(j.containerPoint),j.latlng=M?C.getLatLng():this.layerPointToLatLng(j.layerPoint)}for(T=0;T<p.length;T++)if(p[T].fire(s,j,!0),j.originalEvent._stopped||p[T].options.bubblingMouseEvents===!1&&E(this._mouseEvents,s)!==-1)return}},_draggableMoved:function(r){return r=r.dragging&&r.dragging.enabled()?r:this,r.dragging&&r.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var r=0,s=this._handlers.length;r<s;r++)this._handlers[r].disable()},whenReady:function(r,s){return this._loaded?r.call(s||this,{target:this}):this.on("load",r,s),this},_getMapPanePos:function(){return $n(this._mapPane)||new I(0,0)},_moved:function(){var r=this._getMapPanePos();return r&&!r.equals([0,0])},_getTopLeftPoint:function(r,s){var l=r&&s!==void 0?this._getNewPixelOrigin(r,s):this.getPixelOrigin();return l.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(r,s){var l=this.getSize()._divideBy(2);return this.project(r,s)._subtract(l)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(r,s,l){var c=this._getNewPixelOrigin(l,s);return this.project(r,s)._subtract(c)},_latLngBoundsToNewLayerBounds:function(r,s,l){var c=this._getNewPixelOrigin(l,s);return se([this.project(r.getSouthWest(),s)._subtract(c),this.project(r.getNorthWest(),s)._subtract(c),this.project(r.getSouthEast(),s)._subtract(c),this.project(r.getNorthEast(),s)._subtract(c)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(r){return this.latLngToLayerPoint(r).subtract(this._getCenterLayerPoint())},_limitCenter:function(r,s,l){if(!l)return r;var c=this.project(r,s),p=this.getSize().divideBy(2),v=new G(c.subtract(p),c.add(p)),T=this._getBoundsOffset(v,l,s);return Math.abs(T.x)<=1&&Math.abs(T.y)<=1?r:this.unproject(c.add(T),s)},_limitOffset:function(r,s){if(!s)return r;var l=this.getPixelBounds(),c=new G(l.min.add(r),l.max.add(r));return r.add(this._getBoundsOffset(c,s))},_getBoundsOffset:function(r,s,l){var c=se(this.project(s.getNorthEast(),l),this.project(s.getSouthWest(),l)),p=c.min.subtract(r.min),v=c.max.subtract(r.max),T=this._rebound(p.x,-v.x),C=this._rebound(p.y,-v.y);return new I(T,C)},_rebound:function(r,s){return r+s>0?Math.round(r-s)/2:Math.max(0,Math.ceil(r))-Math.max(0,Math.floor(s))},_limitZoom:function(r){var s=this.getMinZoom(),l=this.getMaxZoom(),c=Z.any3d?this.options.zoomSnap:1;return c&&(r=Math.round(r/c)*c),Math.max(s,Math.min(l,r))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Pe(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(r,s){var l=this._getCenterOffset(r)._trunc();return(s&&s.animate)!==!0&&!this.getSize().contains(l)?!1:(this.panBy(l,s),!0)},_createAnimProxy:function(){var r=this._proxy=le("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(r),this.on("zoomanim",function(s){var l=za,c=this._proxy.style[l];Un(this._proxy,this.project(s.center,s.zoom),this.getZoomScale(s.zoom,1)),c===this._proxy.style[l]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ye(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var r=this.getCenter(),s=this.getZoom();Un(this._proxy,this.project(r,s),this.getZoomScale(s,1))},_catchTransitionEnd:function(r){this._animatingZoom&&r.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(r,s,l){if(this._animatingZoom)return!0;if(l=l||{},!this._zoomAnimated||l.animate===!1||this._nothingToAnimate()||Math.abs(s-this._zoom)>this.options.zoomAnimationThreshold)return!1;var c=this.getZoomScale(s),p=this._getCenterOffset(r)._divideBy(1-1/c);return l.animate!==!0&&!this.getSize().contains(p)?!1:(he(function(){this._moveStart(!0,l.noMoveStart||!1)._animateZoom(r,s,!0)},this),!0)},_animateZoom:function(r,s,l,c){this._mapPane&&(l&&(this._animatingZoom=!0,this._animateToCenter=r,this._animateToZoom=s,X(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:r,zoom:s,noUpdate:c}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(u(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Pe(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function hv(r,s){return new ie(r,s)}var Ct=_t.extend({options:{position:"topright"},initialize:function(r){k(this,r)},getPosition:function(){return this.options.position},setPosition:function(r){var s=this._map;return s&&s.removeControl(this),this.options.position=r,s&&s.addControl(this),this},getContainer:function(){return this._container},addTo:function(r){this.remove(),this._map=r;var s=this._container=this.onAdd(r),l=this.getPosition(),c=r._controlCorners[l];return X(s,"leaflet-control"),l.indexOf("bottom")!==-1?c.insertBefore(s,c.firstChild):c.appendChild(s),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ye(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(r){this._map&&r&&r.screenX>0&&r.screenY>0&&this._map.getContainer().focus()}}),mi=function(r){return new Ct(r)};ie.include({addControl:function(r){return r.addTo(this),this},removeControl:function(r){return r.remove(),this},_initControlPos:function(){var r=this._controlCorners={},s="leaflet-",l=this._controlContainer=le("div",s+"control-container",this._container);function c(p,v){var T=s+p+" "+s+v;r[p+v]=le("div",T,l)}c("top","left"),c("top","right"),c("bottom","left"),c("bottom","right")},_clearControlPos:function(){for(var r in this._controlCorners)ye(this._controlCorners[r]);ye(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var jh=Ct.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(r,s,l,c){return l<c?-1:c<l?1:0}},initialize:function(r,s,l){k(this,l),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var c in r)this._addLayer(r[c],c);for(c in s)this._addLayer(s[c],c,!0)},onAdd:function(r){this._initLayout(),this._update(),this._map=r,r.on("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(r){return Ct.prototype.addTo.call(this,r),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(r,s){return this._addLayer(r,s),this._map?this._update():this},addOverlay:function(r,s){return this._addLayer(r,s,!0),this._map?this._update():this},removeLayer:function(r){r.off("add remove",this._onLayerChange,this);var s=this._getLayer(h(r));return s&&this._layers.splice(this._layers.indexOf(s),1),this._map?this._update():this},expand:function(){X(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var r=this._map.getSize().y-(this._container.offsetTop+50);return r<this._section.clientHeight?(X(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=r+"px"):Pe(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Pe(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var r="leaflet-control-layers",s=this._container=le("div",r),l=this.options.collapsed;s.setAttribute("aria-haspopup",!0),pi(s),Ga(s);var c=this._section=le("section",r+"-list");l&&(this._map.on("click",this.collapse,this),Y(s,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var p=this._layersLink=le("a",r+"-toggle",s);p.href="#",p.title="Layers",p.setAttribute("role","button"),Y(p,{keydown:function(v){v.keyCode===13&&this._expandSafely()},click:function(v){$e(v),this._expandSafely()}},this),l||this.expand(),this._baseLayersList=le("div",r+"-base",c),this._separator=le("div",r+"-separator",c),this._overlaysList=le("div",r+"-overlays",c),s.appendChild(c)},_getLayer:function(r){for(var s=0;s<this._layers.length;s++)if(this._layers[s]&&h(this._layers[s].layer)===r)return this._layers[s]},_addLayer:function(r,s,l){this._map&&r.on("add remove",this._onLayerChange,this),this._layers.push({layer:r,name:s,overlay:l}),this.options.sortLayers&&this._layers.sort(u(function(c,p){return this.options.sortFunction(c.layer,p.layer,c.name,p.name)},this)),this.options.autoZIndex&&r.setZIndex&&(this._lastZIndex++,r.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ps(this._baseLayersList),Ps(this._overlaysList),this._layerControlInputs=[];var r,s,l,c,p=0;for(l=0;l<this._layers.length;l++)c=this._layers[l],this._addItem(c),s=s||c.overlay,r=r||!c.overlay,p+=c.overlay?0:1;return this.options.hideSingleBase&&(r=r&&p>1,this._baseLayersList.style.display=r?"":"none"),this._separator.style.display=s&&r?"":"none",this},_onLayerChange:function(r){this._handlingClick||this._update();var s=this._getLayer(h(r.target)),l=s.overlay?r.type==="add"?"overlayadd":"overlayremove":r.type==="add"?"baselayerchange":null;l&&this._map.fire(l,s)},_createRadioElement:function(r,s){var l='<input type="radio" class="leaflet-control-layers-selector" name="'+r+'"'+(s?' checked="checked"':"")+"/>",c=document.createElement("div");return c.innerHTML=l,c.firstChild},_addItem:function(r){var s=document.createElement("label"),l=this._map.hasLayer(r.layer),c;r.overlay?(c=document.createElement("input"),c.type="checkbox",c.className="leaflet-control-layers-selector",c.defaultChecked=l):c=this._createRadioElement("leaflet-base-layers_"+h(this),l),this._layerControlInputs.push(c),c.layerId=h(r.layer),Y(c,"click",this._onInputClick,this);var p=document.createElement("span");p.innerHTML=" "+r.name;var v=document.createElement("span");s.appendChild(v),v.appendChild(c),v.appendChild(p);var T=r.overlay?this._overlaysList:this._baseLayersList;return T.appendChild(s),this._checkDisabledLayers(),s},_onInputClick:function(){if(!this._preventClick){var r=this._layerControlInputs,s,l,c=[],p=[];this._handlingClick=!0;for(var v=r.length-1;v>=0;v--)s=r[v],l=this._getLayer(s.layerId).layer,s.checked?c.push(l):s.checked||p.push(l);for(v=0;v<p.length;v++)this._map.hasLayer(p[v])&&this._map.removeLayer(p[v]);for(v=0;v<c.length;v++)this._map.hasLayer(c[v])||this._map.addLayer(c[v]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var r=this._layerControlInputs,s,l,c=this._map.getZoom(),p=r.length-1;p>=0;p--)s=r[p],l=this._getLayer(s.layerId).layer,s.disabled=l.options.minZoom!==void 0&&c<l.options.minZoom||l.options.maxZoom!==void 0&&c>l.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var r=this._section;this._preventClick=!0,Y(r,"click",$e),this.expand();var s=this;setTimeout(function(){de(r,"click",$e),s._preventClick=!1})}}),dv=function(r,s,l){return new jh(r,s,l)},Qa=Ct.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(r){var s="leaflet-control-zoom",l=le("div",s+" leaflet-bar"),c=this.options;return this._zoomInButton=this._createButton(c.zoomInText,c.zoomInTitle,s+"-in",l,this._zoomIn),this._zoomOutButton=this._createButton(c.zoomOutText,c.zoomOutTitle,s+"-out",l,this._zoomOut),this._updateDisabled(),r.on("zoomend zoomlevelschange",this._updateDisabled,this),l},onRemove:function(r){r.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(r){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(r.shiftKey?3:1))},_zoomOut:function(r){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(r.shiftKey?3:1))},_createButton:function(r,s,l,c,p){var v=le("a",l,c);return v.innerHTML=r,v.href="#",v.title=s,v.setAttribute("role","button"),v.setAttribute("aria-label",s),pi(v),Y(v,"click",Wn),Y(v,"click",p,this),Y(v,"click",this._refocusOnMap,this),v},_updateDisabled:function(){var r=this._map,s="leaflet-disabled";Pe(this._zoomInButton,s),Pe(this._zoomOutButton,s),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||r._zoom===r.getMinZoom())&&(X(this._zoomOutButton,s),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||r._zoom===r.getMaxZoom())&&(X(this._zoomInButton,s),this._zoomInButton.setAttribute("aria-disabled","true"))}});ie.mergeOptions({zoomControl:!0}),ie.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Qa,this.addControl(this.zoomControl))});var fv=function(r){return new Qa(r)},Nh=Ct.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(r){var s="leaflet-control-scale",l=le("div",s),c=this.options;return this._addScales(c,s+"-line",l),r.on(c.updateWhenIdle?"moveend":"move",this._update,this),r.whenReady(this._update,this),l},onRemove:function(r){r.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(r,s,l){r.metric&&(this._mScale=le("div",s,l)),r.imperial&&(this._iScale=le("div",s,l))},_update:function(){var r=this._map,s=r.getSize().y/2,l=r.distance(r.containerPointToLatLng([0,s]),r.containerPointToLatLng([this.options.maxWidth,s]));this._updateScales(l)},_updateScales:function(r){this.options.metric&&r&&this._updateMetric(r),this.options.imperial&&r&&this._updateImperial(r)},_updateMetric:function(r){var s=this._getRoundNum(r),l=s<1e3?s+" m":s/1e3+" km";this._updateScale(this._mScale,l,s/r)},_updateImperial:function(r){var s=r*3.2808399,l,c,p;s>5280?(l=s/5280,c=this._getRoundNum(l),this._updateScale(this._iScale,c+" mi",c/l)):(p=this._getRoundNum(s),this._updateScale(this._iScale,p+" ft",p/s))},_updateScale:function(r,s,l){r.style.width=Math.round(this.options.maxWidth*l)+"px",r.innerHTML=s},_getRoundNum:function(r){var s=Math.pow(10,(Math.floor(r)+"").length-1),l=r/s;return l=l>=10?10:l>=5?5:l>=3?3:l>=2?2:1,s*l}}),pv=function(r){return new Nh(r)},mv='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ya=Ct.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Z.inlineSvg?mv+" ":"")+"Leaflet</a>"},initialize:function(r){k(this,r),this._attributions={}},onAdd:function(r){r.attributionControl=this,this._container=le("div","leaflet-control-attribution"),pi(this._container);for(var s in r._layers)r._layers[s].getAttribution&&this.addAttribution(r._layers[s].getAttribution());return this._update(),r.on("layeradd",this._addAttribution,this),this._container},onRemove:function(r){r.off("layeradd",this._addAttribution,this)},_addAttribution:function(r){r.layer.getAttribution&&(this.addAttribution(r.layer.getAttribution()),r.layer.once("remove",function(){this.removeAttribution(r.layer.getAttribution())},this))},setPrefix:function(r){return this.options.prefix=r,this._update(),this},addAttribution:function(r){return r?(this._attributions[r]||(this._attributions[r]=0),this._attributions[r]++,this._update(),this):this},removeAttribution:function(r){return r?(this._attributions[r]&&(this._attributions[r]--,this._update()),this):this},_update:function(){if(this._map){var r=[];for(var s in this._attributions)this._attributions[s]&&r.push(s);var l=[];this.options.prefix&&l.push(this.options.prefix),r.length&&l.push(r.join(", ")),this._container.innerHTML=l.join(' <span aria-hidden="true">|</span> ')}}});ie.mergeOptions({attributionControl:!0}),ie.addInitHook(function(){this.options.attributionControl&&new Ya().addTo(this)});var gv=function(r){return new Ya(r)};Ct.Layers=jh,Ct.Zoom=Qa,Ct.Scale=Nh,Ct.Attribution=Ya,mi.layers=dv,mi.zoom=fv,mi.scale=pv,mi.attribution=gv;var Ft=_t.extend({initialize:function(r){this._map=r},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ft.addTo=function(r,s){return r.addHandler(s,this),this};var vv={Events:Ue},Oh=Z.touch?"touchstart mousedown":"mousedown",mn=Gt.extend({options:{clickTolerance:3},initialize:function(r,s,l,c){k(this,c),this._element=r,this._dragStartTarget=s||r,this._preventOutline=l},enable:function(){this._enabled||(Y(this._dragStartTarget,Oh,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(mn._dragging===this&&this.finishDrag(!0),de(this._dragStartTarget,Oh,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(r){if(this._enabled&&(this._moved=!1,!Da(this._element,"leaflet-zoom-anim"))){if(r.touches&&r.touches.length!==1){mn._dragging===this&&this.finishDrag();return}if(!(mn._dragging||r.shiftKey||r.which!==1&&r.button!==1&&!r.touches)&&(mn._dragging=this,this._preventOutline&&Za(this._element),$a(),hi(),!this._moving)){this.fire("down");var s=r.touches?r.touches[0]:r,l=Sh(this._element);this._startPoint=new I(s.clientX,s.clientY),this._startPos=$n(this._element),this._parentScale=Ha(l);var c=r.type==="mousedown";Y(document,c?"mousemove":"touchmove",this._onMove,this),Y(document,c?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(r){if(this._enabled){if(r.touches&&r.touches.length>1){this._moved=!0;return}var s=r.touches&&r.touches.length===1?r.touches[0]:r,l=new I(s.clientX,s.clientY)._subtract(this._startPoint);!l.x&&!l.y||Math.abs(l.x)+Math.abs(l.y)<this.options.clickTolerance||(l.x/=this._parentScale.x,l.y/=this._parentScale.y,$e(r),this._moved||(this.fire("dragstart"),this._moved=!0,X(document.body,"leaflet-dragging"),this._lastTarget=r.target||r.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),X(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(l),this._moving=!0,this._lastEvent=r,this._updatePosition())}},_updatePosition:function(){var r={originalEvent:this._lastEvent};this.fire("predrag",r),Ce(this._element,this._newPos),this.fire("drag",r)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(r){Pe(document.body,"leaflet-dragging"),this._lastTarget&&(Pe(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),de(document,"mousemove touchmove",this._onMove,this),de(document,"mouseup touchend touchcancel",this._onUp,this),Fa(),di();var s=this._moved&&this._moving;this._moving=!1,mn._dragging=!1,s&&this.fire("dragend",{noInertia:r,distance:this._newPos.distanceTo(this._startPos)})}});function Lh(r,s,l){var c,p=[1,4,2,8],v,T,C,j,M,U,K,te;for(v=0,U=r.length;v<U;v++)r[v]._code=Zn(r[v],s);for(C=0;C<4;C++){for(K=p[C],c=[],v=0,U=r.length,T=U-1;v<U;T=v++)j=r[v],M=r[T],j._code&K?M._code&K||(te=Os(M,j,K,s,l),te._code=Zn(te,s),c.push(te)):(M._code&K&&(te=Os(M,j,K,s,l),te._code=Zn(te,s),c.push(te)),c.push(j));r=c}return r}function Ah(r,s){var l,c,p,v,T,C,j,M,U;if(!r||r.length===0)throw new Error("latlngs not passed");wt(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var K=Q([0,0]),te=ce(r),Qe=te.getNorthWest().distanceTo(te.getSouthWest())*te.getNorthEast().distanceTo(te.getNorthWest());Qe<1700&&(K=Xa(r));var ze=r.length,xt=[];for(l=0;l<ze;l++){var rt=Q(r[l]);xt.push(s.project(Q([rt.lat-K.lat,rt.lng-K.lng])))}for(C=j=M=0,l=0,c=ze-1;l<ze;c=l++)p=xt[l],v=xt[c],T=p.y*v.x-v.y*p.x,j+=(p.x+v.x)*T,M+=(p.y+v.y)*T,C+=T*3;C===0?U=xt[0]:U=[j/C,M/C];var yr=s.unproject(B(U));return Q([yr.lat+K.lat,yr.lng+K.lng])}function Xa(r){for(var s=0,l=0,c=0,p=0;p<r.length;p++){var v=Q(r[p]);s+=v.lat,l+=v.lng,c++}return Q([s/c,l/c])}var _v={__proto__:null,clipPolygon:Lh,polygonCenter:Ah,centroid:Xa};function Rh(r,s){if(!s||!r.length)return r.slice();var l=s*s;return r=xv(r,l),r=wv(r,l),r}function Ih(r,s,l){return Math.sqrt(gi(r,s,l,!0))}function yv(r,s,l){return gi(r,s,l)}function wv(r,s){var l=r.length,c=typeof Uint8Array<"u"?Uint8Array:Array,p=new c(l);p[0]=p[l-1]=1,el(r,p,s,0,l-1);var v,T=[];for(v=0;v<l;v++)p[v]&&T.push(r[v]);return T}function el(r,s,l,c,p){var v=0,T,C,j;for(C=c+1;C<=p-1;C++)j=gi(r[C],r[c],r[p],!0),j>v&&(T=C,v=j);v>l&&(s[T]=1,el(r,s,l,c,T),el(r,s,l,T,p))}function xv(r,s){for(var l=[r[0]],c=1,p=0,v=r.length;c<v;c++)bv(r[c],r[p])>s&&(l.push(r[c]),p=c);return p<v-1&&l.push(r[v-1]),l}var Mh;function zh(r,s,l,c,p){var v=c?Mh:Zn(r,l),T=Zn(s,l),C,j,M;for(Mh=T;;){if(!(v|T))return[r,s];if(v&T)return!1;C=v||T,j=Os(r,s,C,l,p),M=Zn(j,l),C===v?(r=j,v=M):(s=j,T=M)}}function Os(r,s,l,c,p){var v=s.x-r.x,T=s.y-r.y,C=c.min,j=c.max,M,U;return l&8?(M=r.x+v*(j.y-r.y)/T,U=j.y):l&4?(M=r.x+v*(C.y-r.y)/T,U=C.y):l&2?(M=j.x,U=r.y+T*(j.x-r.x)/v):l&1&&(M=C.x,U=r.y+T*(C.x-r.x)/v),new I(M,U,p)}function Zn(r,s){var l=0;return r.x<s.min.x?l|=1:r.x>s.max.x&&(l|=2),r.y<s.min.y?l|=4:r.y>s.max.y&&(l|=8),l}function bv(r,s){var l=s.x-r.x,c=s.y-r.y;return l*l+c*c}function gi(r,s,l,c){var p=s.x,v=s.y,T=l.x-p,C=l.y-v,j=T*T+C*C,M;return j>0&&(M=((r.x-p)*T+(r.y-v)*C)/j,M>1?(p=l.x,v=l.y):M>0&&(p+=T*M,v+=C*M)),T=r.x-p,C=r.y-v,c?T*T+C*C:new I(p,v)}function wt(r){return!S(r[0])||typeof r[0][0]!="object"&&typeof r[0][0]<"u"}function Dh(r){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),wt(r)}function Bh(r,s){var l,c,p,v,T,C,j,M;if(!r||r.length===0)throw new Error("latlngs not passed");wt(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var U=Q([0,0]),K=ce(r),te=K.getNorthWest().distanceTo(K.getSouthWest())*K.getNorthEast().distanceTo(K.getNorthWest());te<1700&&(U=Xa(r));var Qe=r.length,ze=[];for(l=0;l<Qe;l++){var xt=Q(r[l]);ze.push(s.project(Q([xt.lat-U.lat,xt.lng-U.lng])))}for(l=0,c=0;l<Qe-1;l++)c+=ze[l].distanceTo(ze[l+1])/2;if(c===0)M=ze[0];else for(l=0,v=0;l<Qe-1;l++)if(T=ze[l],C=ze[l+1],p=T.distanceTo(C),v+=p,v>c){j=(v-c)/p,M=[C.x-j*(C.x-T.x),C.y-j*(C.y-T.y)];break}var rt=s.unproject(B(M));return Q([rt.lat+U.lat,rt.lng+U.lng])}var Sv={__proto__:null,simplify:Rh,pointToSegmentDistance:Ih,closestPointOnSegment:yv,clipSegment:zh,_getEdgeIntersection:Os,_getBitCode:Zn,_sqClosestPointOnSegment:gi,isFlat:wt,_flat:Dh,polylineCenter:Bh},tl={project:function(r){return new I(r.lng,r.lat)},unproject:function(r){return new ae(r.y,r.x)},bounds:new G([-180,-90],[180,90])},nl={R:6378137,R_MINOR:6356752314245179e-9,bounds:new G([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(r){var s=Math.PI/180,l=this.R,c=r.lat*s,p=this.R_MINOR/l,v=Math.sqrt(1-p*p),T=v*Math.sin(c),C=Math.tan(Math.PI/4-c/2)/Math.pow((1-T)/(1+T),v/2);return c=-l*Math.log(Math.max(C,1e-10)),new I(r.lng*s*l,c)},unproject:function(r){for(var s=180/Math.PI,l=this.R,c=this.R_MINOR/l,p=Math.sqrt(1-c*c),v=Math.exp(-r.y/l),T=Math.PI/2-2*Math.atan(v),C=0,j=.1,M;C<15&&Math.abs(j)>1e-7;C++)M=p*Math.sin(T),M=Math.pow((1-M)/(1+M),p/2),j=Math.PI/2-2*Math.atan(v*M)-T,T+=j;return new ae(T*s,r.x*s/l)}},kv={__proto__:null,LonLat:tl,Mercator:nl,SphericalMercator:Ca},Ev=o({},pn,{code:"EPSG:3395",projection:nl,transformation:function(){var r=.5/(Math.PI*nl.R);return ai(r,.5,-r,.5)}()}),Uh=o({},pn,{code:"EPSG:4326",projection:tl,transformation:ai(1/180,1,-1/180,.5)}),Pv=o({},nt,{projection:tl,transformation:ai(1,0,-1,0),scale:function(r){return Math.pow(2,r)},zoom:function(r){return Math.log(r)/Math.LN2},distance:function(r,s){var l=s.lng-r.lng,c=s.lat-r.lat;return Math.sqrt(l*l+c*c)},infinite:!0});nt.Earth=pn,nt.EPSG3395=Ev,nt.EPSG3857=Na,nt.EPSG900913=Lg,nt.EPSG4326=Uh,nt.Simple=Pv;var jt=Gt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(r){return r.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(r){return r&&r.removeLayer(this),this},getPane:function(r){return this._map.getPane(r?this.options[r]||r:this.options.pane)},addInteractiveTarget:function(r){return this._map._targets[h(r)]=this,this},removeInteractiveTarget:function(r){return delete this._map._targets[h(r)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(r){var s=r.target;if(s.hasLayer(this)){if(this._map=s,this._zoomAnimated=s._zoomAnimated,this.getEvents){var l=this.getEvents();s.on(l,this),this.once("remove",function(){s.off(l,this)},this)}this.onAdd(s),this.fire("add"),s.fire("layeradd",{layer:this})}}});ie.include({addLayer:function(r){if(!r._layerAdd)throw new Error("The provided object is not a Layer.");var s=h(r);return this._layers[s]?this:(this._layers[s]=r,r._mapToAdd=this,r.beforeAdd&&r.beforeAdd(this),this.whenReady(r._layerAdd,r),this)},removeLayer:function(r){var s=h(r);return this._layers[s]?(this._loaded&&r.onRemove(this),delete this._layers[s],this._loaded&&(this.fire("layerremove",{layer:r}),r.fire("remove")),r._map=r._mapToAdd=null,this):this},hasLayer:function(r){return h(r)in this._layers},eachLayer:function(r,s){for(var l in this._layers)r.call(s,this._layers[l]);return this},_addLayers:function(r){r=r?S(r)?r:[r]:[];for(var s=0,l=r.length;s<l;s++)this.addLayer(r[s])},_addZoomLimit:function(r){(!isNaN(r.options.maxZoom)||!isNaN(r.options.minZoom))&&(this._zoomBoundLayers[h(r)]=r,this._updateZoomLevels())},_removeZoomLimit:function(r){var s=h(r);this._zoomBoundLayers[s]&&(delete this._zoomBoundLayers[s],this._updateZoomLevels())},_updateZoomLevels:function(){var r=1/0,s=-1/0,l=this._getZoomSpan();for(var c in this._zoomBoundLayers){var p=this._zoomBoundLayers[c].options;r=p.minZoom===void 0?r:Math.min(r,p.minZoom),s=p.maxZoom===void 0?s:Math.max(s,p.maxZoom)}this._layersMaxZoom=s===-1/0?void 0:s,this._layersMinZoom=r===1/0?void 0:r,l!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var pr=jt.extend({initialize:function(r,s){k(this,s),this._layers={};var l,c;if(r)for(l=0,c=r.length;l<c;l++)this.addLayer(r[l])},addLayer:function(r){var s=this.getLayerId(r);return this._layers[s]=r,this._map&&this._map.addLayer(r),this},removeLayer:function(r){var s=r in this._layers?r:this.getLayerId(r);return this._map&&this._layers[s]&&this._map.removeLayer(this._layers[s]),delete this._layers[s],this},hasLayer:function(r){var s=typeof r=="number"?r:this.getLayerId(r);return s in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(r){var s=Array.prototype.slice.call(arguments,1),l,c;for(l in this._layers)c=this._layers[l],c[r]&&c[r].apply(c,s);return this},onAdd:function(r){this.eachLayer(r.addLayer,r)},onRemove:function(r){this.eachLayer(r.removeLayer,r)},eachLayer:function(r,s){for(var l in this._layers)r.call(s,this._layers[l]);return this},getLayer:function(r){return this._layers[r]},getLayers:function(){var r=[];return this.eachLayer(r.push,r),r},setZIndex:function(r){return this.invoke("setZIndex",r)},getLayerId:function(r){return h(r)}}),Tv=function(r,s){return new pr(r,s)},Jt=pr.extend({addLayer:function(r){return this.hasLayer(r)?this:(r.addEventParent(this),pr.prototype.addLayer.call(this,r),this.fire("layeradd",{layer:r}))},removeLayer:function(r){return this.hasLayer(r)?(r in this._layers&&(r=this._layers[r]),r.removeEventParent(this),pr.prototype.removeLayer.call(this,r),this.fire("layerremove",{layer:r})):this},setStyle:function(r){return this.invoke("setStyle",r)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var r=new Le;for(var s in this._layers){var l=this._layers[s];r.extend(l.getBounds?l.getBounds():l.getLatLng())}return r}}),Cv=function(r,s){return new Jt(r,s)},mr=_t.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(r){k(this,r)},createIcon:function(r){return this._createIcon("icon",r)},createShadow:function(r){return this._createIcon("shadow",r)},_createIcon:function(r,s){var l=this._getIconUrl(r);if(!l){if(r==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var c=this._createImg(l,s&&s.tagName==="IMG"?s:null);return this._setIconStyles(c,r),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),c},_setIconStyles:function(r,s){var l=this.options,c=l[s+"Size"];typeof c=="number"&&(c=[c,c]);var p=B(c),v=B(s==="shadow"&&l.shadowAnchor||l.iconAnchor||p&&p.divideBy(2,!0));r.className="leaflet-marker-"+s+" "+(l.className||""),v&&(r.style.marginLeft=-v.x+"px",r.style.marginTop=-v.y+"px"),p&&(r.style.width=p.x+"px",r.style.height=p.y+"px")},_createImg:function(r,s){return s=s||document.createElement("img"),s.src=r,s},_getIconUrl:function(r){return Z.retina&&this.options[r+"RetinaUrl"]||this.options[r+"Url"]}});function jv(r){return new mr(r)}var vi=mr.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(r){return typeof vi.imagePath!="string"&&(vi.imagePath=this._detectIconPath()),(this.options.imagePath||vi.imagePath)+mr.prototype._getIconUrl.call(this,r)},_stripUrl:function(r){var s=function(l,c,p){var v=c.exec(l);return v&&v[p]};return r=s(r,/^url\((['"])?(.+)\1\)$/,2),r&&s(r,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var r=le("div","leaflet-default-icon-path",document.body),s=ci(r,"background-image")||ci(r,"backgroundImage");if(document.body.removeChild(r),s=this._stripUrl(s),s)return s;var l=document.querySelector('link[href$="leaflet.css"]');return l?l.href.substring(0,l.href.length-11-1):""}}),$h=Ft.extend({initialize:function(r){this._marker=r},addHooks:function(){var r=this._marker._icon;this._draggable||(this._draggable=new mn(r,r,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),X(r,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Pe(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(r){var s=this._marker,l=s._map,c=this._marker.options.autoPanSpeed,p=this._marker.options.autoPanPadding,v=$n(s._icon),T=l.getPixelBounds(),C=l.getPixelOrigin(),j=se(T.min._subtract(C).add(p),T.max._subtract(C).subtract(p));if(!j.contains(v)){var M=B((Math.max(j.max.x,v.x)-j.max.x)/(T.max.x-j.max.x)-(Math.min(j.min.x,v.x)-j.min.x)/(T.min.x-j.min.x),(Math.max(j.max.y,v.y)-j.max.y)/(T.max.y-j.max.y)-(Math.min(j.min.y,v.y)-j.min.y)/(T.min.y-j.min.y)).multiplyBy(c);l.panBy(M,{animate:!1}),this._draggable._newPos._add(M),this._draggable._startPos._add(M),Ce(s._icon,this._draggable._newPos),this._onDrag(r),this._panRequest=he(this._adjustPan.bind(this,r))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(r){this._marker.options.autoPan&&(Me(this._panRequest),this._panRequest=he(this._adjustPan.bind(this,r)))},_onDrag:function(r){var s=this._marker,l=s._shadow,c=$n(s._icon),p=s._map.layerPointToLatLng(c);l&&Ce(l,c),s._latlng=p,r.latlng=p,r.oldLatLng=this._oldLatLng,s.fire("move",r).fire("drag",r)},_onDragEnd:function(r){Me(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",r)}}),Ls=jt.extend({options:{icon:new vi,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(r,s){k(this,s),this._latlng=Q(r)},onAdd:function(r){this._zoomAnimated=this._zoomAnimated&&r.options.markerZoomAnimation,this._zoomAnimated&&r.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(r){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&r.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(r){var s=this._latlng;return this._latlng=Q(r),this.update(),this.fire("move",{oldLatLng:s,latlng:this._latlng})},setZIndexOffset:function(r){return this.options.zIndexOffset=r,this.update()},getIcon:function(){return this.options.icon},setIcon:function(r){return this.options.icon=r,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var r=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(r)}return this},_initIcon:function(){var r=this.options,s="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),l=r.icon.createIcon(this._icon),c=!1;l!==this._icon&&(this._icon&&this._removeIcon(),c=!0,r.title&&(l.title=r.title),l.tagName==="IMG"&&(l.alt=r.alt||"")),X(l,s),r.keyboard&&(l.tabIndex="0",l.setAttribute("role","button")),this._icon=l,r.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Y(l,"focus",this._panOnFocus,this);var p=r.icon.createShadow(this._shadow),v=!1;p!==this._shadow&&(this._removeShadow(),v=!0),p&&(X(p,s),p.alt=""),this._shadow=p,r.opacity<1&&this._updateOpacity(),c&&this.getPane().appendChild(this._icon),this._initInteraction(),p&&v&&this.getPane(r.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&de(this._icon,"focus",this._panOnFocus,this),ye(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ye(this._shadow),this._shadow=null},_setPos:function(r){this._icon&&Ce(this._icon,r),this._shadow&&Ce(this._shadow,r),this._zIndex=r.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(r){this._icon&&(this._icon.style.zIndex=this._zIndex+r)},_animateZoom:function(r){var s=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center).round();this._setPos(s)},_initInteraction:function(){if(this.options.interactive&&(X(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),$h)){var r=this.options.draggable;this.dragging&&(r=this.dragging.enabled(),this.dragging.disable()),this.dragging=new $h(this),r&&this.dragging.enable()}},setOpacity:function(r){return this.options.opacity=r,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var r=this.options.opacity;this._icon&&yt(this._icon,r),this._shadow&&yt(this._shadow,r)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var r=this._map;if(r){var s=this.options.icon.options,l=s.iconSize?B(s.iconSize):B(0,0),c=s.iconAnchor?B(s.iconAnchor):B(0,0);r.panInside(this._latlng,{paddingTopLeft:c,paddingBottomRight:l.subtract(c)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Nv(r,s){return new Ls(r,s)}var gn=jt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(r){this._renderer=r.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(r){return k(this,r),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&r&&Object.prototype.hasOwnProperty.call(r,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),As=gn.extend({options:{fill:!0,radius:10},initialize:function(r,s){k(this,s),this._latlng=Q(r),this._radius=this.options.radius},setLatLng:function(r){var s=this._latlng;return this._latlng=Q(r),this.redraw(),this.fire("move",{oldLatLng:s,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(r){return this.options.radius=this._radius=r,this.redraw()},getRadius:function(){return this._radius},setStyle:function(r){var s=r&&r.radius||this._radius;return gn.prototype.setStyle.call(this,r),this.setRadius(s),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var r=this._radius,s=this._radiusY||r,l=this._clickTolerance(),c=[r+l,s+l];this._pxBounds=new G(this._point.subtract(c),this._point.add(c))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(r){return r.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Ov(r,s){return new As(r,s)}var rl=As.extend({initialize:function(r,s,l){if(typeof s=="number"&&(s=o({},l,{radius:s})),k(this,s),this._latlng=Q(r),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(r){return this._mRadius=r,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var r=[this._radius,this._radiusY||this._radius];return new Le(this._map.layerPointToLatLng(this._point.subtract(r)),this._map.layerPointToLatLng(this._point.add(r)))},setStyle:gn.prototype.setStyle,_project:function(){var r=this._latlng.lng,s=this._latlng.lat,l=this._map,c=l.options.crs;if(c.distance===pn.distance){var p=Math.PI/180,v=this._mRadius/pn.R/p,T=l.project([s+v,r]),C=l.project([s-v,r]),j=T.add(C).divideBy(2),M=l.unproject(j).lat,U=Math.acos((Math.cos(v*p)-Math.sin(s*p)*Math.sin(M*p))/(Math.cos(s*p)*Math.cos(M*p)))/p;(isNaN(U)||U===0)&&(U=v/Math.cos(Math.PI/180*s)),this._point=j.subtract(l.getPixelOrigin()),this._radius=isNaN(U)?0:j.x-l.project([M,r-U]).x,this._radiusY=j.y-T.y}else{var K=c.unproject(c.project(this._latlng).subtract([this._mRadius,0]));this._point=l.latLngToLayerPoint(this._latlng),this._radius=this._point.x-l.latLngToLayerPoint(K).x}this._updateBounds()}});function Lv(r,s,l){return new rl(r,s,l)}var Qt=gn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(r,s){k(this,s),this._setLatLngs(r)},getLatLngs:function(){return this._latlngs},setLatLngs:function(r){return this._setLatLngs(r),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(r){for(var s=1/0,l=null,c=gi,p,v,T=0,C=this._parts.length;T<C;T++)for(var j=this._parts[T],M=1,U=j.length;M<U;M++){p=j[M-1],v=j[M];var K=c(r,p,v,!0);K<s&&(s=K,l=c(r,p,v))}return l&&(l.distance=Math.sqrt(s)),l},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Bh(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(r,s){return s=s||this._defaultShape(),r=Q(r),s.push(r),this._bounds.extend(r),this.redraw()},_setLatLngs:function(r){this._bounds=new Le,this._latlngs=this._convertLatLngs(r)},_defaultShape:function(){return wt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(r){for(var s=[],l=wt(r),c=0,p=r.length;c<p;c++)l?(s[c]=Q(r[c]),this._bounds.extend(s[c])):s[c]=this._convertLatLngs(r[c]);return s},_project:function(){var r=new G;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,r),this._bounds.isValid()&&r.isValid()&&(this._rawPxBounds=r,this._updateBounds())},_updateBounds:function(){var r=this._clickTolerance(),s=new I(r,r);this._rawPxBounds&&(this._pxBounds=new G([this._rawPxBounds.min.subtract(s),this._rawPxBounds.max.add(s)]))},_projectLatlngs:function(r,s,l){var c=r[0]instanceof ae,p=r.length,v,T;if(c){for(T=[],v=0;v<p;v++)T[v]=this._map.latLngToLayerPoint(r[v]),l.extend(T[v]);s.push(T)}else for(v=0;v<p;v++)this._projectLatlngs(r[v],s,l)},_clipPoints:function(){var r=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}var s=this._parts,l,c,p,v,T,C,j;for(l=0,p=0,v=this._rings.length;l<v;l++)for(j=this._rings[l],c=0,T=j.length;c<T-1;c++)C=zh(j[c],j[c+1],r,c,!0),C&&(s[p]=s[p]||[],s[p].push(C[0]),(C[1]!==j[c+1]||c===T-2)&&(s[p].push(C[1]),p++))}},_simplifyPoints:function(){for(var r=this._parts,s=this.options.smoothFactor,l=0,c=r.length;l<c;l++)r[l]=Rh(r[l],s)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(r,s){var l,c,p,v,T,C,j=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(l=0,v=this._parts.length;l<v;l++)for(C=this._parts[l],c=0,T=C.length,p=T-1;c<T;p=c++)if(!(!s&&c===0)&&Ih(r,C[p],C[c])<=j)return!0;return!1}});function Av(r,s){return new Qt(r,s)}Qt._flat=Dh;var gr=Qt.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ah(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(r){var s=Qt.prototype._convertLatLngs.call(this,r),l=s.length;return l>=2&&s[0]instanceof ae&&s[0].equals(s[l-1])&&s.pop(),s},_setLatLngs:function(r){Qt.prototype._setLatLngs.call(this,r),wt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return wt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var r=this._renderer._bounds,s=this.options.weight,l=new I(s,s);if(r=new G(r.min.subtract(l),r.max.add(l)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}for(var c=0,p=this._rings.length,v;c<p;c++)v=Lh(this._rings[c],r,!0),v.length&&this._parts.push(v)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(r){var s=!1,l,c,p,v,T,C,j,M;if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(v=0,j=this._parts.length;v<j;v++)for(l=this._parts[v],T=0,M=l.length,C=M-1;T<M;C=T++)c=l[T],p=l[C],c.y>r.y!=p.y>r.y&&r.x<(p.x-c.x)*(r.y-c.y)/(p.y-c.y)+c.x&&(s=!s);return s||Qt.prototype._containsPoint.call(this,r,!0)}});function Rv(r,s){return new gr(r,s)}var Yt=Jt.extend({initialize:function(r,s){k(this,s),this._layers={},r&&this.addData(r)},addData:function(r){var s=S(r)?r:r.features,l,c,p;if(s){for(l=0,c=s.length;l<c;l++)p=s[l],(p.geometries||p.geometry||p.features||p.coordinates)&&this.addData(p);return this}var v=this.options;if(v.filter&&!v.filter(r))return this;var T=Rs(r,v);return T?(T.feature=zs(r),T.defaultOptions=T.options,this.resetStyle(T),v.onEachFeature&&v.onEachFeature(r,T),this.addLayer(T)):this},resetStyle:function(r){return r===void 0?this.eachLayer(this.resetStyle,this):(r.options=o({},r.defaultOptions),this._setLayerStyle(r,this.options.style),this)},setStyle:function(r){return this.eachLayer(function(s){this._setLayerStyle(s,r)},this)},_setLayerStyle:function(r,s){r.setStyle&&(typeof s=="function"&&(s=s(r.feature)),r.setStyle(s))}});function Rs(r,s){var l=r.type==="Feature"?r.geometry:r,c=l?l.coordinates:null,p=[],v=s&&s.pointToLayer,T=s&&s.coordsToLatLng||il,C,j,M,U;if(!c&&!l)return null;switch(l.type){case"Point":return C=T(c),Fh(v,r,C,s);case"MultiPoint":for(M=0,U=c.length;M<U;M++)C=T(c[M]),p.push(Fh(v,r,C,s));return new Jt(p);case"LineString":case"MultiLineString":return j=Is(c,l.type==="LineString"?0:1,T),new Qt(j,s);case"Polygon":case"MultiPolygon":return j=Is(c,l.type==="Polygon"?1:2,T),new gr(j,s);case"GeometryCollection":for(M=0,U=l.geometries.length;M<U;M++){var K=Rs({geometry:l.geometries[M],type:"Feature",properties:r.properties},s);K&&p.push(K)}return new Jt(p);case"FeatureCollection":for(M=0,U=l.features.length;M<U;M++){var te=Rs(l.features[M],s);te&&p.push(te)}return new Jt(p);default:throw new Error("Invalid GeoJSON object.")}}function Fh(r,s,l,c){return r?r(s,l):new Ls(l,c&&c.markersInheritOptions&&c)}function il(r){return new ae(r[1],r[0],r[2])}function Is(r,s,l){for(var c=[],p=0,v=r.length,T;p<v;p++)T=s?Is(r[p],s-1,l):(l||il)(r[p]),c.push(T);return c}function sl(r,s){return r=Q(r),r.alt!==void 0?[w(r.lng,s),w(r.lat,s),w(r.alt,s)]:[w(r.lng,s),w(r.lat,s)]}function Ms(r,s,l,c){for(var p=[],v=0,T=r.length;v<T;v++)p.push(s?Ms(r[v],wt(r[v])?0:s-1,l,c):sl(r[v],c));return!s&&l&&p.length>0&&p.push(p[0].slice()),p}function vr(r,s){return r.feature?o({},r.feature,{geometry:s}):zs(s)}function zs(r){return r.type==="Feature"||r.type==="FeatureCollection"?r:{type:"Feature",properties:{},geometry:r}}var ol={toGeoJSON:function(r){return vr(this,{type:"Point",coordinates:sl(this.getLatLng(),r)})}};Ls.include(ol),rl.include(ol),As.include(ol),Qt.include({toGeoJSON:function(r){var s=!wt(this._latlngs),l=Ms(this._latlngs,s?1:0,!1,r);return vr(this,{type:(s?"Multi":"")+"LineString",coordinates:l})}}),gr.include({toGeoJSON:function(r){var s=!wt(this._latlngs),l=s&&!wt(this._latlngs[0]),c=Ms(this._latlngs,l?2:s?1:0,!0,r);return s||(c=[c]),vr(this,{type:(l?"Multi":"")+"Polygon",coordinates:c})}}),pr.include({toMultiPoint:function(r){var s=[];return this.eachLayer(function(l){s.push(l.toGeoJSON(r).geometry.coordinates)}),vr(this,{type:"MultiPoint",coordinates:s})},toGeoJSON:function(r){var s=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(s==="MultiPoint")return this.toMultiPoint(r);var l=s==="GeometryCollection",c=[];return this.eachLayer(function(p){if(p.toGeoJSON){var v=p.toGeoJSON(r);if(l)c.push(v.geometry);else{var T=zs(v);T.type==="FeatureCollection"?c.push.apply(c,T.features):c.push(T)}}}),l?vr(this,{geometries:c,type:"GeometryCollection"}):{type:"FeatureCollection",features:c}}});function Wh(r,s){return new Yt(r,s)}var Iv=Wh,Ds=jt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(r,s,l){this._url=r,this._bounds=ce(s),k(this,l)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(X(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ye(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(r){return this.options.opacity=r,this._image&&this._updateOpacity(),this},setStyle:function(r){return r.opacity&&this.setOpacity(r.opacity),this},bringToFront:function(){return this._map&&dr(this._image),this},bringToBack:function(){return this._map&&fr(this._image),this},setUrl:function(r){return this._url=r,this._image&&(this._image.src=r),this},setBounds:function(r){return this._bounds=ce(r),this._map&&this._reset(),this},getEvents:function(){var r={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var r=this._url.tagName==="IMG",s=this._image=r?this._url:le("img");if(X(s,"leaflet-image-layer"),this._zoomAnimated&&X(s,"leaflet-zoom-animated"),this.options.className&&X(s,this.options.className),s.onselectstart=y,s.onmousemove=y,s.onload=u(this.fire,this,"load"),s.onerror=u(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(s.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),r){this._url=s.src;return}s.src=this._url,s.alt=this.options.alt},_animateZoom:function(r){var s=this._map.getZoomScale(r.zoom),l=this._map._latLngBoundsToNewLayerBounds(this._bounds,r.zoom,r.center).min;Un(this._image,l,s)},_reset:function(){var r=this._image,s=new G(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),l=s.getSize();Ce(r,s.min),r.style.width=l.x+"px",r.style.height=l.y+"px"},_updateOpacity:function(){yt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var r=this.options.errorOverlayUrl;r&&this._url!==r&&(this._url=r,this._image.src=r)},getCenter:function(){return this._bounds.getCenter()}}),Mv=function(r,s,l){return new Ds(r,s,l)},Zh=Ds.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var r=this._url.tagName==="VIDEO",s=this._image=r?this._url:le("video");if(X(s,"leaflet-image-layer"),this._zoomAnimated&&X(s,"leaflet-zoom-animated"),this.options.className&&X(s,this.options.className),s.onselectstart=y,s.onmousemove=y,s.onloadeddata=u(this.fire,this,"load"),r){for(var l=s.getElementsByTagName("source"),c=[],p=0;p<l.length;p++)c.push(l[p].src);this._url=l.length>0?c:[s.src];return}S(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(s.style,"objectFit")&&(s.style.objectFit="fill"),s.autoplay=!!this.options.autoplay,s.loop=!!this.options.loop,s.muted=!!this.options.muted,s.playsInline=!!this.options.playsInline;for(var v=0;v<this._url.length;v++){var T=le("source");T.src=this._url[v],s.appendChild(T)}}});function zv(r,s,l){return new Zh(r,s,l)}var Hh=Ds.extend({_initImage:function(){var r=this._image=this._url;X(r,"leaflet-image-layer"),this._zoomAnimated&&X(r,"leaflet-zoom-animated"),this.options.className&&X(r,this.options.className),r.onselectstart=y,r.onmousemove=y}});function Dv(r,s,l){return new Hh(r,s,l)}var Wt=jt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(r,s){r&&(r instanceof ae||S(r))?(this._latlng=Q(r),k(this,s)):(k(this,r),this._source=s),this.options.content&&(this._content=this.options.content)},openOn:function(r){return r=arguments.length?r:this._source._map,r.hasLayer(this)||r.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(r){return this._map?this.close():(arguments.length?this._source=r:r=this._source,this._prepareOpen(),this.openOn(r._map)),this},onAdd:function(r){this._zoomAnimated=r._zoomAnimated,this._container||this._initLayout(),r._fadeAnimated&&yt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),r._fadeAnimated&&yt(this._container,1),this.bringToFront(),this.options.interactive&&(X(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(r){r._fadeAnimated?(yt(this._container,0),this._removeTimeout=setTimeout(u(ye,void 0,this._container),200)):ye(this._container),this.options.interactive&&(Pe(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(r){return this._latlng=Q(r),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(r){return this._content=r,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var r={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&dr(this._container),this},bringToBack:function(){return this._map&&fr(this._container),this},_prepareOpen:function(r){var s=this._source;if(!s._map)return!1;if(s instanceof Jt){s=null;var l=this._source._layers;for(var c in l)if(l[c]._map){s=l[c];break}if(!s)return!1;this._source=s}if(!r)if(s.getCenter)r=s.getCenter();else if(s.getLatLng)r=s.getLatLng();else if(s.getBounds)r=s.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(r),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var r=this._contentNode,s=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof s=="string")r.innerHTML=s;else{for(;r.hasChildNodes();)r.removeChild(r.firstChild);r.appendChild(s)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var r=this._map.latLngToLayerPoint(this._latlng),s=B(this.options.offset),l=this._getAnchor();this._zoomAnimated?Ce(this._container,r.add(l)):s=s.add(r).add(l);var c=this._containerBottom=-s.y,p=this._containerLeft=-Math.round(this._containerWidth/2)+s.x;this._container.style.bottom=c+"px",this._container.style.left=p+"px"}},_getAnchor:function(){return[0,0]}});ie.include({_initOverlay:function(r,s,l,c){var p=s;return p instanceof r||(p=new r(c).setContent(s)),l&&p.setLatLng(l),p}}),jt.include({_initOverlay:function(r,s,l,c){var p=l;return p instanceof r?(k(p,c),p._source=this):(p=s&&!c?s:new r(c,this),p.setContent(l)),p}});var Bs=Wt.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(r){return r=arguments.length?r:this._source._map,!r.hasLayer(this)&&r._popup&&r._popup.options.autoClose&&r.removeLayer(r._popup),r._popup=this,Wt.prototype.openOn.call(this,r)},onAdd:function(r){Wt.prototype.onAdd.call(this,r),r.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof gn||this._source.on("preclick",Fn))},onRemove:function(r){Wt.prototype.onRemove.call(this,r),r.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof gn||this._source.off("preclick",Fn))},getEvents:function(){var r=Wt.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(r.preclick=this.close),this.options.keepInView&&(r.moveend=this._adjustPan),r},_initLayout:function(){var r="leaflet-popup",s=this._container=le("div",r+" "+(this.options.className||"")+" leaflet-zoom-animated"),l=this._wrapper=le("div",r+"-content-wrapper",s);if(this._contentNode=le("div",r+"-content",l),pi(s),Ga(this._contentNode),Y(s,"contextmenu",Fn),this._tipContainer=le("div",r+"-tip-container",s),this._tip=le("div",r+"-tip",this._tipContainer),this.options.closeButton){var c=this._closeButton=le("a",r+"-close-button",s);c.setAttribute("role","button"),c.setAttribute("aria-label","Close popup"),c.href="#close",c.innerHTML='<span aria-hidden="true">&#215;</span>',Y(c,"click",function(p){$e(p),this.close()},this)}},_updateLayout:function(){var r=this._contentNode,s=r.style;s.width="",s.whiteSpace="nowrap";var l=r.offsetWidth;l=Math.min(l,this.options.maxWidth),l=Math.max(l,this.options.minWidth),s.width=l+1+"px",s.whiteSpace="",s.height="";var c=r.offsetHeight,p=this.options.maxHeight,v="leaflet-popup-scrolled";p&&c>p?(s.height=p+"px",X(r,v)):Pe(r,v),this._containerWidth=this._container.offsetWidth},_animateZoom:function(r){var s=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center),l=this._getAnchor();Ce(this._container,s.add(l))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var r=this._map,s=parseInt(ci(this._container,"marginBottom"),10)||0,l=this._container.offsetHeight+s,c=this._containerWidth,p=new I(this._containerLeft,-l-this._containerBottom);p._add($n(this._container));var v=r.layerPointToContainerPoint(p),T=B(this.options.autoPanPadding),C=B(this.options.autoPanPaddingTopLeft||T),j=B(this.options.autoPanPaddingBottomRight||T),M=r.getSize(),U=0,K=0;v.x+c+j.x>M.x&&(U=v.x+c-M.x+j.x),v.x-U-C.x<0&&(U=v.x-C.x),v.y+l+j.y>M.y&&(K=v.y+l-M.y+j.y),v.y-K-C.y<0&&(K=v.y-C.y),(U||K)&&(this.options.keepInView&&(this._autopanning=!0),r.fire("autopanstart").panBy([U,K]))}},_getAnchor:function(){return B(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Bv=function(r,s){return new Bs(r,s)};ie.mergeOptions({closePopupOnClick:!0}),ie.include({openPopup:function(r,s,l){return this._initOverlay(Bs,r,s,l).openOn(this),this},closePopup:function(r){return r=arguments.length?r:this._popup,r&&r.close(),this}}),jt.include({bindPopup:function(r,s){return this._popup=this._initOverlay(Bs,this._popup,r,s),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(r){return this._popup&&(this instanceof Jt||(this._popup._source=this),this._popup._prepareOpen(r||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(r){return this._popup&&this._popup.setContent(r),this},getPopup:function(){return this._popup},_openPopup:function(r){if(!(!this._popup||!this._map)){Wn(r);var s=r.layer||r.target;if(this._popup._source===s&&!(s instanceof gn)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(r.latlng);return}this._popup._source=s,this.openPopup(r.latlng)}},_movePopup:function(r){this._popup.setLatLng(r.latlng)},_onKeyPress:function(r){r.originalEvent.keyCode===13&&this._openPopup(r)}});var Us=Wt.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(r){Wt.prototype.onAdd.call(this,r),this.setOpacity(this.options.opacity),r.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(r){Wt.prototype.onRemove.call(this,r),r.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var r=Wt.prototype.getEvents.call(this);return this.options.permanent||(r.preclick=this.close),r},_initLayout:function(){var r="leaflet-tooltip",s=r+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=le("div",s),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+h(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(r){var s,l,c=this._map,p=this._container,v=c.latLngToContainerPoint(c.getCenter()),T=c.layerPointToContainerPoint(r),C=this.options.direction,j=p.offsetWidth,M=p.offsetHeight,U=B(this.options.offset),K=this._getAnchor();C==="top"?(s=j/2,l=M):C==="bottom"?(s=j/2,l=0):C==="center"?(s=j/2,l=M/2):C==="right"?(s=0,l=M/2):C==="left"?(s=j,l=M/2):T.x<v.x?(C="right",s=0,l=M/2):(C="left",s=j+(U.x+K.x)*2,l=M/2),r=r.subtract(B(s,l,!0)).add(U).add(K),Pe(p,"leaflet-tooltip-right"),Pe(p,"leaflet-tooltip-left"),Pe(p,"leaflet-tooltip-top"),Pe(p,"leaflet-tooltip-bottom"),X(p,"leaflet-tooltip-"+C),Ce(p,r)},_updatePosition:function(){var r=this._map.latLngToLayerPoint(this._latlng);this._setPosition(r)},setOpacity:function(r){this.options.opacity=r,this._container&&yt(this._container,r)},_animateZoom:function(r){var s=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center);this._setPosition(s)},_getAnchor:function(){return B(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Uv=function(r,s){return new Us(r,s)};ie.include({openTooltip:function(r,s,l){return this._initOverlay(Us,r,s,l).openOn(this),this},closeTooltip:function(r){return r.close(),this}}),jt.include({bindTooltip:function(r,s){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Us,this._tooltip,r,s),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(r){if(!(!r&&this._tooltipHandlersAdded)){var s=r?"off":"on",l={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?l.add=this._openTooltip:(l.mouseover=this._openTooltip,l.mouseout=this.closeTooltip,l.click=this._openTooltip,this._map?this._addFocusListeners():l.add=this._addFocusListeners),this._tooltip.options.sticky&&(l.mousemove=this._moveTooltip),this[s](l),this._tooltipHandlersAdded=!r}},openTooltip:function(r){return this._tooltip&&(this instanceof Jt||(this._tooltip._source=this),this._tooltip._prepareOpen(r)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(r){return this._tooltip&&this._tooltip.setContent(r),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(r){var s=typeof r.getElement=="function"&&r.getElement();s&&(Y(s,"focus",function(){this._tooltip._source=r,this.openTooltip()},this),Y(s,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(r){var s=typeof r.getElement=="function"&&r.getElement();s&&s.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(r){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var s=this;this._map.once("moveend",function(){s._openOnceFlag=!1,s._openTooltip(r)});return}this._tooltip._source=r.layer||r.target,this.openTooltip(this._tooltip.options.sticky?r.latlng:void 0)}},_moveTooltip:function(r){var s=r.latlng,l,c;this._tooltip.options.sticky&&r.originalEvent&&(l=this._map.mouseEventToContainerPoint(r.originalEvent),c=this._map.containerPointToLayerPoint(l),s=this._map.layerPointToLatLng(c)),this._tooltip.setLatLng(s)}});var Vh=mr.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(r){var s=r&&r.tagName==="DIV"?r:document.createElement("div"),l=this.options;if(l.html instanceof Element?(Ps(s),s.appendChild(l.html)):s.innerHTML=l.html!==!1?l.html:"",l.bgPos){var c=B(l.bgPos);s.style.backgroundPosition=-c.x+"px "+-c.y+"px"}return this._setIconStyles(s,"icon"),s},createShadow:function(){return null}});function $v(r){return new Vh(r)}mr.Default=vi;var _i=jt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Z.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(r){k(this,r)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(r){r._addZoomLimit(this)},onRemove:function(r){this._removeAllTiles(),ye(this._container),r._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(dr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(fr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(r){return this.options.opacity=r,this._updateOpacity(),this},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var r=this._clampZoom(this._map.getZoom());r!==this._tileZoom&&(this._tileZoom=r,this._updateLevels()),this._update()}return this},getEvents:function(){var r={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=m(this._onMoveEnd,this.options.updateInterval,this)),r.move=this._onMove),this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},createTile:function(){return document.createElement("div")},getTileSize:function(){var r=this.options.tileSize;return r instanceof I?r:new I(r,r)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(r){for(var s=this.getPane().children,l=-r(-1/0,1/0),c=0,p=s.length,v;c<p;c++)v=s[c].style.zIndex,s[c]!==this._container&&v&&(l=r(l,+v));isFinite(l)&&(this.options.zIndex=l+r(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Z.ielt9){yt(this._container,this.options.opacity);var r=+new Date,s=!1,l=!1;for(var c in this._tiles){var p=this._tiles[c];if(!(!p.current||!p.loaded)){var v=Math.min(1,(r-p.loaded)/200);yt(p.el,v),v<1?s=!0:(p.active?l=!0:this._onOpaqueTile(p),p.active=!0)}}l&&!this._noPrune&&this._pruneTiles(),s&&(Me(this._fadeFrame),this._fadeFrame=he(this._updateOpacity,this))}},_onOpaqueTile:y,_initContainer:function(){this._container||(this._container=le("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var r=this._tileZoom,s=this.options.maxZoom;if(r!==void 0){for(var l in this._levels)l=Number(l),this._levels[l].el.children.length||l===r?(this._levels[l].el.style.zIndex=s-Math.abs(r-l),this._onUpdateLevel(l)):(ye(this._levels[l].el),this._removeTilesAtZoom(l),this._onRemoveLevel(l),delete this._levels[l]);var c=this._levels[r],p=this._map;return c||(c=this._levels[r]={},c.el=le("div","leaflet-tile-container leaflet-zoom-animated",this._container),c.el.style.zIndex=s,c.origin=p.project(p.unproject(p.getPixelOrigin()),r).round(),c.zoom=r,this._setZoomTransform(c,p.getCenter(),p.getZoom()),y(c.el.offsetWidth),this._onCreateLevel(c)),this._level=c,c}},_onUpdateLevel:y,_onRemoveLevel:y,_onCreateLevel:y,_pruneTiles:function(){if(this._map){var r,s,l=this._map.getZoom();if(l>this.options.maxZoom||l<this.options.minZoom){this._removeAllTiles();return}for(r in this._tiles)s=this._tiles[r],s.retain=s.current;for(r in this._tiles)if(s=this._tiles[r],s.current&&!s.active){var c=s.coords;this._retainParent(c.x,c.y,c.z,c.z-5)||this._retainChildren(c.x,c.y,c.z,c.z+2)}for(r in this._tiles)this._tiles[r].retain||this._removeTile(r)}},_removeTilesAtZoom:function(r){for(var s in this._tiles)this._tiles[s].coords.z===r&&this._removeTile(s)},_removeAllTiles:function(){for(var r in this._tiles)this._removeTile(r)},_invalidateAll:function(){for(var r in this._levels)ye(this._levels[r].el),this._onRemoveLevel(Number(r)),delete this._levels[r];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(r,s,l,c){var p=Math.floor(r/2),v=Math.floor(s/2),T=l-1,C=new I(+p,+v);C.z=+T;var j=this._tileCoordsToKey(C),M=this._tiles[j];return M&&M.active?(M.retain=!0,!0):(M&&M.loaded&&(M.retain=!0),T>c?this._retainParent(p,v,T,c):!1)},_retainChildren:function(r,s,l,c){for(var p=2*r;p<2*r+2;p++)for(var v=2*s;v<2*s+2;v++){var T=new I(p,v);T.z=l+1;var C=this._tileCoordsToKey(T),j=this._tiles[C];if(j&&j.active){j.retain=!0;continue}else j&&j.loaded&&(j.retain=!0);l+1<c&&this._retainChildren(p,v,l+1,c)}},_resetView:function(r){var s=r&&(r.pinch||r.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),s,s)},_animateZoom:function(r){this._setView(r.center,r.zoom,!0,r.noUpdate)},_clampZoom:function(r){var s=this.options;return s.minNativeZoom!==void 0&&r<s.minNativeZoom?s.minNativeZoom:s.maxNativeZoom!==void 0&&s.maxNativeZoom<r?s.maxNativeZoom:r},_setView:function(r,s,l,c){var p=Math.round(s);this.options.maxZoom!==void 0&&p>this.options.maxZoom||this.options.minZoom!==void 0&&p<this.options.minZoom?p=void 0:p=this._clampZoom(p);var v=this.options.updateWhenZooming&&p!==this._tileZoom;(!c||v)&&(this._tileZoom=p,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),p!==void 0&&this._update(r),l||this._pruneTiles(),this._noPrune=!!l),this._setZoomTransforms(r,s)},_setZoomTransforms:function(r,s){for(var l in this._levels)this._setZoomTransform(this._levels[l],r,s)},_setZoomTransform:function(r,s,l){var c=this._map.getZoomScale(l,r.zoom),p=r.origin.multiplyBy(c).subtract(this._map._getNewPixelOrigin(s,l)).round();Z.any3d?Un(r.el,p,c):Ce(r.el,p)},_resetGrid:function(){var r=this._map,s=r.options.crs,l=this._tileSize=this.getTileSize(),c=this._tileZoom,p=this._map.getPixelWorldBounds(this._tileZoom);p&&(this._globalTileRange=this._pxBoundsToTileRange(p)),this._wrapX=s.wrapLng&&!this.options.noWrap&&[Math.floor(r.project([0,s.wrapLng[0]],c).x/l.x),Math.ceil(r.project([0,s.wrapLng[1]],c).x/l.y)],this._wrapY=s.wrapLat&&!this.options.noWrap&&[Math.floor(r.project([s.wrapLat[0],0],c).y/l.x),Math.ceil(r.project([s.wrapLat[1],0],c).y/l.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(r){var s=this._map,l=s._animatingZoom?Math.max(s._animateToZoom,s.getZoom()):s.getZoom(),c=s.getZoomScale(l,this._tileZoom),p=s.project(r,this._tileZoom).floor(),v=s.getSize().divideBy(c*2);return new G(p.subtract(v),p.add(v))},_update:function(r){var s=this._map;if(s){var l=this._clampZoom(s.getZoom());if(r===void 0&&(r=s.getCenter()),this._tileZoom!==void 0){var c=this._getTiledPixelBounds(r),p=this._pxBoundsToTileRange(c),v=p.getCenter(),T=[],C=this.options.keepBuffer,j=new G(p.getBottomLeft().subtract([C,-C]),p.getTopRight().add([C,-C]));if(!(isFinite(p.min.x)&&isFinite(p.min.y)&&isFinite(p.max.x)&&isFinite(p.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var M in this._tiles){var U=this._tiles[M].coords;(U.z!==this._tileZoom||!j.contains(new I(U.x,U.y)))&&(this._tiles[M].current=!1)}if(Math.abs(l-this._tileZoom)>1){this._setView(r,l);return}for(var K=p.min.y;K<=p.max.y;K++)for(var te=p.min.x;te<=p.max.x;te++){var Qe=new I(te,K);if(Qe.z=this._tileZoom,!!this._isValidTile(Qe)){var ze=this._tiles[this._tileCoordsToKey(Qe)];ze?ze.current=!0:T.push(Qe)}}if(T.sort(function(rt,yr){return rt.distanceTo(v)-yr.distanceTo(v)}),T.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var xt=document.createDocumentFragment();for(te=0;te<T.length;te++)this._addTile(T[te],xt);this._level.el.appendChild(xt)}}}},_isValidTile:function(r){var s=this._map.options.crs;if(!s.infinite){var l=this._globalTileRange;if(!s.wrapLng&&(r.x<l.min.x||r.x>l.max.x)||!s.wrapLat&&(r.y<l.min.y||r.y>l.max.y))return!1}if(!this.options.bounds)return!0;var c=this._tileCoordsToBounds(r);return ce(this.options.bounds).overlaps(c)},_keyToBounds:function(r){return this._tileCoordsToBounds(this._keyToTileCoords(r))},_tileCoordsToNwSe:function(r){var s=this._map,l=this.getTileSize(),c=r.scaleBy(l),p=c.add(l),v=s.unproject(c,r.z),T=s.unproject(p,r.z);return[v,T]},_tileCoordsToBounds:function(r){var s=this._tileCoordsToNwSe(r),l=new Le(s[0],s[1]);return this.options.noWrap||(l=this._map.wrapLatLngBounds(l)),l},_tileCoordsToKey:function(r){return r.x+":"+r.y+":"+r.z},_keyToTileCoords:function(r){var s=r.split(":"),l=new I(+s[0],+s[1]);return l.z=+s[2],l},_removeTile:function(r){var s=this._tiles[r];s&&(ye(s.el),delete this._tiles[r],this.fire("tileunload",{tile:s.el,coords:this._keyToTileCoords(r)}))},_initTile:function(r){X(r,"leaflet-tile");var s=this.getTileSize();r.style.width=s.x+"px",r.style.height=s.y+"px",r.onselectstart=y,r.onmousemove=y,Z.ielt9&&this.options.opacity<1&&yt(r,this.options.opacity)},_addTile:function(r,s){var l=this._getTilePos(r),c=this._tileCoordsToKey(r),p=this.createTile(this._wrapCoords(r),u(this._tileReady,this,r));this._initTile(p),this.createTile.length<2&&he(u(this._tileReady,this,r,null,p)),Ce(p,l),this._tiles[c]={el:p,coords:r,current:!0},s.appendChild(p),this.fire("tileloadstart",{tile:p,coords:r})},_tileReady:function(r,s,l){s&&this.fire("tileerror",{error:s,tile:l,coords:r});var c=this._tileCoordsToKey(r);l=this._tiles[c],l&&(l.loaded=+new Date,this._map._fadeAnimated?(yt(l.el,0),Me(this._fadeFrame),this._fadeFrame=he(this._updateOpacity,this)):(l.active=!0,this._pruneTiles()),s||(X(l.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:l.el,coords:r})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Z.ielt9||!this._map._fadeAnimated?he(this._pruneTiles,this):setTimeout(u(this._pruneTiles,this),250)))},_getTilePos:function(r){return r.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(r){var s=new I(this._wrapX?_(r.x,this._wrapX):r.x,this._wrapY?_(r.y,this._wrapY):r.y);return s.z=r.z,s},_pxBoundsToTileRange:function(r){var s=this.getTileSize();return new G(r.min.unscaleBy(s).floor(),r.max.unscaleBy(s).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var r in this._tiles)if(!this._tiles[r].loaded)return!1;return!0}});function Fv(r){return new _i(r)}var _r=_i.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(r,s){this._url=r,s=k(this,s),s.detectRetina&&Z.retina&&s.maxZoom>0?(s.tileSize=Math.floor(s.tileSize/2),s.zoomReverse?(s.zoomOffset--,s.minZoom=Math.min(s.maxZoom,s.minZoom+1)):(s.zoomOffset++,s.maxZoom=Math.max(s.minZoom,s.maxZoom-1)),s.minZoom=Math.max(0,s.minZoom)):s.zoomReverse?s.minZoom=Math.min(s.maxZoom,s.minZoom):s.maxZoom=Math.max(s.minZoom,s.maxZoom),typeof s.subdomains=="string"&&(s.subdomains=s.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(r,s){return this._url===r&&s===void 0&&(s=!0),this._url=r,s||this.redraw(),this},createTile:function(r,s){var l=document.createElement("img");return Y(l,"load",u(this._tileOnLoad,this,s,l)),Y(l,"error",u(this._tileOnError,this,s,l)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(l.referrerPolicy=this.options.referrerPolicy),l.alt="",l.src=this.getTileUrl(r),l},getTileUrl:function(r){var s={r:Z.retina?"@2x":"",s:this._getSubdomain(r),x:r.x,y:r.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var l=this._globalTileRange.max.y-r.y;this.options.tms&&(s.y=l),s["-y"]=l}return x(this._url,o(s,this.options))},_tileOnLoad:function(r,s){Z.ielt9?setTimeout(u(r,this,null,s),0):r(null,s)},_tileOnError:function(r,s,l){var c=this.options.errorTileUrl;c&&s.getAttribute("src")!==c&&(s.src=c),r(l,s)},_onTileRemove:function(r){r.tile.onload=null},_getZoomForUrl:function(){var r=this._tileZoom,s=this.options.maxZoom,l=this.options.zoomReverse,c=this.options.zoomOffset;return l&&(r=s-r),r+c},_getSubdomain:function(r){var s=Math.abs(r.x+r.y)%this.options.subdomains.length;return this.options.subdomains[s]},_abortLoading:function(){var r,s;for(r in this._tiles)if(this._tiles[r].coords.z!==this._tileZoom&&(s=this._tiles[r].el,s.onload=y,s.onerror=y,!s.complete)){s.src=A;var l=this._tiles[r].coords;ye(s),delete this._tiles[r],this.fire("tileabort",{tile:s,coords:l})}},_removeTile:function(r){var s=this._tiles[r];if(s)return s.el.setAttribute("src",A),_i.prototype._removeTile.call(this,r)},_tileReady:function(r,s,l){if(!(!this._map||l&&l.getAttribute("src")===A))return _i.prototype._tileReady.call(this,r,s,l)}});function qh(r,s){return new _r(r,s)}var Kh=_r.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(r,s){this._url=r;var l=o({},this.defaultWmsParams);for(var c in s)c in this.options||(l[c]=s[c]);s=k(this,s);var p=s.detectRetina&&Z.retina?2:1,v=this.getTileSize();l.width=v.x*p,l.height=v.y*p,this.wmsParams=l},onAdd:function(r){this._crs=this.options.crs||r.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var s=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[s]=this._crs.code,_r.prototype.onAdd.call(this,r)},getTileUrl:function(r){var s=this._tileCoordsToNwSe(r),l=this._crs,c=se(l.project(s[0]),l.project(s[1])),p=c.min,v=c.max,T=(this._wmsVersion>=1.3&&this._crs===Uh?[p.y,p.x,v.y,v.x]:[p.x,p.y,v.x,v.y]).join(","),C=_r.prototype.getTileUrl.call(this,r);return C+N(this.wmsParams,C,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+T},setParams:function(r,s){return o(this.wmsParams,r),s||this.redraw(),this}});function Wv(r,s){return new Kh(r,s)}_r.WMS=Kh,qh.wms=Wv;var Xt=jt.extend({options:{padding:.1},initialize:function(r){k(this,r),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),X(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var r={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(r.zoomanim=this._onAnimZoom),r},_onAnimZoom:function(r){this._updateTransform(r.center,r.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(r,s){var l=this._map.getZoomScale(s,this._zoom),c=this._map.getSize().multiplyBy(.5+this.options.padding),p=this._map.project(this._center,s),v=c.multiplyBy(-l).add(p).subtract(this._map._getNewPixelOrigin(r,s));Z.any3d?Un(this._container,v,l):Ce(this._container,v)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var r in this._layers)this._layers[r]._reset()},_onZoomEnd:function(){for(var r in this._layers)this._layers[r]._project()},_updatePaths:function(){for(var r in this._layers)this._layers[r]._update()},_update:function(){var r=this.options.padding,s=this._map.getSize(),l=this._map.containerPointToLayerPoint(s.multiplyBy(-r)).round();this._bounds=new G(l,l.add(s.multiplyBy(1+r*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Gh=Xt.extend({options:{tolerance:0},getEvents:function(){var r=Xt.prototype.getEvents.call(this);return r.viewprereset=this._onViewPreReset,r},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Xt.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var r=this._container=document.createElement("canvas");Y(r,"mousemove",this._onMouseMove,this),Y(r,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Y(r,"mouseout",this._handleMouseOut,this),r._leaflet_disable_events=!0,this._ctx=r.getContext("2d")},_destroyContainer:function(){Me(this._redrawRequest),delete this._ctx,ye(this._container),de(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var r;this._redrawBounds=null;for(var s in this._layers)r=this._layers[s],r._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Xt.prototype._update.call(this);var r=this._bounds,s=this._container,l=r.getSize(),c=Z.retina?2:1;Ce(s,r.min),s.width=c*l.x,s.height=c*l.y,s.style.width=l.x+"px",s.style.height=l.y+"px",Z.retina&&this._ctx.scale(2,2),this._ctx.translate(-r.min.x,-r.min.y),this.fire("update")}},_reset:function(){Xt.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(r){this._updateDashArray(r),this._layers[h(r)]=r;var s=r._order={layer:r,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=s),this._drawLast=s,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(r){this._requestRedraw(r)},_removePath:function(r){var s=r._order,l=s.next,c=s.prev;l?l.prev=c:this._drawLast=c,c?c.next=l:this._drawFirst=l,delete r._order,delete this._layers[h(r)],this._requestRedraw(r)},_updatePath:function(r){this._extendRedrawBounds(r),r._project(),r._update(),this._requestRedraw(r)},_updateStyle:function(r){this._updateDashArray(r),this._requestRedraw(r)},_updateDashArray:function(r){if(typeof r.options.dashArray=="string"){var s=r.options.dashArray.split(/[, ]+/),l=[],c,p;for(p=0;p<s.length;p++){if(c=Number(s[p]),isNaN(c))return;l.push(c)}r.options._dashArray=l}else r.options._dashArray=r.options.dashArray},_requestRedraw:function(r){this._map&&(this._extendRedrawBounds(r),this._redrawRequest=this._redrawRequest||he(this._redraw,this))},_extendRedrawBounds:function(r){if(r._pxBounds){var s=(r.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new G,this._redrawBounds.extend(r._pxBounds.min.subtract([s,s])),this._redrawBounds.extend(r._pxBounds.max.add([s,s]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var r=this._redrawBounds;if(r){var s=r.getSize();this._ctx.clearRect(r.min.x,r.min.y,s.x,s.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var r,s=this._redrawBounds;if(this._ctx.save(),s){var l=s.getSize();this._ctx.beginPath(),this._ctx.rect(s.min.x,s.min.y,l.x,l.y),this._ctx.clip()}this._drawing=!0;for(var c=this._drawFirst;c;c=c.next)r=c.layer,(!s||r._pxBounds&&r._pxBounds.intersects(s))&&r._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(r,s){if(this._drawing){var l,c,p,v,T=r._parts,C=T.length,j=this._ctx;if(C){for(j.beginPath(),l=0;l<C;l++){for(c=0,p=T[l].length;c<p;c++)v=T[l][c],j[c?"lineTo":"moveTo"](v.x,v.y);s&&j.closePath()}this._fillStroke(j,r)}}},_updateCircle:function(r){if(!(!this._drawing||r._empty())){var s=r._point,l=this._ctx,c=Math.max(Math.round(r._radius),1),p=(Math.max(Math.round(r._radiusY),1)||c)/c;p!==1&&(l.save(),l.scale(1,p)),l.beginPath(),l.arc(s.x,s.y/p,c,0,Math.PI*2,!1),p!==1&&l.restore(),this._fillStroke(l,r)}},_fillStroke:function(r,s){var l=s.options;l.fill&&(r.globalAlpha=l.fillOpacity,r.fillStyle=l.fillColor||l.color,r.fill(l.fillRule||"evenodd")),l.stroke&&l.weight!==0&&(r.setLineDash&&r.setLineDash(s.options&&s.options._dashArray||[]),r.globalAlpha=l.opacity,r.lineWidth=l.weight,r.strokeStyle=l.color,r.lineCap=l.lineCap,r.lineJoin=l.lineJoin,r.stroke())},_onClick:function(r){for(var s=this._map.mouseEventToLayerPoint(r),l,c,p=this._drawFirst;p;p=p.next)l=p.layer,l.options.interactive&&l._containsPoint(s)&&(!(r.type==="click"||r.type==="preclick")||!this._map._draggableMoved(l))&&(c=l);this._fireEvent(c?[c]:!1,r)},_onMouseMove:function(r){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var s=this._map.mouseEventToLayerPoint(r);this._handleMouseHover(r,s)}},_handleMouseOut:function(r){var s=this._hoveredLayer;s&&(Pe(this._container,"leaflet-interactive"),this._fireEvent([s],r,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(r,s){if(!this._mouseHoverThrottled){for(var l,c,p=this._drawFirst;p;p=p.next)l=p.layer,l.options.interactive&&l._containsPoint(s)&&(c=l);c!==this._hoveredLayer&&(this._handleMouseOut(r),c&&(X(this._container,"leaflet-interactive"),this._fireEvent([c],r,"mouseover"),this._hoveredLayer=c)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,r),this._mouseHoverThrottled=!0,setTimeout(u(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(r,s,l){this._map._fireDOMEvent(s,l||s.type,r)},_bringToFront:function(r){var s=r._order;if(s){var l=s.next,c=s.prev;if(l)l.prev=c;else return;c?c.next=l:l&&(this._drawFirst=l),s.prev=this._drawLast,this._drawLast.next=s,s.next=null,this._drawLast=s,this._requestRedraw(r)}},_bringToBack:function(r){var s=r._order;if(s){var l=s.next,c=s.prev;if(c)c.next=l;else return;l?l.prev=c:c&&(this._drawLast=c),s.prev=null,s.next=this._drawFirst,this._drawFirst.prev=s,this._drawFirst=s,this._requestRedraw(r)}}});function Jh(r){return Z.canvas?new Gh(r):null}var yi=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(r){return document.createElement("<lvml:"+r+' class="lvml">')}}catch{}return function(r){return document.createElement("<"+r+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Zv={_initContainer:function(){this._container=le("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Xt.prototype._update.call(this),this.fire("update"))},_initPath:function(r){var s=r._container=yi("shape");X(s,"leaflet-vml-shape "+(this.options.className||"")),s.coordsize="1 1",r._path=yi("path"),s.appendChild(r._path),this._updateStyle(r),this._layers[h(r)]=r},_addPath:function(r){var s=r._container;this._container.appendChild(s),r.options.interactive&&r.addInteractiveTarget(s)},_removePath:function(r){var s=r._container;ye(s),r.removeInteractiveTarget(s),delete this._layers[h(r)]},_updateStyle:function(r){var s=r._stroke,l=r._fill,c=r.options,p=r._container;p.stroked=!!c.stroke,p.filled=!!c.fill,c.stroke?(s||(s=r._stroke=yi("stroke")),p.appendChild(s),s.weight=c.weight+"px",s.color=c.color,s.opacity=c.opacity,c.dashArray?s.dashStyle=S(c.dashArray)?c.dashArray.join(" "):c.dashArray.replace(/( *, *)/g," "):s.dashStyle="",s.endcap=c.lineCap.replace("butt","flat"),s.joinstyle=c.lineJoin):s&&(p.removeChild(s),r._stroke=null),c.fill?(l||(l=r._fill=yi("fill")),p.appendChild(l),l.color=c.fillColor||c.color,l.opacity=c.fillOpacity):l&&(p.removeChild(l),r._fill=null)},_updateCircle:function(r){var s=r._point.round(),l=Math.round(r._radius),c=Math.round(r._radiusY||l);this._setPath(r,r._empty()?"M0 0":"AL "+s.x+","+s.y+" "+l+","+c+" 0,"+65535*360)},_setPath:function(r,s){r._path.v=s},_bringToFront:function(r){dr(r._container)},_bringToBack:function(r){fr(r._container)}},$s=Z.vml?yi:eh,wi=Xt.extend({_initContainer:function(){this._container=$s("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=$s("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ye(this._container),de(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Xt.prototype._update.call(this);var r=this._bounds,s=r.getSize(),l=this._container;(!this._svgSize||!this._svgSize.equals(s))&&(this._svgSize=s,l.setAttribute("width",s.x),l.setAttribute("height",s.y)),Ce(l,r.min),l.setAttribute("viewBox",[r.min.x,r.min.y,s.x,s.y].join(" ")),this.fire("update")}},_initPath:function(r){var s=r._path=$s("path");r.options.className&&X(s,r.options.className),r.options.interactive&&X(s,"leaflet-interactive"),this._updateStyle(r),this._layers[h(r)]=r},_addPath:function(r){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(r._path),r.addInteractiveTarget(r._path)},_removePath:function(r){ye(r._path),r.removeInteractiveTarget(r._path),delete this._layers[h(r)]},_updatePath:function(r){r._project(),r._update()},_updateStyle:function(r){var s=r._path,l=r.options;s&&(l.stroke?(s.setAttribute("stroke",l.color),s.setAttribute("stroke-opacity",l.opacity),s.setAttribute("stroke-width",l.weight),s.setAttribute("stroke-linecap",l.lineCap),s.setAttribute("stroke-linejoin",l.lineJoin),l.dashArray?s.setAttribute("stroke-dasharray",l.dashArray):s.removeAttribute("stroke-dasharray"),l.dashOffset?s.setAttribute("stroke-dashoffset",l.dashOffset):s.removeAttribute("stroke-dashoffset")):s.setAttribute("stroke","none"),l.fill?(s.setAttribute("fill",l.fillColor||l.color),s.setAttribute("fill-opacity",l.fillOpacity),s.setAttribute("fill-rule",l.fillRule||"evenodd")):s.setAttribute("fill","none"))},_updatePoly:function(r,s){this._setPath(r,th(r._parts,s))},_updateCircle:function(r){var s=r._point,l=Math.max(Math.round(r._radius),1),c=Math.max(Math.round(r._radiusY),1)||l,p="a"+l+","+c+" 0 1,0 ",v=r._empty()?"M0 0":"M"+(s.x-l)+","+s.y+p+l*2+",0 "+p+-l*2+",0 ";this._setPath(r,v)},_setPath:function(r,s){r._path.setAttribute("d",s)},_bringToFront:function(r){dr(r._path)},_bringToBack:function(r){fr(r._path)}});Z.vml&&wi.include(Zv);function Qh(r){return Z.svg||Z.vml?new wi(r):null}ie.include({getRenderer:function(r){var s=r.options.renderer||this._getPaneRenderer(r.options.pane)||this.options.renderer||this._renderer;return s||(s=this._renderer=this._createRenderer()),this.hasLayer(s)||this.addLayer(s),s},_getPaneRenderer:function(r){if(r==="overlayPane"||r===void 0)return!1;var s=this._paneRenderers[r];return s===void 0&&(s=this._createRenderer({pane:r}),this._paneRenderers[r]=s),s},_createRenderer:function(r){return this.options.preferCanvas&&Jh(r)||Qh(r)}});var Yh=gr.extend({initialize:function(r,s){gr.prototype.initialize.call(this,this._boundsToLatLngs(r),s)},setBounds:function(r){return this.setLatLngs(this._boundsToLatLngs(r))},_boundsToLatLngs:function(r){return r=ce(r),[r.getSouthWest(),r.getNorthWest(),r.getNorthEast(),r.getSouthEast()]}});function Hv(r,s){return new Yh(r,s)}wi.create=$s,wi.pointsToPath=th,Yt.geometryToLayer=Rs,Yt.coordsToLatLng=il,Yt.coordsToLatLngs=Is,Yt.latLngToCoords=sl,Yt.latLngsToCoords=Ms,Yt.getFeature=vr,Yt.asFeature=zs,ie.mergeOptions({boxZoom:!0});var Xh=Ft.extend({initialize:function(r){this._map=r,this._container=r._container,this._pane=r._panes.overlayPane,this._resetStateTimeout=0,r.on("unload",this._destroy,this)},addHooks:function(){Y(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){de(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ye(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(r){if(!r.shiftKey||r.which!==1&&r.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),hi(),$a(),this._startPoint=this._map.mouseEventToContainerPoint(r),Y(document,{contextmenu:Wn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(r){this._moved||(this._moved=!0,this._box=le("div","leaflet-zoom-box",this._container),X(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(r);var s=new G(this._point,this._startPoint),l=s.getSize();Ce(this._box,s.min),this._box.style.width=l.x+"px",this._box.style.height=l.y+"px"},_finish:function(){this._moved&&(ye(this._box),Pe(this._container,"leaflet-crosshair")),di(),Fa(),de(document,{contextmenu:Wn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(r){if(!(r.which!==1&&r.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(u(this._resetState,this),0);var s=new Le(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(s).fire("boxzoomend",{boxZoomBounds:s})}},_onKeyDown:function(r){r.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});ie.addInitHook("addHandler","boxZoom",Xh),ie.mergeOptions({doubleClickZoom:!0});var ed=Ft.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(r){var s=this._map,l=s.getZoom(),c=s.options.zoomDelta,p=r.originalEvent.shiftKey?l-c:l+c;s.options.doubleClickZoom==="center"?s.setZoom(p):s.setZoomAround(r.containerPoint,p)}});ie.addInitHook("addHandler","doubleClickZoom",ed),ie.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var td=Ft.extend({addHooks:function(){if(!this._draggable){var r=this._map;this._draggable=new mn(r._mapPane,r._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),r.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),r.on("zoomend",this._onZoomEnd,this),r.whenReady(this._onZoomEnd,this))}X(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Pe(this._map._container,"leaflet-grab"),Pe(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var r=this._map;if(r._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var s=ce(this._map.options.maxBounds);this._offsetLimit=se(this._map.latLngToContainerPoint(s.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(s.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;r.fire("movestart").fire("dragstart"),r.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(r){if(this._map.options.inertia){var s=this._lastTime=+new Date,l=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(l),this._times.push(s),this._prunePositions(s)}this._map.fire("move",r).fire("drag",r)},_prunePositions:function(r){for(;this._positions.length>1&&r-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var r=this._map.getSize().divideBy(2),s=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=s.subtract(r).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(r,s){return r-(r-s)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var r=this._draggable._newPos.subtract(this._draggable._startPos),s=this._offsetLimit;r.x<s.min.x&&(r.x=this._viscousLimit(r.x,s.min.x)),r.y<s.min.y&&(r.y=this._viscousLimit(r.y,s.min.y)),r.x>s.max.x&&(r.x=this._viscousLimit(r.x,s.max.x)),r.y>s.max.y&&(r.y=this._viscousLimit(r.y,s.max.y)),this._draggable._newPos=this._draggable._startPos.add(r)}},_onPreDragWrap:function(){var r=this._worldWidth,s=Math.round(r/2),l=this._initialWorldOffset,c=this._draggable._newPos.x,p=(c-s+l)%r+s-l,v=(c+s+l)%r-s-l,T=Math.abs(p+l)<Math.abs(v+l)?p:v;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=T},_onDragEnd:function(r){var s=this._map,l=s.options,c=!l.inertia||r.noInertia||this._times.length<2;if(s.fire("dragend",r),c)s.fire("moveend");else{this._prunePositions(+new Date);var p=this._lastPos.subtract(this._positions[0]),v=(this._lastTime-this._times[0])/1e3,T=l.easeLinearity,C=p.multiplyBy(T/v),j=C.distanceTo([0,0]),M=Math.min(l.inertiaMaxSpeed,j),U=C.multiplyBy(M/j),K=M/(l.inertiaDeceleration*T),te=U.multiplyBy(-K/2).round();!te.x&&!te.y?s.fire("moveend"):(te=s._limitOffset(te,s.options.maxBounds),he(function(){s.panBy(te,{duration:K,easeLinearity:T,noMoveStart:!0,animate:!0})}))}}});ie.addInitHook("addHandler","dragging",td),ie.mergeOptions({keyboard:!0,keyboardPanDelta:80});var nd=Ft.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(r){this._map=r,this._setPanDelta(r.options.keyboardPanDelta),this._setZoomDelta(r.options.zoomDelta)},addHooks:function(){var r=this._map._container;r.tabIndex<=0&&(r.tabIndex="0"),Y(r,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),de(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var r=document.body,s=document.documentElement,l=r.scrollTop||s.scrollTop,c=r.scrollLeft||s.scrollLeft;this._map._container.focus(),window.scrollTo(c,l)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(r){var s=this._panKeys={},l=this.keyCodes,c,p;for(c=0,p=l.left.length;c<p;c++)s[l.left[c]]=[-1*r,0];for(c=0,p=l.right.length;c<p;c++)s[l.right[c]]=[r,0];for(c=0,p=l.down.length;c<p;c++)s[l.down[c]]=[0,r];for(c=0,p=l.up.length;c<p;c++)s[l.up[c]]=[0,-1*r]},_setZoomDelta:function(r){var s=this._zoomKeys={},l=this.keyCodes,c,p;for(c=0,p=l.zoomIn.length;c<p;c++)s[l.zoomIn[c]]=r;for(c=0,p=l.zoomOut.length;c<p;c++)s[l.zoomOut[c]]=-r},_addHooks:function(){Y(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){de(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(r){if(!(r.altKey||r.ctrlKey||r.metaKey)){var s=r.keyCode,l=this._map,c;if(s in this._panKeys){if(!l._panAnim||!l._panAnim._inProgress)if(c=this._panKeys[s],r.shiftKey&&(c=B(c).multiplyBy(3)),l.options.maxBounds&&(c=l._limitOffset(B(c),l.options.maxBounds)),l.options.worldCopyJump){var p=l.wrapLatLng(l.unproject(l.project(l.getCenter()).add(c)));l.panTo(p)}else l.panBy(c)}else if(s in this._zoomKeys)l.setZoom(l.getZoom()+(r.shiftKey?3:1)*this._zoomKeys[s]);else if(s===27&&l._popup&&l._popup.options.closeOnEscapeKey)l.closePopup();else return;Wn(r)}}});ie.addInitHook("addHandler","keyboard",nd),ie.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var rd=Ft.extend({addHooks:function(){Y(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){de(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(r){var s=Th(r),l=this._map.options.wheelDebounceTime;this._delta+=s,this._lastMousePos=this._map.mouseEventToContainerPoint(r),this._startTime||(this._startTime=+new Date);var c=Math.max(l-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(u(this._performZoom,this),c),Wn(r)},_performZoom:function(){var r=this._map,s=r.getZoom(),l=this._map.options.zoomSnap||0;r._stop();var c=this._delta/(this._map.options.wheelPxPerZoomLevel*4),p=4*Math.log(2/(1+Math.exp(-Math.abs(c))))/Math.LN2,v=l?Math.ceil(p/l)*l:p,T=r._limitZoom(s+(this._delta>0?v:-v))-s;this._delta=0,this._startTime=null,T&&(r.options.scrollWheelZoom==="center"?r.setZoom(s+T):r.setZoomAround(this._lastMousePos,s+T))}});ie.addInitHook("addHandler","scrollWheelZoom",rd);var Vv=600;ie.mergeOptions({tapHold:Z.touchNative&&Z.safari&&Z.mobile,tapTolerance:15});var id=Ft.extend({addHooks:function(){Y(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){de(this._map._container,"touchstart",this._onDown,this)},_onDown:function(r){if(clearTimeout(this._holdTimeout),r.touches.length===1){var s=r.touches[0];this._startPos=this._newPos=new I(s.clientX,s.clientY),this._holdTimeout=setTimeout(u(function(){this._cancel(),this._isTapValid()&&(Y(document,"touchend",$e),Y(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",s))},this),Vv),Y(document,"touchend touchcancel contextmenu",this._cancel,this),Y(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function r(){de(document,"touchend",$e),de(document,"touchend touchcancel",r)},_cancel:function(){clearTimeout(this._holdTimeout),de(document,"touchend touchcancel contextmenu",this._cancel,this),de(document,"touchmove",this._onMove,this)},_onMove:function(r){var s=r.touches[0];this._newPos=new I(s.clientX,s.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(r,s){var l=new MouseEvent(r,{bubbles:!0,cancelable:!0,view:window,screenX:s.screenX,screenY:s.screenY,clientX:s.clientX,clientY:s.clientY});l._simulated=!0,s.target.dispatchEvent(l)}});ie.addInitHook("addHandler","tapHold",id),ie.mergeOptions({touchZoom:Z.touch,bounceAtZoomLimits:!0});var sd=Ft.extend({addHooks:function(){X(this._map._container,"leaflet-touch-zoom"),Y(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Pe(this._map._container,"leaflet-touch-zoom"),de(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(r){var s=this._map;if(!(!r.touches||r.touches.length!==2||s._animatingZoom||this._zooming)){var l=s.mouseEventToContainerPoint(r.touches[0]),c=s.mouseEventToContainerPoint(r.touches[1]);this._centerPoint=s.getSize()._divideBy(2),this._startLatLng=s.containerPointToLatLng(this._centerPoint),s.options.touchZoom!=="center"&&(this._pinchStartLatLng=s.containerPointToLatLng(l.add(c)._divideBy(2))),this._startDist=l.distanceTo(c),this._startZoom=s.getZoom(),this._moved=!1,this._zooming=!0,s._stop(),Y(document,"touchmove",this._onTouchMove,this),Y(document,"touchend touchcancel",this._onTouchEnd,this),$e(r)}},_onTouchMove:function(r){if(!(!r.touches||r.touches.length!==2||!this._zooming)){var s=this._map,l=s.mouseEventToContainerPoint(r.touches[0]),c=s.mouseEventToContainerPoint(r.touches[1]),p=l.distanceTo(c)/this._startDist;if(this._zoom=s.getScaleZoom(p,this._startZoom),!s.options.bounceAtZoomLimits&&(this._zoom<s.getMinZoom()&&p<1||this._zoom>s.getMaxZoom()&&p>1)&&(this._zoom=s._limitZoom(this._zoom)),s.options.touchZoom==="center"){if(this._center=this._startLatLng,p===1)return}else{var v=l._add(c)._divideBy(2)._subtract(this._centerPoint);if(p===1&&v.x===0&&v.y===0)return;this._center=s.unproject(s.project(this._pinchStartLatLng,this._zoom).subtract(v),this._zoom)}this._moved||(s._moveStart(!0,!1),this._moved=!0),Me(this._animRequest);var T=u(s._move,s,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=he(T,this,!0),$e(r)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Me(this._animRequest),de(document,"touchmove",this._onTouchMove,this),de(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});ie.addInitHook("addHandler","touchZoom",sd),ie.BoxZoom=Xh,ie.DoubleClickZoom=ed,ie.Drag=td,ie.Keyboard=nd,ie.ScrollWheelZoom=rd,ie.TapHold=id,ie.TouchZoom=sd,n.Bounds=G,n.Browser=Z,n.CRS=nt,n.Canvas=Gh,n.Circle=rl,n.CircleMarker=As,n.Class=_t,n.Control=Ct,n.DivIcon=Vh,n.DivOverlay=Wt,n.DomEvent=cv,n.DomUtil=lv,n.Draggable=mn,n.Evented=Gt,n.FeatureGroup=Jt,n.GeoJSON=Yt,n.GridLayer=_i,n.Handler=Ft,n.Icon=mr,n.ImageOverlay=Ds,n.LatLng=ae,n.LatLngBounds=Le,n.Layer=jt,n.LayerGroup=pr,n.LineUtil=Sv,n.Map=ie,n.Marker=Ls,n.Mixin=vv,n.Path=gn,n.Point=I,n.PolyUtil=_v,n.Polygon=gr,n.Polyline=Qt,n.Popup=Bs,n.PosAnimation=Ch,n.Projection=kv,n.Rectangle=Yh,n.Renderer=Xt,n.SVG=wi,n.SVGOverlay=Hh,n.TileLayer=_r,n.Tooltip=Us,n.Transformation=ja,n.Util=Bn,n.VideoOverlay=Zh,n.bind=u,n.bounds=se,n.canvas=Jh,n.circle=Lv,n.circleMarker=Ov,n.control=mi,n.divIcon=$v,n.extend=o,n.featureGroup=Cv,n.geoJSON=Wh,n.geoJson=Iv,n.gridLayer=Fv,n.icon=jv,n.imageOverlay=Mv,n.latLng=Q,n.latLngBounds=ce,n.layerGroup=Tv,n.map=hv,n.marker=Nv,n.point=B,n.polygon=Rv,n.polyline=Av,n.popup=Bv,n.rectangle=Hv,n.setOptions=k,n.stamp=h,n.svg=Qh,n.svgOverlay=Dv,n.tileLayer=qh,n.tooltip=Uv,n.transformation=ai,n.version=i,n.videoOverlay=zv;var qv=window.L;n.noConflict=function(){return window.L=qv,this},window.L=n})})(Ku,Ku.exports);var oi=Ku.exports;const Ss=Wf(oi);function Ea(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function Pa(e,t){return t==null?function(i,o){const a=R.useRef();return a.current||(a.current=e(i,o)),a}:function(i,o){const a=R.useRef();a.current||(a.current=e(i,o));const u=R.useRef(i),{instance:d}=a.current;return R.useEffect(function(){u.current!==i&&(t(d,i,u.current),u.current=i)},[d,i,o]),a}}function Cg(e,t){R.useEffect(function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){var a;(a=t.layerContainer)==null||a.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function jg(e){return function(n){const i=Sa(),o=e(ka(n,i),i);return Sg(i.map,n.attribution),Qc(o.current,n.eventHandlers),Cg(o.current,i),o}}function Ab(e,t){const n=R.useRef();R.useEffect(function(){if(t.pathOptions!==n.current){const o=t.pathOptions??{};e.instance.setStyle(o),n.current=o}},[e,t])}function Rb(e){return function(n){const i=Sa(),o=e(ka(n,i),i);return Qc(o.current,n.eventHandlers),Cg(o.current,i),Ab(o.current,n),o}}function Ib(e,t){const n=Pa(e,t),i=jg(n);return Tg(i)}function Mb(e,t){const n=Pa(e),i=Lb(n,t);return Nb(i)}function zb(e,t){const n=Pa(e,t),i=Rb(n);return Tg(i)}function Db(e,t){const n=Pa(e,t),i=jg(n);return Ob(i)}function Bb(e,t,n){const{opacity:i,zIndex:o}=t;i!=null&&i!==n.opacity&&e.setOpacity(i),o!=null&&o!==n.zIndex&&e.setZIndex(o)}function Yc(){return Sa().map}function Ub(e){const t=Yc();return R.useEffect(function(){return t.on(e),function(){t.off(e)}},[t,e]),t}function Gu(){return Gu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Gu.apply(this,arguments)}function $b({bounds:e,boundsOptions:t,center:n,children:i,className:o,id:a,placeholder:u,style:d,whenReady:h,zoom:m,..._},y){const[w]=R.useState({className:o,id:a,style:d}),[P,b]=R.useState(null);R.useImperativeHandle(y,()=>(P==null?void 0:P.map)??null,[P]);const k=R.useCallback(g=>{if(g!==null&&P===null){const x=new oi.Map(g,_);n!=null&&m!=null?x.setView(n,m):e!=null&&x.fitBounds(e,t),h!=null&&x.whenReady(h),b(jb(x))}},[]);R.useEffect(()=>()=>{P==null||P.map.remove()},[P]);const N=P?ko.createElement(Pg,{value:P},i):u??null;return ko.createElement("div",Gu({},w,{ref:k}),N)}const Ng=R.forwardRef($b),Xo=Ib(function({position:t,...n},i){const o=new oi.Marker(t,n);return Ea(o,kg(i,{overlayContainer:o}))},function(t,n,i){n.position!==i.position&&t.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&t.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&t.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&t.setOpacity(n.opacity),t.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?t.dragging.enable():t.dragging.disable())}),Ju=zb(function({positions:t,...n},i){const o=new oi.Polyline(t,n);return Ea(o,kg(i,{overlayContainer:o}))},function(t,n,i){n.positions!==i.positions&&t.setLatLngs(n.positions)}),co=Mb(function(t,n){const i=new oi.Popup(t,n.overlayContainer);return Ea(i,n)},function(t,n,{position:i},o){R.useEffect(function(){const{instance:u}=t;function d(m){m.popup===u&&(u.update(),o(!0))}function h(m){m.popup===u&&o(!1)}return n.map.on({popupopen:d,popupclose:h}),n.overlayContainer==null?(i!=null&&u.setLatLng(i),u.openOn(n.map)):n.overlayContainer.bindPopup(u),function(){var _;n.map.off({popupopen:d,popupclose:h}),(_=n.overlayContainer)==null||_.unbindPopup(),n.map.removeLayer(u)}},[t,n,o,i])}),Og=Db(function({url:t,...n},i){const o=new oi.TileLayer(t,ka(n,i));return Ea(o,i)},function(t,n,i){Bb(t,n,i);const{url:o}=n;o!=null&&o!==i.url&&t.setUrl(o)}),Fb=Ss.divIcon({html:'<div style="width: 12px; height: 12px; background: white; border: 3px solid #3B82F6; border-radius: 50%; box-shadow: 0 2px 4px rgba(0,0,0,0.3);"></div>',className:"route-point-marker",iconSize:[12,12],iconAnchor:[6,6]}),Wb=Ss.divIcon({html:'<div style="width: 10px; height: 10px; background: #10B981; border: 2px solid white; border-radius: 50%; opacity: 0.8; cursor: pointer;"></div>',className:"midpoint-marker",iconSize:[10,10],iconAnchor:[5,5]});function Zb({points:e,setPoints:t,isDrawing:n,routeColor:i}){const[o,a]=R.useState(null);Ub({click(m){if(n&&!o){const _={lat:m.latlng.lat,lng:m.latlng.lng,id:`point-${Date.now()}-${Math.random()}`};t([...e,_])}},mousemove(m){o&&t(e.map(_=>_.id===o?{..._,lat:m.latlng.lat,lng:m.latlng.lng}:_))},mouseup(){a(null)}});const u=m=>{t(e.filter(_=>_.id!==m))},d=m=>{if(m<e.length-1){const _=e[m],y=e[m+1],w={lat:(_.lat+y.lat)/2,lng:(_.lng+y.lng)/2,id:`point-${Date.now()}-${Math.random()}`},P=[...e];P.splice(m+1,0,w),t(P)}},h=()=>{const m=[];for(let _=0;_<e.length-1;_++)m.push({lat:(e[_].lat+e[_+1].lat)/2,lng:(e[_].lng+e[_+1].lng)/2,index:_});return m};return f.jsxs(f.Fragment,{children:[e.length>1&&f.jsx(Ju,{positions:e.map(m=>[m.lat,m.lng]),color:i,weight:4,opacity:.7}),h().map((m,_)=>f.jsx(Xo,{position:[m.lat,m.lng],icon:Wb,eventHandlers:{click:()=>d(m.index)}},`mid-${_}`)),e.map(m=>f.jsx(Xo,{position:[m.lat,m.lng],icon:Fb,draggable:!0,eventHandlers:{dragstart:()=>a(m.id),dragend:()=>a(null),contextmenu:()=>u(m.id)}},m.id))]})}function Hb({points:e}){const t=Yc();return R.useEffect(()=>{if(e.length>0){const n=Ss.latLngBounds(e.map(i=>[i.lat,i.lng]));t.fitBounds(n,{padding:[50,50]})}},[e.length,t]),null}function Vb({onClose:e,onSave:t,initialRoute:n=[],routeColor:i="#3B82F6",title:o="Editor de Rota"}){const[a,u]=R.useState(n.map((w,P)=>({lat:w[0],lng:w[1],id:`point-${P}`}))),[d,h]=R.useState(n.length===0),m=()=>{if(a.length<2){alert("A rota precisa ter pelo menos 2 pontos");return}t(a.map(w=>[w.lat,w.lng])),e()},_=()=>{a.length>0&&u(a.slice(0,-1))},y=()=>{confirm("Deseja limpar todos os pontos da rota?")&&(u([]),h(!0))};return f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:f.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-5xl h-[85vh] flex flex-col m-4",children:[f.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:o}),f.jsx("p",{className:"text-sm text-slate-600 mt-1",children:d?"Clique no mapa para adicionar pontos":"Arraste os pontos para editar"})]}),f.jsx("button",{onClick:e,className:"p-2 text-slate-500 hover:bg-slate-100 rounded-lg transition",children:f.jsx(bg,{className:"w-5 h-5"})})]}),f.jsxs("div",{className:"flex-1 relative",children:[f.jsxs(Ng,{center:a.length>0?[a[0].lat,a[0].lng]:[-15.7801,-47.9292],zoom:13,style:{height:"100%",width:"100%"},children:[f.jsx(Og,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),f.jsx(Hb,{points:a}),f.jsx(Zb,{points:a,setPoints:u,isDrawing:d,routeColor:i})]}),f.jsxs("div",{className:"absolute top-4 left-4 bg-white p-4 rounded-lg shadow-lg z-[1000] max-w-xs",children:[f.jsx("h3",{className:"font-medium text-slate-900 mb-2",children:"Instrues"}),f.jsxs("ul",{className:"text-sm text-slate-600 space-y-1",children:[f.jsx("li",{children:" Clique no mapa para adicionar pontos"}),f.jsx("li",{children:" Arraste pontos brancos para mover"}),f.jsx("li",{children:" Clique nos pontos verdes para adicionar ponto no meio"}),f.jsx("li",{children:" Clique com boto direito para remover ponto"})]}),f.jsx("div",{className:"mt-3 pt-3 border-t border-slate-200",children:f.jsxs("p",{className:"text-sm font-medium text-slate-900",children:["Pontos: ",f.jsx("span",{className:"text-blue-600",children:a.length})]})})]})]}),f.jsxs("div",{className:"p-4 border-t bg-slate-50 flex gap-2",children:[f.jsxs("button",{onClick:_,disabled:a.length===0,className:"px-4 py-2 text-slate-700 bg-white border border-slate-300 rounded-lg hover:bg-slate-50 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[f.jsx(xb,{className:"w-4 h-4"}),"Desfazer"]}),f.jsxs("button",{onClick:y,disabled:a.length===0,className:"px-4 py-2 text-red-600 bg-white border border-red-300 rounded-lg hover:bg-red-50 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[f.jsx(bs,{className:"w-4 h-4"}),"Limpar"]}),f.jsxs("button",{onClick:()=>h(!d),className:`px-4 py-2 rounded-lg transition flex items-center gap-2 ${d?"bg-blue-600 text-white hover:bg-blue-700":"bg-white text-slate-700 border border-slate-300 hover:bg-slate-50"}`,children:[f.jsx(wb,{className:"w-4 h-4"}),d?"Modo: Desenho":"Modo: Edio"]}),f.jsx("div",{className:"flex-1"}),f.jsx("button",{onClick:e,className:"px-4 py-2 text-slate-700 bg-white border border-slate-300 rounded-lg hover:bg-slate-50 transition",children:"Cancelar"}),f.jsxs("button",{onClick:m,disabled:a.length<2,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[f.jsx(xg,{className:"w-4 h-4"}),"Salvar Rota"]})]})]})})}function qb(){const[e,t]=R.useState([]),[n,i]=R.useState(!1),[o,a]=R.useState(null),[u,d]=R.useState(!1),[h,m]=R.useState([]),{user:_}=fn(),[y,w]=R.useState({nome:"",tipo:"fibra_optica",capacidade:"24",comprimento:"",descricao:""});R.useEffect(()=>{P()},[]);const P=async()=>{const{data:E}=await H.from("cabos").select("*").order("created_at",{ascending:!1});E&&t(E)},b=async E=>{E.preventDefault();const A={nome:y.nome,tipo:y.tipo,capacidade:parseInt(y.capacidade),comprimento:y.comprimento?parseFloat(y.comprimento):null,descricao:y.descricao||null,coordenadas:h.length>0?h:null,created_by:_==null?void 0:_.id};if(o){const O=e.find(D=>D.id===o);await H.from("cabos").update(A).eq("id",o),await xa(_==null?void 0:_.id,_==null?void 0:_.email,"cabos",o,y.nome,O,A),a(null)}else{const{data:O}=await H.from("cabos").insert([A]).select();O&&O[0]&&await wa(_==null?void 0:_.id,_==null?void 0:_.email,"cabos",O[0].id,y.nome,A)}w({nome:"",tipo:"fibra_optica",capacidade:"24",comprimento:"",descricao:""}),m([]),i(!1),P()},k=E=>{var A;w({nome:E.nome,tipo:E.tipo,capacidade:E.capacidade.toString(),comprimento:((A=E.comprimento)==null?void 0:A.toString())||"",descricao:E.descricao||""}),m(E.coordenadas||[]),a(E.id),i(!0)},N=async E=>{if(confirm("Deseja realmente excluir este cabo?")){const A=e.find(O=>O.id===E);await H.from("cabos").delete().eq("id",E),A&&await ba(_==null?void 0:_.id,_==null?void 0:_.email,"cabos",E,A.nome,A),P()}},g=()=>{w({nome:"",tipo:"fibra_optica",capacidade:"24",comprimento:"",descricao:""}),m([]),i(!1),a(null)},x=()=>{d(!0)},S=E=>{m(E)};return f.jsxs("div",{className:"space-y-4",children:[!n&&f.jsxs("button",{onClick:()=>i(!0),className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:[f.jsx(ya,{className:"w-5 h-5"}),"Adicionar Cabo"]}),n&&f.jsxs("form",{onSubmit:b,className:"bg-slate-50 p-4 rounded-lg space-y-3",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Nome"}),f.jsx("input",{type:"text",value:y.nome,onChange:E=>w({...y,nome:E.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Tipo"}),f.jsxs("select",{value:y.tipo,onChange:E=>w({...y,tipo:E.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",children:[f.jsx("option",{value:"fibra_optica",children:"Fibra ptica"}),f.jsx("option",{value:"coaxial",children:"Coaxial"}),f.jsx("option",{value:"par_trancado",children:"Par Tranado"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Capacidade (fibras)"}),f.jsx("input",{type:"number",value:y.capacidade,onChange:E=>w({...y,capacidade:E.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",required:!0,min:"1"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Comprimento (metros)"}),f.jsx("input",{type:"number",value:y.comprimento,onChange:E=>w({...y,comprimento:E.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",step:"0.01"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Descrio"}),f.jsx("textarea",{value:y.descricao,onChange:E=>w({...y,descricao:E.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",rows:2})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Rota no Mapa"}),f.jsxs("button",{type:"button",onClick:x,className:"w-full px-4 py-3 border-2 border-slate-300 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition flex items-center justify-center gap-2",children:[f.jsx(Ff,{className:"w-5 h-5 text-blue-600"}),f.jsx("span",{className:"text-slate-700",children:h.length>0?`Rota definida (${h.length} pontos)`:"Desenhar rota no mapa"})]}),h.length>0&&f.jsx("button",{type:"button",onClick:()=>m([]),className:"mt-2 text-sm text-red-600 hover:text-red-700 underline",children:"Limpar rota"})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:o?"Atualizar":"Salvar"}),f.jsx("button",{type:"button",onClick:g,className:"flex-1 px-4 py-2 bg-slate-300 text-slate-700 rounded-lg hover:bg-slate-400 transition",children:"Cancelar"})]})]}),f.jsx("div",{className:"space-y-2",children:e.map(E=>f.jsx("div",{className:"bg-white border border-slate-200 rounded-lg p-3",children:f.jsxs("div",{className:"flex items-start justify-between",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("h3",{className:"font-medium text-slate-900",children:E.nome}),f.jsxs("p",{className:"text-sm text-slate-600",children:[E.tipo.replace("_"," "),"  ",E.capacidade," fibras",E.comprimento&&`  ${E.comprimento}m`]}),E.coordenadas&&E.coordenadas.length>0&&f.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[f.jsx(Ff,{className:"w-3 h-3 text-blue-600"}),f.jsxs("span",{className:"text-xs text-blue-600",children:["Rota no mapa (",E.coordenadas.length," pontos)"]})]}),E.descricao&&f.jsx("p",{className:"text-xs text-slate-500 mt-1",children:E.descricao})]}),f.jsxs("div",{className:"flex gap-1",children:[f.jsx("button",{onClick:()=>k(E),className:"p-2 text-blue-600 hover:bg-blue-50 rounded transition",children:f.jsx(xs,{className:"w-4 h-4"})}),f.jsx("button",{onClick:()=>N(E.id),className:"p-2 text-red-600 hover:bg-red-50 rounded transition",children:f.jsx(bs,{className:"w-4 h-4"})})]})]})},E.id))}),e.length===0&&!n&&f.jsx("div",{className:"text-center py-8 text-slate-500",children:"Nenhum cabo cadastrado"}),u&&f.jsx(Vb,{onClose:()=>d(!1),onSave:S,initialRoute:h,routeColor:"#3B82F6",title:"Desenhar Rota do Cabo"})]})}function Kb(){const[e,t]=R.useState([]),[n,i]=R.useState([]),[o,a]=R.useState(!1),[u,d]=R.useState(null),{user:h}=fn(),[m,_]=R.useState({nome:"",latitude:"",longitude:"",cabo_id:"",capacidade:"8",endereco:"",status:"ativo",icone:"datacenter"});R.useEffect(()=>{y()},[]);const y=async()=>{const[g,x]=await Promise.all([H.from("ctos").select("*").order("created_at",{ascending:!1}),H.from("cabos").select("id, nome")]);g.data&&t(g.data),x.data&&i(x.data)},w=async g=>{g.preventDefault();const x={nome:m.nome,latitude:parseFloat(m.latitude),longitude:parseFloat(m.longitude),cabo_id:m.cabo_id||null,capacidade:parseInt(m.capacidade),endereco:m.endereco||null,status:m.status,icone:m.icone,created_by:h==null?void 0:h.id};if(u){const S=e.find(E=>E.id===u);await H.from("ctos").update(x).eq("id",u),await xa(h==null?void 0:h.id,h==null?void 0:h.email,"ctos",u,m.nome,S,x),d(null)}else{const{data:S}=await H.from("ctos").insert([x]).select();S&&S[0]&&await wa(h==null?void 0:h.id,h==null?void 0:h.email,"ctos",S[0].id,m.nome,x)}_({nome:"",latitude:"",longitude:"",cabo_id:"",capacidade:"8",endereco:"",status:"ativo",icone:"datacenter"}),a(!1),y(),window.location.reload()},P=g=>{_({nome:g.nome,latitude:g.latitude.toString(),longitude:g.longitude.toString(),cabo_id:g.cabo_id||"",capacidade:g.capacidade.toString(),endereco:g.endereco||"",status:g.status,icone:g.icone||"datacenter"}),d(g.id),a(!0)},b=async g=>{if(confirm("Deseja realmente excluir esta CTO?")){const x=e.find(S=>S.id===g);await H.from("ctos").delete().eq("id",g),x&&await ba(h==null?void 0:h.id,h==null?void 0:h.email,"ctos",g,x.nome,x),y(),window.location.reload()}},k=()=>{_({nome:"",latitude:"",longitude:"",cabo_id:"",capacidade:"8",endereco:"",status:"ativo",icone:"datacenter"}),a(!1),d(null)},N=g=>{if(!g)return"No definido";const x=n.find(S=>S.id===g);return(x==null?void 0:x.nome)||"Desconhecido"};return f.jsxs("div",{className:"space-y-4",children:[f.jsxs("button",{onClick:()=>a(!o),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg flex items-center justify-center gap-2 transition",children:[f.jsx(ya,{className:"w-5 h-5"}),"Adicionar CTO"]}),o&&f.jsxs("form",{onSubmit:w,className:"bg-slate-50 p-4 rounded-lg space-y-3",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Nome"}),f.jsx("input",{type:"text",value:m.nome,onChange:g=>_({...m,nome:g.target.value}),required:!0,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Latitude"}),f.jsx("input",{type:"number",step:"any",value:m.latitude,onChange:g=>_({...m,latitude:g.target.value}),required:!0,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Longitude"}),f.jsx("input",{type:"number",step:"any",value:m.longitude,onChange:g=>_({...m,longitude:g.target.value}),required:!0,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Cabo"}),f.jsxs("select",{value:m.cabo_id,onChange:g=>_({...m,cabo_id:g.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",children:[f.jsx("option",{value:"",children:"Selecione um cabo"}),n.map(g=>f.jsx("option",{value:g.id,children:g.nome},g.id))]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Endereo"}),f.jsx("input",{type:"text",value:m.endereco,onChange:g=>_({...m,endereco:g.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Capacidade"}),f.jsx("input",{type:"number",value:m.capacidade,onChange:g=>_({...m,capacidade:g.target.value}),required:!0,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Status"}),f.jsxs("select",{value:m.status,onChange:g=>_({...m,status:g.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",children:[f.jsx("option",{value:"ativo",children:"Ativo"}),f.jsx("option",{value:"inativo",children:"Inativo"}),f.jsx("option",{value:"manutencao",children:"Manuteno"})]})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Tipo de cone"}),f.jsx("div",{className:"p-3 bg-slate-100 rounded-lg border border-slate-300",children:f.jsxs("p",{className:"text-sm text-slate-700",children:[f.jsx("strong",{children:"Pin"})," - Todos os CTOs usam o cone de pin no mapa"]})})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg transition",children:u?"Atualizar":"Salvar"}),f.jsx("button",{type:"button",onClick:k,className:"flex-1 bg-slate-300 hover:bg-slate-400 text-slate-700 py-2 rounded-lg transition",children:"Cancelar"})]})]}),f.jsx("div",{className:"space-y-2",children:e.map(g=>f.jsx("div",{className:"bg-slate-50 p-3 rounded-lg",children:f.jsxs("div",{className:"flex items-start justify-between",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("h3",{className:"font-semibold text-slate-800",children:g.nome}),g.endereco&&f.jsx("p",{className:"text-sm text-slate-600",children:g.endereco}),f.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Cabo: ",N(g.cabo_id),"  ",g.capacidade," portas  ",g.status]})]}),f.jsxs("div",{className:"flex gap-1",children:[f.jsx("button",{onClick:()=>P(g),className:"p-2 text-blue-600 hover:bg-blue-50 rounded transition",children:f.jsx(xs,{className:"w-4 h-4"})}),f.jsx("button",{onClick:()=>b(g.id),className:"p-2 text-red-600 hover:bg-red-50 rounded transition",children:f.jsx(bs,{className:"w-4 h-4"})})]})]})},g.id))})]})}const ji=[{nome:"Azul",valor:"#0000FF"},{nome:"Laranja",valor:"#FF8800"},{nome:"Verde",valor:"#00FF00"},{nome:"Marrom",valor:"#8B4513"},{nome:"Cinza",valor:"#808080"},{nome:"Branco",valor:"#FFFFFF"},{nome:"Vermelho",valor:"#FF0000"},{nome:"Preto",valor:"#000000"},{nome:"Amarelo",valor:"#FFFF00"},{nome:"Violeta",valor:"#8B00FF"},{nome:"Rosa",valor:"#FFC0CB"},{nome:"Aqua",valor:"#00FFFF"}];function Gb(){const[e,t]=R.useState([]),[n,i]=R.useState([]),[o,a]=R.useState(""),[u,d]=R.useState(!1),[h,m]=R.useState(null),{user:_}=fn(),[y,w]=R.useState({numero:"",cor:ji[0].valor,status:"livre",cliente:""});R.useEffect(()=>{P()},[]),R.useEffect(()=>{o&&b()},[o]);const P=async()=>{const{data:E}=await H.from("cabos").select("id, nome");E&&i(E)},b=async()=>{const{data:E}=await H.from("fibras").select("*").eq("cabo_id",o).order("numero",{ascending:!0});E&&t(E)},k=async E=>{if(E.preventDefault(),!o){alert("Selecione um cabo primeiro");return}const A={cabo_id:o,numero:parseInt(y.numero),cor:y.cor,status:y.status,cliente:y.cliente||null};if(h){const O=e.find(D=>D.id===h);await H.from("fibras").update(A).eq("id",h),await xa(_==null?void 0:_.id,_==null?void 0:_.email,"fibras",h,`Fibra #${y.numero}`,O,A),m(null)}else{const{data:O}=await H.from("fibras").insert([A]).select();O&&O[0]&&await wa(_==null?void 0:_.id,_==null?void 0:_.email,"fibras",O[0].id,`Fibra #${y.numero}`,A)}w({numero:"",cor:ji[0].valor,status:"livre",cliente:""}),d(!1),b()},N=E=>{w({numero:E.numero.toString(),cor:E.cor,status:E.status,cliente:E.cliente||""}),m(E.id),d(!0)},g=async E=>{if(confirm("Deseja realmente excluir esta fibra?")){const A=e.find(O=>O.id===E);await H.from("fibras").delete().eq("id",E),A&&await ba(_==null?void 0:_.id,_==null?void 0:_.email,"fibras",E,`Fibra #${A.numero}`,A),b()}},x=()=>{w({numero:"",cor:ji[0].valor,status:"livre",cliente:""}),d(!1),m(null)},S=E=>{const A=ji.find(O=>O.valor===E);return(A==null?void 0:A.nome)||"Desconhecida"};return f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Selecione o Cabo"}),f.jsxs("select",{value:o,onChange:E=>a(E.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",children:[f.jsx("option",{value:"",children:"Selecione um cabo"}),n.map(E=>f.jsx("option",{value:E.id,children:E.nome},E.id))]})]}),o&&f.jsxs(f.Fragment,{children:[f.jsxs("button",{onClick:()=>d(!u),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg flex items-center justify-center gap-2 transition",children:[f.jsx(ya,{className:"w-5 h-5"}),"Adicionar Fibra"]}),u&&f.jsxs("form",{onSubmit:k,className:"bg-slate-50 p-4 rounded-lg space-y-3",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Nmero"}),f.jsx("input",{type:"number",value:y.numero,onChange:E=>w({...y,numero:E.target.value}),required:!0,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Cor"}),f.jsx("select",{value:y.cor,onChange:E=>w({...y,cor:E.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",children:ji.map(E=>f.jsx("option",{value:E.valor,children:E.nome},E.valor))})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Status"}),f.jsxs("select",{value:y.status,onChange:E=>w({...y,status:E.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",children:[f.jsx("option",{value:"livre",children:"Livre"}),f.jsx("option",{value:"em_uso",children:"Em Uso"}),f.jsx("option",{value:"reservada",children:"Reservada"})]})]}),y.status==="em_uso"&&f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Cliente"}),f.jsx("input",{type:"text",value:y.cliente,onChange:E=>w({...y,cliente:E.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg transition",children:h?"Atualizar":"Salvar"}),f.jsx("button",{type:"button",onClick:x,className:"flex-1 bg-slate-300 hover:bg-slate-400 text-slate-700 py-2 rounded-lg transition",children:"Cancelar"})]})]}),f.jsxs("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[e.map(E=>f.jsx("div",{className:"bg-slate-50 p-3 rounded-lg",children:f.jsxs("div",{className:"flex items-start justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[f.jsx("div",{className:"w-8 h-8 rounded border border-slate-300",style:{backgroundColor:E.cor}}),f.jsxs("div",{children:[f.jsxs("h3",{className:"font-semibold text-slate-800",children:["Fibra ",E.numero]}),f.jsxs("p",{className:"text-xs text-slate-500",children:[S(E.cor),"  ",E.status,E.cliente&&`  ${E.cliente}`]})]})]}),f.jsxs("div",{className:"flex gap-1",children:[f.jsx("button",{onClick:()=>N(E),className:"p-2 text-blue-600 hover:bg-blue-50 rounded transition",children:f.jsx(xs,{className:"w-4 h-4"})}),f.jsx("button",{onClick:()=>g(E.id),className:"p-2 text-red-600 hover:bg-red-50 rounded transition",children:f.jsx(bs,{className:"w-4 h-4"})})]})]})},E.id)),e.length===0&&f.jsx("div",{className:"text-center text-slate-500 py-8",children:"Nenhuma fibra cadastrada neste cabo"})]})]}),!o&&f.jsx("div",{className:"text-center text-slate-500 py-8",children:"Selecione um cabo para gerenciar suas fibras"})]})}function Jb({onNavigate:e,currentView:t}){const[n,i]=R.useState(null),{signOut:o,userRole:a}=fn(),u=async()=>{await o()};return f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"w-20 bg-slate-900 flex flex-col items-center py-6 space-y-6",children:[f.jsx("div",{className:"text-white font-bold text-xl",children:"LF"}),f.jsxs("div",{className:"flex-1 flex flex-col space-y-4",children:[f.jsx("button",{onClick:()=>i(n==="pop"?null:"pop"),className:`p-3 rounded-lg transition ${n==="pop"?"bg-blue-600 text-white":"text-slate-400 hover:bg-slate-800 hover:text-white"}`,title:"Gerenciar POPs",children:f.jsx(vb,{className:"w-6 h-6"})}),f.jsx("button",{onClick:()=>i(n==="cabo"?null:"cabo"),className:`p-3 rounded-lg transition ${n==="cabo"?"bg-blue-600 text-white":"text-slate-400 hover:bg-slate-800 hover:text-white"}`,title:"Gerenciar Cabos",children:f.jsx(db,{className:"w-6 h-6"})}),f.jsx("button",{onClick:()=>i(n==="cto"?null:"cto"),className:`p-3 rounded-lg transition ${n==="cto"?"bg-blue-600 text-white":"text-slate-400 hover:bg-slate-800 hover:text-white"}`,title:"Gerenciar CTOs",children:f.jsx(hb,{className:"w-6 h-6"})}),f.jsx("button",{onClick:()=>i(n==="fibra"?null:"fibra"),className:`p-3 rounded-lg transition ${n==="fibra"?"bg-blue-600 text-white":"text-slate-400 hover:bg-slate-800 hover:text-white"}`,title:"Gerenciar Fibras",children:f.jsx(Eb,{className:"w-6 h-6"})})]}),f.jsxs("div",{className:"space-y-4",children:[a==="admin"&&f.jsx("button",{onClick:()=>{i(null),e(t==="settings"?"map":"settings")},className:`p-3 rounded-lg transition ${t==="settings"?"bg-blue-600 text-white":"text-slate-400 hover:bg-slate-800 hover:text-white"}`,title:"Configuraes",children:f.jsx(qu,{className:"w-6 h-6"})}),f.jsx("button",{onClick:u,className:"p-3 rounded-lg text-slate-400 hover:bg-red-600 hover:text-white transition",title:"Sair",children:f.jsx(gb,{className:"w-6 h-6"})})]})]}),n&&f.jsxs("div",{className:"w-96 bg-white shadow-xl overflow-y-auto",children:[f.jsxs("div",{className:"sticky top-0 bg-white border-b border-slate-200 p-4 flex items-center justify-between z-10",children:[f.jsxs("h2",{className:"text-xl font-semibold text-slate-800",children:[n==="pop"&&"Gerenciar POPs",n==="cabo"&&"Gerenciar Cabos",n==="cto"&&"Gerenciar CTOs",n==="fibra"&&"Gerenciar Fibras"]}),f.jsx("button",{onClick:()=>i(null),className:"p-2 hover:bg-slate-100 rounded-lg transition",children:f.jsx(bg,{className:"w-5 h-5"})})]}),f.jsxs("div",{className:"p-4",children:[n==="pop"&&f.jsx(Tb,{}),n==="cabo"&&f.jsx(qb,{}),n==="cto"&&f.jsx(Kb,{}),n==="fibra"&&f.jsx(Gb,{})]})]})]})}function Qb(e="#10B981",t=44){const n=`
    <svg width="${t}" height="${t}" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
      <circle cx="12" cy="12" r="11" fill="${e}" opacity="0.3"/>
      <rect x="6" y="5" width="12" height="3.5" fill="${e}" rx="1"/>
      <rect x="6" y="10" width="12" height="3.5" fill="${e}" rx="1"/>
      <rect x="6" y="15" width="12" height="3.5" fill="${e}" rx="1"/>
      <circle cx="8" cy="6.7" r="0.9" fill="white"/>
      <circle cx="8" cy="11.7" r="0.9" fill="white"/>
      <circle cx="8" cy="16.7" r="0.9" fill="white"/>
      <circle cx="10.5" cy="6.7" r="0.9" fill="white"/>
      <circle cx="10.5" cy="11.7" r="0.9" fill="white"/>
      <circle cx="10.5" cy="16.7" r="0.9" fill="white"/>
    </svg>
  `;return Ss.divIcon({html:n,className:"custom-datacenter-icon",iconSize:[t,t],iconAnchor:[t/2,t/2],popupAnchor:[0,-t/2]})}function Yb(e="#F59E0B",t=40){const n=`
    <svg width="${t}" height="${t}" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
      <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z" fill="${e}"/>
      <circle cx="12" cy="9" r="2.5" fill="white"/>
    </svg>
  `;return Ss.divIcon({html:n,className:"custom-pin-icon",iconSize:[t,t],iconAnchor:[t/2,t],popupAnchor:[0,-t]})}function Xb(e="#10B981"){return Qb(e)}function eS(e="#F59E0B"){return Yb(e)}function tS({pops:e}){const t=Yc();return R.useEffect(()=>{if(e.length>0){const n=e.map(i=>[i.latitude,i.longitude]);n.length>0&&t.fitBounds(n,{padding:[50,50]})}},[e,t]),null}function nS(){const[e,t]=R.useState([]),[n,i]=R.useState([]),[o,a]=R.useState([]),[u,d]=R.useState([]),[h,m]=R.useState(!0),[_,y]=R.useState("#10B981"),[w,P]=R.useState("#F59E0B"),b=[-15.7801,-47.9292];R.useEffect(()=>{N(),k()},[]);const k=async()=>{const{data:g}=await H.from("system_settings").select("value").eq("key","pop_color").maybeSingle(),{data:x}=await H.from("system_settings").select("value").eq("key","cto_color").maybeSingle();g!=null&&g.value&&y(g.value),x!=null&&x.value&&P(x.value)},N=async()=>{m(!0);const[g,x,S,E]=await Promise.all([H.from("pops").select("*"),H.from("ctos").select("*"),H.from("cabos").select("*"),H.from("cto_conexoes").select("*")]);if(g.data&&t(g.data),x.data&&i(x.data),S.data){const A=await Promise.all(S.data.map(async O=>{const D=O.pop_origem_id?(await H.from("pops").select("*").eq("id",O.pop_origem_id).maybeSingle()).data:null,$=O.pop_destino_id?(await H.from("pops").select("*").eq("id",O.pop_destino_id).maybeSingle()).data:null;return{...O,pop_origem:D,pop_destino:$}}));a(A)}if(E.data){const A=await Promise.all(E.data.map(async O=>{const D=O.cto_origem_id?(await H.from("ctos").select("*").eq("id",O.cto_origem_id).maybeSingle()).data:null,$=O.cto_destino_id?(await H.from("ctos").select("*").eq("id",O.cto_destino_id).maybeSingle()).data:null;return{...O,cto_origem:D,cto_destino:$}}));d(A)}m(!1)};return h?f.jsx("div",{className:"flex items-center justify-center h-full",children:f.jsx("div",{className:"text-slate-600",children:"Carregando mapa..."})}):f.jsxs(Ng,{center:b,zoom:13,style:{height:"100%",width:"100%"},className:"z-0",children:[f.jsx(Og,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),f.jsx(tS,{pops:e}),o.map(g=>{let x=[];return g.coordenadas&&Array.isArray(g.coordenadas)&&g.coordenadas.length>0?x=g.coordenadas:g.pop_origem&&g.pop_destino&&(x=[[g.pop_origem.latitude,g.pop_origem.longitude],[g.pop_destino.latitude,g.pop_destino.longitude]]),x.length>0?f.jsx(Ju,{positions:x,color:g.cor,weight:4,opacity:.7,children:f.jsxs(co,{children:[f.jsx("div",{className:"font-semibold",children:g.nome}),f.jsxs("div",{className:"text-sm text-slate-600",children:["Tipo: ",g.tipo]}),f.jsxs("div",{className:"text-sm text-slate-600",children:["Capacidade: ",g.capacidade," fibras"]}),f.jsxs("div",{className:"text-sm text-slate-600",children:["Status: ",g.status]}),g.coordenadas&&Array.isArray(g.coordenadas)&&g.coordenadas.length>0&&f.jsxs("div",{className:"text-sm text-blue-600 mt-1",children:["Rota customizada (",g.coordenadas.length," pontos)"]})]})},g.id):null}),e.map(g=>f.jsx(Xo,{position:[g.latitude,g.longitude],icon:Xb(_),children:f.jsxs(co,{children:[f.jsx("div",{className:"font-semibold",style:{color:_},children:g.nome}),f.jsx("div",{className:"text-sm text-slate-600",children:g.endereco}),g.descricao&&f.jsx("div",{className:"text-sm mt-1",children:g.descricao})]})},g.id)),u.map(g=>{let x=[];return g.coordenadas&&Array.isArray(g.coordenadas)&&g.coordenadas.length>0?x=g.coordenadas:g.cto_origem&&g.cto_destino&&(x=[[g.cto_origem.latitude,g.cto_origem.longitude],[g.cto_destino.latitude,g.cto_destino.longitude]]),x.length>0?f.jsx(Ju,{positions:x,color:g.cor,weight:3,opacity:.6,dashArray:"10, 10",children:f.jsxs(co,{children:[f.jsx("div",{className:"font-semibold",children:g.nome}),f.jsx("div",{className:"text-sm text-slate-600",children:"Conexo CTO"}),f.jsxs("div",{className:"text-sm text-slate-600",children:["Status: ",g.status]}),g.coordenadas&&Array.isArray(g.coordenadas)&&g.coordenadas.length>0&&f.jsxs("div",{className:"text-sm text-blue-600 mt-1",children:["Rota customizada (",g.coordenadas.length," pontos)"]})]})},g.id):null}),n.map(g=>f.jsx(Xo,{position:[g.latitude,g.longitude],icon:eS(w),children:f.jsxs(co,{children:[f.jsx("div",{className:"font-semibold",style:{color:w},children:g.nome}),g.endereco&&f.jsx("div",{className:"text-sm text-slate-600",children:g.endereco}),f.jsxs("div",{className:"text-sm text-slate-600",children:["Capacidade: ",g.capacidade," portas"]}),f.jsxs("div",{className:"text-sm text-slate-600",children:["Status: ",g.status]})]})},g.id))]})}function rS(){const[e,t]=R.useState([]),[n,i]=R.useState(!0),[o,a]=R.useState(!1),[u,d]=R.useState(null),[h,m]=R.useState({email:"",password:"",full_name:"",role:"viewer"});R.useEffect(()=>{_()},[]);async function _(){try{const{data:b,error:k}=await H.from("user_profiles").select("*").order("created_at",{ascending:!1});if(k)throw k;t(b||[])}catch(b){console.error("Error loading users:",b)}finally{i(!1)}}async function y(b){b.preventDefault();try{const{data:k,error:N}=await H.auth.signUp({email:h.email,password:h.password});if(N)throw N;if(k.user){const{error:g}=await H.from("user_profiles").update({full_name:h.full_name,role:h.role}).eq("id",k.user.id);if(g)throw g}alert("Usurio criado com sucesso!"),a(!1),m({email:"",password:"",full_name:"",role:"viewer"}),_()}catch(k){alert("Erro ao criar usurio: "+k.message)}}async function w(b,k){try{const{error:N}=await H.from("user_profiles").update({role:k}).eq("id",b);if(N)throw N;alert("Permisso atualizada com sucesso!"),_()}catch(N){alert("Erro ao atualizar permisso: "+N.message)}}async function P(b){if(b.preventDefault(),!!u)try{const{error:k}=await H.from("user_profiles").update({full_name:h.full_name,role:h.role}).eq("id",u.id);if(k)throw k;alert("Usurio atualizado com sucesso!"),d(null),m({email:"",password:"",full_name:"",role:"viewer"}),_()}catch(k){alert("Erro ao atualizar usurio: "+k.message)}}return n?f.jsx("div",{className:"text-center py-8",children:"Carregando usurios..."}):f.jsxs("div",{children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Usurios do Sistema"}),f.jsxs("button",{onClick:()=>a(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[f.jsx(Sb,{className:"w-4 h-4"}),"Novo Usurio"]})]}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[f.jsx("thead",{className:"bg-gray-50",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nome"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Permisso"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Criado em"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aes"})]})}),f.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(b=>f.jsxs("tr",{className:"hover:bg-gray-50",children:[f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("div",{className:"text-sm font-medium text-gray-900",children:b.full_name||"Sem nome"})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("div",{className:"text-sm text-gray-500",children:b.email})}),f.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[f.jsxs("select",{value:b.role,onChange:k=>w(b.id,k.target.value),className:"text-sm border border-gray-300 rounded px-2 py-1",children:[f.jsx("option",{value:"viewer",children:"Visualizador"}),f.jsx("option",{value:"admin",children:"Administrador"})]}),f.jsx("span",{className:"ml-2",children:b.role==="admin"?f.jsx(Yo,{className:"w-4 h-4 inline text-blue-600"}):f.jsx(fb,{className:"w-4 h-4 inline text-gray-400"})})]}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(b.created_at).toLocaleDateString("pt-BR")}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:f.jsx("button",{onClick:()=>{d(b),m({email:b.email,password:"",full_name:b.full_name||"",role:b.role})},className:"text-blue-600 hover:text-blue-800 mr-3",children:f.jsx(xs,{className:"w-4 h-4"})})})]},b.id))})]})}),o&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:f.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[f.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Criar Novo Usurio"}),f.jsxs("form",{onSubmit:y,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome Completo"}),f.jsx("input",{type:"text",value:h.full_name,onChange:b=>m({...h,full_name:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),f.jsx("input",{type:"email",value:h.email,onChange:b=>m({...h,email:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Senha"}),f.jsx("input",{type:"password",value:h.password,onChange:b=>m({...h,password:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0,minLength:6})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Permisso"}),f.jsxs("select",{value:h.role,onChange:b=>m({...h,role:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[f.jsx("option",{value:"viewer",children:"Visualizador"}),f.jsx("option",{value:"admin",children:"Administrador"})]})]}),f.jsxs("div",{className:"flex gap-3 mt-6",children:[f.jsx("button",{type:"button",onClick:()=>{a(!1),m({email:"",password:"",full_name:"",role:"viewer"})},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancelar"}),f.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Criar Usurio"})]})]})]})}),u&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:f.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[f.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Editar Usurio"}),f.jsxs("form",{onSubmit:P,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome Completo"}),f.jsx("input",{type:"text",value:h.full_name,onChange:b=>m({...h,full_name:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),f.jsx("input",{type:"email",value:h.email,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-100"}),f.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email no pode ser alterado"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Permisso"}),f.jsxs("select",{value:h.role,onChange:b=>m({...h,role:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[f.jsx("option",{value:"viewer",children:"Visualizador"}),f.jsx("option",{value:"admin",children:"Administrador"})]})]}),f.jsxs("div",{className:"flex gap-3 mt-6",children:[f.jsx("button",{type:"button",onClick:()=>{d(null),m({email:"",password:"",full_name:"",role:"viewer"})},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancelar"}),f.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Salvar Alteraes"})]})]})]})})]})}function iS(){const[e,t]=R.useState([]),[n,i]=R.useState(!0),[o,a]=R.useState("all"),[u,d]=R.useState("all"),[h,m]=R.useState(null);R.useEffect(()=>{_()},[o,u]);async function _(){try{let k=H.from("audit_logs").select(`
          *,
          user_profiles!audit_logs_changed_by_fkey (email)
        `).order("changed_at",{ascending:!1}).limit(100);o!=="all"&&(k=k.eq("table_name",o)),u!=="all"&&(k=k.eq("operation",u));const{data:N,error:g}=await k;if(g)throw g;const x=(N||[]).map(S=>{var E;return{...S,user_email:((E=S.user_profiles)==null?void 0:E.email)||"Sistema"}});t(x)}catch(k){console.error("Error loading logs:",k)}finally{i(!1)}}function y(k){return{INSERT:"bg-green-100 text-green-800",UPDATE:"bg-blue-100 text-blue-800",DELETE:"bg-red-100 text-red-800"}[k]||"bg-gray-100 text-gray-800"}function w(k){return{pop_cto:"POPs/CTOs",cabos:"Cabos",cto_conexoes:"Conexes CTO",user_profiles:"Usurios"}[k]||k}function P(k){if(k.operation==="INSERT")return"Registro criado";if(k.operation==="DELETE")return"Registro excludo";if(k.operation==="UPDATE"&&k.old_data&&k.new_data){const N=[];return Object.keys(k.new_data).forEach(g=>{k.old_data[g]!==k.new_data[g]&&N.push(`${g}: ${k.old_data[g]}  ${k.new_data[g]}`)}),N.length>0?N.join(", "):"Sem alteraes detectadas"}return"Alterao"}async function b(){const k=[["Data/Hora","Usurio","Tabela","Operao","ID do Registro","Alteraes"].join(","),...e.map(S=>[new Date(S.changed_at).toLocaleString("pt-BR"),S.user_email,w(S.table_name),S.operation,S.record_id,`"${P(S)}"`].join(","))].join(`
`),N=new Blob([k],{type:"text/csv"}),g=window.URL.createObjectURL(N),x=document.createElement("a");x.href=g,x.download=`audit_logs_${new Date().toISOString().split("T")[0]}.csv`,x.click()}return n?f.jsx("div",{className:"text-center py-8",children:"Carregando logs..."}):f.jsxs("div",{children:[f.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(mb,{className:"w-4 h-4 text-gray-500"}),f.jsxs("select",{value:o,onChange:k=>a(k.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[f.jsx("option",{value:"all",children:"Todas as tabelas"}),f.jsx("option",{value:"pop_cto",children:"POPs/CTOs"}),f.jsx("option",{value:"cabos",children:"Cabos"}),f.jsx("option",{value:"cto_conexoes",children:"Conexes CTO"}),f.jsx("option",{value:"user_profiles",children:"Usurios"})]})]}),f.jsxs("select",{value:u,onChange:k=>d(k.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[f.jsx("option",{value:"all",children:"Todas as operaes"}),f.jsx("option",{value:"INSERT",children:"Criao"}),f.jsx("option",{value:"UPDATE",children:"Atualizao"}),f.jsx("option",{value:"DELETE",children:"Excluso"})]}),f.jsxs("button",{onClick:b,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors ml-auto",children:[f.jsx(Jc,{className:"w-4 h-4"}),"Exportar CSV"]})]}),f.jsxs("div",{className:"text-sm text-gray-500 mb-4",children:["Mostrando ",e.length," registros mais recentes"]}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[f.jsx("thead",{className:"bg-gray-50",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data/Hora"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Usurio"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tabela"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Operao"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Alteraes"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Detalhes"})]})}),f.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(k=>f.jsxs("tr",{className:"hover:bg-gray-50",children:[f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(k.changed_at).toLocaleString("pt-BR")}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:k.user_email}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:w(k.table_name)}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${y(k.operation)}`,children:k.operation})}),f.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 max-w-md truncate",children:P(k)}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:f.jsx("button",{onClick:()=>m(k),className:"text-blue-600 hover:text-blue-800",children:"Ver detalhes"})})]},k.id))})]})}),e.length===0&&f.jsx("div",{className:"text-center py-8 text-gray-500",children:"Nenhum log encontrado com os filtros selecionados"}),h&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:f.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-3xl max-h-[80vh] overflow-auto",children:[f.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Detalhes do Log"}),f.jsx("div",{className:"space-y-3 mb-6",children:f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Data/Hora:"}),f.jsx("p",{className:"text-sm text-gray-900",children:new Date(h.changed_at).toLocaleString("pt-BR")})]}),f.jsxs("div",{children:[f.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Usurio:"}),f.jsx("p",{className:"text-sm text-gray-900",children:h.user_email})]}),f.jsxs("div",{children:[f.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Tabela:"}),f.jsx("p",{className:"text-sm text-gray-900",children:w(h.table_name)})]}),f.jsxs("div",{children:[f.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Operao:"}),f.jsx("p",{children:f.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${y(h.operation)}`,children:h.operation})})]})]})}),h.operation==="UPDATE"&&f.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Dados Anteriores:"}),f.jsx("pre",{className:"bg-gray-50 p-3 rounded text-xs overflow-auto max-h-60",children:JSON.stringify(h.old_data,null,2)})]}),f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Dados Novos:"}),f.jsx("pre",{className:"bg-gray-50 p-3 rounded text-xs overflow-auto max-h-60",children:JSON.stringify(h.new_data,null,2)})]})]}),h.operation==="INSERT"&&f.jsxs("div",{className:"mb-6",children:[f.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Dados Criados:"}),f.jsx("pre",{className:"bg-gray-50 p-3 rounded text-xs overflow-auto max-h-60",children:JSON.stringify(h.new_data,null,2)})]}),h.operation==="DELETE"&&f.jsxs("div",{className:"mb-6",children:[f.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Dados Excludos:"}),f.jsx("pre",{className:"bg-gray-50 p-3 rounded text-xs overflow-auto max-h-60",children:JSON.stringify(h.old_data,null,2)})]}),f.jsx("button",{onClick:()=>m(null),className:"w-full px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:"Fechar"})]})})]})}function sS(){const[e,t]=R.useState("#10B981"),[n,i]=R.useState("#F59E0B"),[o,a]=R.useState(!1),{user:u}=fn();R.useEffect(()=>{d()},[]);const d=async()=>{const{data:y}=await H.from("system_settings").select("*").in("key",["pop_color","cto_color"]);y&&y.forEach(w=>{w.key==="pop_color"&&t(w.value),w.key==="cto_color"&&i(w.value)})},h=async()=>{a(!0);try{await H.from("system_settings").update({value:e,updated_by:u==null?void 0:u.id}).eq("key","pop_color"),await H.from("system_settings").update({value:n,updated_by:u==null?void 0:u.id}).eq("key","cto_color"),alert("Configuraes salvas com sucesso!"),window.location.reload()}catch{alert("Erro ao salvar configuraes")}finally{a(!1)}},m=async()=>{const{data:y}=await H.from("system_settings").select("*"),{data:w}=await H.from("user_profiles").select("*"),P={version:"1.0",timestamp:new Date().toISOString(),settings:y,profiles:w},b=new Blob([JSON.stringify(P,null,2)],{type:"application/json"}),k=URL.createObjectURL(b),N=document.createElement("a");N.href=k,N.download=`backup-${new Date().toISOString().split("T")[0]}.json`,N.click()},_=()=>{const y=document.createElement("input");y.type="file",y.accept=".json",y.onchange=async w=>{var N;const P=(N=w.target.files)==null?void 0:N[0];if(!P)return;const b=await P.text(),k=JSON.parse(b);if(confirm("Deseja restaurar as configuraes? Isso ir sobrescrever as configuraes atuais.")){if(k.settings)for(const g of k.settings)await H.from("system_settings").upsert({key:g.key,value:g.value,description:g.description,updated_by:u==null?void 0:u.id});alert("Configuraes restauradas com sucesso!"),d()}},y.click()};return f.jsxs("div",{className:"space-y-6",children:[f.jsx("div",{children:f.jsx("h2",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Configuraes do Sistema"})}),f.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[f.jsx(yb,{className:"w-5 h-5 text-slate-600"}),f.jsx("h3",{className:"font-medium text-slate-900",children:"Cores dos cones"})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Cor dos POPs (Datacenter)"}),f.jsxs("div",{className:"flex gap-3 items-center",children:[f.jsx("input",{type:"color",value:e,onChange:y=>t(y.target.value),className:"w-20 h-10 rounded border border-slate-300 cursor-pointer"}),f.jsx("input",{type:"text",value:e,onChange:y=>t(y.target.value),className:"px-3 py-2 border border-slate-300 rounded-lg flex-1 max-w-xs",placeholder:"#10B981"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Cor dos CTOs (Pin)"}),f.jsxs("div",{className:"flex gap-3 items-center",children:[f.jsx("input",{type:"color",value:n,onChange:y=>i(y.target.value),className:"w-20 h-10 rounded border border-slate-300 cursor-pointer"}),f.jsx("input",{type:"text",value:n,onChange:y=>i(y.target.value),className:"px-3 py-2 border border-slate-300 rounded-lg flex-1 max-w-xs",placeholder:"#F59E0B"})]})]}),f.jsxs("button",{onClick:h,disabled:o,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition disabled:opacity-50",children:[f.jsx(xg,{className:"w-4 h-4"}),o?"Salvando...":"Salvar Cores"]})]})]}),f.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:[f.jsx("h3",{className:"font-medium text-slate-900 mb-4",children:"Backup e Restore"}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("button",{onClick:m,className:"flex items-center gap-2 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition w-full justify-center",children:[f.jsx(Jc,{className:"w-4 h-4"}),"Exportar Configuraes"]}),f.jsxs("button",{onClick:_,className:"flex items-center gap-2 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition w-full justify-center",children:[f.jsx(bb,{className:"w-4 h-4"}),"Importar Configuraes"]})]})]})]})}function oS(){const[e,t]=R.useState([]),[n,i]=R.useState(!0),[o,a]=R.useState("all");R.useEffect(()=>{u()},[o]);const u=async()=>{i(!0);let h=H.from("login_history").select("*").order("created_at",{ascending:!1}).limit(100);o!=="all"&&(h=h.eq("success",o==="success"));const{data:m}=await h;m&&t(m),i(!1)},d=()=>{const h=[["Data/Hora","Email","Status","IP","User Agent"].join(","),...e.map(w=>[new Date(w.created_at).toLocaleString(),w.email,w.success?"Sucesso":"Falha",w.ip_address,w.user_agent].join(","))].join(`
`),m=new Blob([h],{type:"text/csv"}),_=URL.createObjectURL(m),y=document.createElement("a");y.href=_,y.download=`security-logs-${new Date().toISOString().split("T")[0]}.csv`,y.click()};return f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Yo,{className:"w-5 h-5 text-slate-600"}),f.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Logs de Segurana"})]}),f.jsxs("button",{onClick:d,className:"flex items-center gap-2 px-3 py-2 text-sm border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition",children:[f.jsx(Jc,{className:"w-4 h-4"}),"Exportar CSV"]})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:()=>a("all"),className:`px-3 py-1.5 text-sm rounded-lg transition ${o==="all"?"bg-blue-600 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:"Todos"}),f.jsx("button",{onClick:()=>a("success"),className:`px-3 py-1.5 text-sm rounded-lg transition ${o==="success"?"bg-green-600 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:"Sucessos"}),f.jsx("button",{onClick:()=>a("failed"),className:`px-3 py-1.5 text-sm rounded-lg transition ${o==="failed"?"bg-red-600 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:"Falhas"})]}),n?f.jsx("div",{className:"text-center py-8 text-slate-500",children:"Carregando..."}):f.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 overflow-hidden",children:[f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full",children:[f.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 uppercase",children:"Data/Hora"}),f.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 uppercase",children:"Email"}),f.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 uppercase",children:"Status"}),f.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 uppercase",children:"IP"}),f.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 uppercase",children:"Navegador"})]})}),f.jsx("tbody",{className:"divide-y divide-slate-200",children:e.map(h=>f.jsxs("tr",{className:"hover:bg-slate-50",children:[f.jsx("td",{className:"px-4 py-3 text-sm text-slate-900",children:new Date(h.created_at).toLocaleString()}),f.jsx("td",{className:"px-4 py-3 text-sm text-slate-900",children:h.email}),f.jsx("td",{className:"px-4 py-3",children:f.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${h.success?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:h.success?"Sucesso":"Falha"})}),f.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 font-mono",children:h.ip_address||"-"}),f.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 max-w-xs truncate",title:h.user_agent,children:h.user_agent||"-"})]},h.id))})]})}),e.length===0&&f.jsx("div",{className:"text-center py-8 text-slate-500",children:"Nenhum log encontrado"})]})]})}function aS(){const[e,t]=R.useState("user"),[n,i]=R.useState(!1),[o,a]=R.useState(!0),{user:u}=fn();R.useEffect(()=>{u&&d()},[u]);const d=async()=>{const{data:h}=await H.from("user_profiles").select("role").eq("id",u==null?void 0:u.id).maybeSingle();h&&(t(h.role),i(h.role==="admin")),a(!1)};return{role:e,isAdmin:n,loading:o}}function lS(){const[e,t]=R.useState("settings"),{isAdmin:n,loading:i}=aS();return i?f.jsx("div",{className:"flex-1 flex items-center justify-center",children:f.jsx("div",{className:"text-slate-600",children:"Carregando..."})}):n?f.jsx("div",{className:"flex-1 p-6 overflow-auto",children:f.jsxs("div",{className:"max-w-7xl mx-auto",children:[f.jsxs("div",{className:"mb-6",children:[f.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-2",children:[f.jsx(qu,{className:"w-8 h-8"}),"Administrao do Sistema"]}),f.jsx("p",{className:"text-gray-600 mt-2",children:"Configure o sistema, gerencie usurios e monitore segurana"})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[f.jsx("div",{className:"border-b border-gray-200",children:f.jsxs("nav",{className:"flex -mb-px",children:[f.jsxs("button",{onClick:()=>t("settings"),className:`flex items-center gap-2 px-6 py-4 text-sm font-medium border-b-2 transition-colors ${e==="settings"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[f.jsx(qu,{className:"w-4 h-4"}),"Configuraes"]}),f.jsxs("button",{onClick:()=>t("users"),className:`flex items-center gap-2 px-6 py-4 text-sm font-medium border-b-2 transition-colors ${e==="users"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[f.jsx(kb,{className:"w-4 h-4"}),"Usurios"]}),f.jsxs("button",{onClick:()=>t("logs"),className:`flex items-center gap-2 px-6 py-4 text-sm font-medium border-b-2 transition-colors ${e==="logs"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[f.jsx(pb,{className:"w-4 h-4"}),"Auditoria"]}),f.jsxs("button",{onClick:()=>t("security"),className:`flex items-center gap-2 px-6 py-4 text-sm font-medium border-b-2 transition-colors ${e==="security"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[f.jsx(Yo,{className:"w-4 h-4"}),"Segurana"]})]})}),f.jsxs("div",{className:"p-6",children:[e==="settings"&&f.jsx(sS,{}),e==="users"&&f.jsx(rS,{}),e==="logs"&&f.jsx(iS,{}),e==="security"&&f.jsx(oS,{})]})]})]})}):f.jsx("div",{className:"flex-1 flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx(Yo,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),f.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Acesso Restrito"}),f.jsx("p",{className:"text-slate-600",children:"Voc no tem permisso para acessar esta rea."})]})})}function uS(){const[e,t]=R.useState("map");return f.jsxs("div",{className:"h-screen w-screen flex overflow-hidden",children:[f.jsx(Jb,{onNavigate:t,currentView:e}),f.jsx("div",{className:"flex-1 relative",children:e==="map"?f.jsx(nS,{}):f.jsx(lS,{})})]})}function cS(){const{user:e,loading:t}=fn();return t?f.jsx("div",{className:"h-screen w-screen flex items-center justify-center bg-slate-100",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),f.jsx("p",{className:"text-slate-600",children:"Carregando..."})]})}):e?f.jsx(uS,{}):f.jsx(Pb,{})}function hS(){return f.jsx(lb,{children:f.jsx(cS,{})})}Wl.createRoot(document.getElementById("root")).render(f.jsx(ko.StrictMode,{children:f.jsx(hS,{})}));
